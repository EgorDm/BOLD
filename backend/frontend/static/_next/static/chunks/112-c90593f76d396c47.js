"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{3430:function(e,t,r){r.d(t,{F:function(){return s}});var n=r(85893),a=r(99964),i=r(66242),o=r(78445),l=r(44267),s=(r(67294),function(e){var t=e.open,r=e.onClose,s=e.title,u=e.header,c=e.children;return(0,n.jsx)(a.Z,{open:t,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(i.Z,{sx:{width:600,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[u||(0,n.jsx)(o.Z,{title:s}),(0,n.jsx)(l.Z,{sx:{overflow:"auto",flex:1},children:c})]})})})},87177:function(e,t,r){var n=r(73400),a=r(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(s){l=!0,a=s}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=o(a.useState({message:void 0,variant:"default"}),2),t=e[0],r=e[1],i=(0,n.Ds)().enqueueSnackbar;return a.useEffect((function(){if(null===t||void 0===t?void 0:t.message){var e="info";t.variant&&(e=t.variant),i(t.message,{variant:e,autoHideDuration:5e3})}}),[t]),{notification:t,sendNotification:r}}},44112:function(e,t,r){r.r(t),r.d(t,{default:function(){return ee}});var n=r(34051),a=r.n(n),i=r(85893),o=r(9008),l=r.n(o),s=r(99226),u=r(53156),c=r(66242),d=r(78445),f=r(83321),h=r(44267),m=r(67294),p=r(88767),x=r(76992),v=r(3430),b=r(45670),y=r(87462),j=r(63366),g=r(88409);const Z=["children"];var w=m.forwardRef((function(e,t){const{children:r}=e,n=(0,j.Z)(e,Z),a=(0,b._i)();if(null===a)throw new TypeError("No TabContext provided");const o=m.Children.map(r,(e=>m.isValidElement(e)?m.cloneElement(e,{"aria-controls":(0,b.uU)(a,e.props.value),id:(0,b.pQ)(a,e.props.value)}):null));return(0,i.jsx)(g.Z,(0,y.Z)({},n,{ref:t,value:a.value,children:o}))})),S=r(55050),P=r(86886),A=r(61903),C=r(40044),O=r(94054),_=r(47312),D=r(85945),N=r(18972),L=r(24358),E=r(98456),I=r(82580),k=r(87177),W=r(74231),T=r(62400),U=r(17224);function q(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(u){return void r(u)}l.done?t(s):Promise.resolve(s).then(n,a)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}var Q=function(e){var t=(0,m.useState)("existing"),r=t[0],n=t[1],o=(0,m.useState)(!1),l=o[0],u=o[1],c=(0,k.Z)().sendNotification,d=e.onClose,h=W.Ry({}),p=(0,I.TA)({initialValues:{name:"",description:"",database:"",source:"",sparql:"",search_mode:"LOCAL"},validationSchema:h,onSubmit:function(){var e,t=(e=a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,n="existing"===r?{source_type:"existing",database:t.database}:"urls"===r?{source_type:"urls",urls:t.source.split(/\r|\n/)}:{source_type:"sparql",sparql:t.sparql},e.next=5,T.x1.post("/datasets/",{name:t.name,description:t.description,source:n,search_mode:t.search_mode,mode:"sparql"===r?"SPARQL":"LOCAL"});case 5:(i=e.sent)&&(201===i.status?(c({variant:"success",message:"Dataset scheduled for creation"}),d(!0)):c({variant:"error",message:"Error creating dataset"})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),c({variant:"error",message:"Error creating dataset"});case 13:u(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){q(i,n,a,o,l,"next",e)}function l(e){q(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return(0,i.jsxs)("form",{onSubmit:p.handleSubmit,children:[(0,i.jsxs)(P.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsx)(A.Z,F({label:"Name",variant:"outlined",fullWidth:!0},(0,U.s)(p,"name")))}),(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsx)(A.Z,F({label:"Description",variant:"outlined",multiline:!0,fullWidth:!0},(0,U.s)(p,"description")))}),(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsxs)(b.ZP,{value:r,children:[(0,i.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(w,{onChange:function(e,t){return n(t)},centered:!0,children:[(0,i.jsx)(C.Z,{label:"Existing",value:"existing"}),(0,i.jsx)(C.Z,{label:"Import URL(s)",value:"url"}),(0,i.jsx)(C.Z,{label:"SPARQL Endpoint",value:"sparql"})]})}),(0,i.jsx)(S.Z,{value:"existing",children:(0,i.jsx)(P.ZP,{container:!0,spacing:3,children:(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsx)(A.Z,F({label:"Database",variant:"outlined",fullWidth:!0},(0,U.s)(p,"database")))})})}),(0,i.jsx)(S.Z,{value:"url",children:(0,i.jsx)(P.ZP,{container:!0,spacing:3,children:(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsx)(A.Z,F({label:"URL(s) to dataset",placeholder:"Urls separated by newline",variant:"outlined",multiline:!0,rows:3,fullWidth:!0},(0,U.s)(p,"source")))})})}),(0,i.jsx)(S.Z,{value:"sparql",children:(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsx)(A.Z,F({label:"SPARQL Endpoint URL",variant:"outlined",fullWidth:!0},(0,U.s)(p,"sparql")))})})]})}),(0,i.jsx)(P.ZP,{item:!0,xs:12,children:(0,i.jsxs)(O.Z,{fullWidth:!0,children:[(0,i.jsx)(_.Z,{id:"search_mode_label",children:"Search Mode"}),(0,i.jsxs)(D.Z,F({labelId:"search_mode_label",label:"Search Mode"},(0,U.s)(p,"search_mode"),{children:[(0,i.jsx)(N.Z,{value:"LOCAL",children:"Build Local Search Index"}),(0,i.jsx)(N.Z,{value:"WIKIDATA",children:"Use WikiData API"})]}))]})}),(0,i.jsx)(P.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:(0,i.jsx)(f.Z,{variant:"contained",type:"submit",children:"Submit"})})]}),(0,i.jsx)(L.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:l,children:(0,i.jsx)(E.Z,{color:"inherit"})})]})},M=r(25778),B=r(93902);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=[{field:"id",headerName:"ID",flex:.5,valueFormatter:function(e){return(0,B.UN)(e.value)}},{field:"name",headerName:"Name",flex:1},{field:"description",headerName:"Description",flex:1,renderCell:function(e){return(0,i.jsx)(M.j,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){V(e,t,r[t])}))}return e}({},e,{maxLength:100}))}},{field:"database",headerName:"Database",flex:.5},{field:"state",headerName:"State",flex:.5,type:"singleSelect"},{field:"triples",headerName:"Triples",flex:.5,type:"number",valueGetter:function(e){var t;return null===(t=e.row.statistics)||void 0===t?void 0:t.triple_count}},{field:"created_at",headerName:"Created At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,B.o0)(e.value)}},{field:"updated_at",headerName:"Updated At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,B.o0)(e.value)}}],G={columns:{columnVisibilityModel:{database:!0,updated_at:!1}}},H=[{field:"created_at",sort:"desc"}],$=function(e){return(0,i.jsx)(s.Z,{sx:{width:"100%",height:600},children:(0,i.jsx)(M.W,{endpoint:"/datasets/",columns:z,initialState:G,initialSorting:H})})};function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t,r,n,a,i,o){try{var l=e[i](o),s=l.value}catch(u){return void r(u)}l.done?t(s):Promise.resolve(s).then(n,a)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(s){l=!0,a=s}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=function(){var e=(0,p.useQueryClient)(),t=X(m.useState(!1),2),r=t[0],n=t[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"BOLD Datasets"})}),(0,i.jsx)(s.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,i.jsx)(u.Z,{maxWidth:!1,children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(d.Z,{title:"Datasets",action:(0,i.jsx)(f.Z,{variant:"contained",onClick:function(){return n(!0)},children:"Create Dataset"})}),(0,i.jsx)(h.Z,{children:(0,i.jsx)($,{})})]})})}),(0,i.jsx)(v.F,{title:"Create Dataset",open:r,onClose:function(){return n(!1)},children:(0,i.jsx)(Q,{onClose:function(){var t,r=(t=a().mark((function t(r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(!1),!r){t.next=4;break}return t.next=4,e.invalidateQueries("/datasets/");case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(e){J(i,n,a,o,l,"next",e)}function l(e){J(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}()})})]})};Y.getLayout=function(e){return(0,i.jsx)(x.A,{showNavbar:!1,children:e})};var ee=Y},17224:function(e,t,r){r.d(t,{s:function(){return n}});var n=function(e,t){return{name:t,value:e.values[t],onChange:e.handleChange,error:e.touched[t]&&Boolean(e.errors[t]),helperText:e.touched[t]&&e.errors[t]}}}}]);