"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{16775:function(e,r,t){t.d(r,{Y:function(){return s}});var n=t(85893),a=t(99964),i=t(66242),o=t(78445),l=t(44267),s=(t(67294),function(e){var r=e.open,t=e.onClose,s=e.title,u=e.header,c=e.children;return(0,n.jsx)(a.Z,{open:r,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsxs)(i.Z,{sx:{width:600,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[u||(0,n.jsx)(o.Z,{title:s}),(0,n.jsx)(l.Z,{sx:{overflow:"auto",flex:1},children:c})]})})})},87177:function(e,r,t){var n=t(73400),a=t(67294);function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);o=!0);}catch(s){l=!0,a=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.Z=function(){var e=o(a.useState({message:void 0,variant:"default"}),2),r=e[0],t=e[1],i=(0,n.Ds)().enqueueSnackbar;return a.useEffect((function(){if(null===r||void 0===r?void 0:r.message){var e="info";r.variant&&(e=r.variant),i(r.message,{variant:e,autoHideDuration:5e3})}}),[r]),{notification:r,sendNotification:t}}},44112:function(e,r,t){t.r(r),t.d(r,{default:function(){return G}});var n=t(34051),a=t.n(n),i=t(85893),o=t(9008),l=t.n(o),s=t(99226),u=t(53156),c=t(66242),d=t(78445),f=t(83321),h=t(44267),p=t(67294),m=t(88767),x=t(76992),v=t(16775),b=t(45670),y=t(87462),j=t(63366),g=t(88409);const Z=["children"];var w=p.forwardRef((function(e,r){const{children:t}=e,n=(0,j.Z)(e,Z),a=(0,b._i)();if(null===a)throw new TypeError("No TabContext provided");const o=p.Children.map(t,(e=>p.isValidElement(e)?p.cloneElement(e,{"aria-controls":(0,b.uU)(a,e.props.value),id:(0,b.pQ)(a,e.props.value)}):null));return(0,i.jsx)(g.Z,(0,y.Z)({},n,{ref:r,value:a.value,children:o}))})),C=t(55050),S=t(86886),P=t(61903),N=t(40044),A=t(24358),D=t(98456),O=t(82580),T=t(87177),_=t(74231),q=t(62400);function k(e,r,t,n,a,i,o){try{var l=e[i](o),s=l.value}catch(u){return void t(u)}l.done?r(s):Promise.resolve(s).then(n,a)}var E=function(e){var r=(0,p.useState)("existing"),t=r[0],n=r[1],o=(0,p.useState)(!1),l=o[0],u=o[1],c=(0,T.Z)().sendNotification,d=e.onClose,h=_.Ry({}),m=(0,O.TA)({initialValues:{name:"",description:"",database:"",source:"",sparql:""},validationSchema:h,onSubmit:function(){var e,r=(e=a().mark((function e(r){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,n="existing"===t?{source_type:"existing",database:r.database}:{source_type:"urls",urls:r.source.split(/\r|\n/),sparql:r.sparql?[r.sparql]:[]},e.next=5,q.x1.post("/datasets/",{name:r.name,description:r.description,source:n});case 5:(i=e.sent)&&(201===i.status?(c({variant:"success",message:"Dataset scheduled for creation"}),d(!0)):c({variant:"error",message:"Error creating dataset"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:u(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){k(i,n,a,o,l,"next",e)}function l(e){k(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}()});return(0,i.jsxs)("form",{onSubmit:m.handleSubmit,children:[(0,i.jsxs)(S.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"name",label:"Name",variant:"outlined",fullWidth:!0,value:m.values.name,onChange:m.handleChange,error:m.touched.name&&Boolean(m.errors.name),helperText:m.touched.name&&m.errors.name})}),(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"description",label:"Description",variant:"outlined",multiline:!0,fullWidth:!0,value:m.values.description,onChange:m.handleChange,error:m.touched.description&&Boolean(m.errors.description),helperText:m.touched.description&&m.errors.description})}),(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsxs)(b.ZP,{value:t,children:[(0,i.jsx)(s.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(w,{onChange:function(e,r){return n(r)},"aria-label":"basic tabs example",centered:!0,children:[(0,i.jsx)(N.Z,{label:"Existing",value:"existing"}),(0,i.jsx)(N.Z,{label:"From URL(s)",value:"url"})]})}),(0,i.jsx)(C.Z,{value:"existing",children:(0,i.jsx)(S.ZP,{container:!0,spacing:3,children:(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"database",label:"Database",variant:"outlined",fullWidth:!0,value:m.values.database,onChange:m.handleChange,error:m.touched.database&&Boolean(m.errors.database),helperText:m.touched.database&&m.errors.database})})})}),(0,i.jsx)(C.Z,{value:"url",children:(0,i.jsxs)(S.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"source",label:"Url to dataset",placeholder:"Urls separated by newline",variant:"outlined",multiline:!0,rows:3,fullWidth:!0,value:m.values.source,onChange:m.handleChange,error:m.touched.source&&Boolean(m.errors.source),helperText:m.touched.source&&m.errors.source})}),(0,i.jsx)(S.ZP,{item:!0,xs:12,children:(0,i.jsx)(P.Z,{name:"sparql_endpoint",label:"Sparql endpoint",variant:"outlined",fullWidth:!0,value:m.values.sparql,onChange:m.handleChange,error:m.touched.sparql&&Boolean(m.errors.sparql),helperText:m.touched.sparql&&m.errors.sparql})})]})})]})}),(0,i.jsx)(S.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,i.jsx)(f.Z,{variant:"contained",type:"submit",children:"Submit"})})]}),(0,i.jsx)(A.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:l,children:(0,i.jsx)(D.Z,{color:"inherit"})})]})},I=t(25778),W=t(93902);function U(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var B=[{field:"id",headerName:"ID",flex:.5,valueFormatter:function(e){return(0,W.UN)(e.value)}},{field:"name",headerName:"Name",flex:1},{field:"description",headerName:"Description",flex:1,renderCell:function(e){return(0,i.jsx)(I.j,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){U(e,r,t[r])}))}return e}({},e,{maxLength:100}))}},{field:"database",headerName:"Database",flex:.5},{field:"state",headerName:"State",flex:.5,type:"singleSelect"},{field:"triples",headerName:"Triples",flex:.5,type:"number",valueGetter:function(e){var r;return null===(r=e.row.statistics)||void 0===r?void 0:r.triple_count}},{field:"created_at",headerName:"Created At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,W.o0)(e.value)}},{field:"updated_at",headerName:"Updated At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,W.o0)(e.value)}}],F={columns:{columnVisibilityModel:{database:!0,updated_at:!1}}},L=[{field:"created_at",sort:"desc"}],M=function(e){return(0,i.jsx)(s.Z,{sx:{width:"100%",height:600},children:(0,i.jsx)(I.W,{endpoint:"/datasets/",columns:B,initialState:F,initialSorting:L})})};function Q(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function R(e,r,t,n,a,i,o){try{var l=e[i](o),s=l.value}catch(u){return void t(u)}l.done?r(s):Promise.resolve(s).then(n,a)}function V(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,i=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);o=!0);}catch(s){l=!0,a=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return Q(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=function(){var e=(0,m.useQueryClient)(),r=V(p.useState(!1),2),t=r[0],n=r[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"BOLD Datasets"})}),(0,i.jsx)(s.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,i.jsx)(u.Z,{maxWidth:!1,children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(d.Z,{title:"Datasets",action:(0,i.jsx)(f.Z,{variant:"contained",onClick:function(){return n(!0)},children:"Create Dataset"})}),(0,i.jsx)(h.Z,{children:(0,i.jsx)(M,{})})]})})}),(0,i.jsx)(v.Y,{title:"Create Dataset",open:t,onClose:function(){return n(!1)},children:(0,i.jsx)(E,{onClose:function(){var r,t=(r=a().mark((function r(t){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n(!1),!t){r.next=4;break}return r.next=4,e.invalidateQueries("/datasets/");case 4:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,a){var i=r.apply(e,t);function o(e){R(i,n,a,o,l,"next",e)}function l(e){R(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()})})]})};z.getLayout=function(e){return(0,i.jsx)(x.A,{showNavbar:!1,children:e})};var G=z}}]);