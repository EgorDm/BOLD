(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{42360:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return n(75156)}])},25778:function(e,t,n){"use strict";n.d(t,{W:function(){return P},j:function(){return N}});var r=n(34051),i=n.n(r),o=n(85893),a=n(41733),l=n(99226),u=n(81458),c=n(83321),s=n(15861),d=n(65362),f=n(26615),h=n(27798),m=n(67294),v=n(88767),p=n(62400),y=n(50122),g=n(9386),b=n(3430);function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,i,o,a){try{var l=e[o](a),u=l.value}catch(c){return void n(c)}l.done?t(u):Promise.resolve(u).then(r,i)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function O(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}var N=function(e){var t=e.value,n=e.maxLength,r=void 0===n?200:n,i=k(m.useState(!1),2),a=i[0],u=i[1];return(0,o.jsxs)(l.Z,{children:[a?t:t.slice(0,r),"\xa0",t.length>r&&(0,o.jsx)(y.Z,{type:"button",component:"button",sx:{fontSize:"inherit"},onClick:function(){return u(!a)},children:a?"view less":"view more"})]})},P=function(e){var t,n=e.endpoint,r=e.columns,l=e.initialState,y=e.initialSorting,x=e.initialFilter,w=e.actions,C=O(e,["endpoint","columns","initialState","initialSorting","initialFilter","actions"]),N=k(m.useState(null!==x&&void 0!==x?x:{items:[]}),2),P=N[0],M=N[1],F=k(m.useState(null!==y&&void 0!==y?y:[]),2),A=F[0],D=F[1],Z=k(m.useState(null),2),E=Z[0],T=Z[1],I=(0,m.useMemo)((function(){var e=function(e){return[(0,o.jsx)(d.u,{icon:(0,o.jsx)(a.Z,{}),onClick:function(){return T(e.row)},label:"Delete"})]};return _(r).concat([{field:"actions",type:"actions",getActions:function(t){return _(w?w(t,e(t)):e(t))}}])}),[r]),G=(0,p.zy)(n,{},{}),L=G.isLoading,W=G.isFetching,z=G.data,U=G.count,R=G.page,q=G.setPage,H=G.limit,Q=G.setLimit,V=G.setQuery,X=G.setOrdering,B=(0,v.useMutation)(function(){var e,t=(e=i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Deleting item ",t),e.next=3,p.x1.delete("".concat(n).concat(t.id));case 3:T(null);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){j(o,r,i,a,l,"next",e)}function l(e){j(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),Y=B.isLoading,$=B.mutate;return(0,m.useEffect)((function(){var e=A.length?A:y,t="desc"===e[0].sort?"-":"",n=e[0].field;X("".concat(t).concat(n))}),[A,y]),(0,m.useEffect)((function(){var e,t;V(null!==(t=null===P||void 0===P||null===(e=P.quickFilterValues)||void 0===e?void 0:e.join(" "))&&void 0!==t?t:"")}),[P]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f._,S({},C,{rows:z||[],rowCount:U,loading:L||W,pagination:!0,page:R,pageSize:H,paginationMode:"server",onPageChange:q,onPageSizeChange:Q,columns:I,rowsPerPageOptions:[20,50,100],filterMode:"server",onFilterModelChange:M,sortingMode:"server",onSortModelChange:D,getRowHeight:function(){return"auto"},getEstimatedRowHeight:function(){return 100},components:{Toolbar:h.n,LoadingOverlay:u.Z},initialState:l,componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},sx:{"&.MuiDataGrid-root--densityCompact .MuiDataGrid-cell":{py:1,overflow:"hidden"},"&.MuiDataGrid-root--densityStandard .MuiDataGrid-cell":{py:"15px",overflow:"hidden"},"&.MuiDataGrid-root--densityComfortable .MuiDataGrid-cell":{py:"22px",overflow:"hidden"}}})),(0,o.jsx)(b.F,{title:"Do you really want to delete this dataset?",open:!!E,onClose:function(){return T(null)},children:(0,o.jsx)(g.Y,{actions:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.Z,{variant:"contained",color:"info",onClick:function(){return T(null)},children:"Cancel"}),(0,o.jsx)(c.Z,{variant:"contained",color:"error",onClick:function(){return $(E)},children:"Delete"})]}),loading:Y,children:(0,o.jsxs)(s.Z,{children:["Are you sure you want to delete item ",(0,o.jsx)("pre",{style:{display:"inline"},children:null!==(t=null===E||void 0===E?void 0:E.name)&&void 0!==t?t:null===E||void 0===E?void 0:E.title})]})})})]})}},75156:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(85893),i=n(9008),o=n.n(i),a=n(99226),l=n(53156),u=n(66242),c=n(78445),s=n(44267),d=n(76992),f=(n(67294),n(25778)),h=n(93902),m=[{field:"task_id",headerName:"Task ID",flex:.5,valueFormatter:function(e){return(0,h.UN)(e.value)}},{field:"name",headerName:"Name",flex:1},{field:"object_id",headerName:"Object ID",flex:.5,valueFormatter:function(e){return(0,h.UN)(e.value)}},{field:"state",headerName:"State",flex:.5},{field:"content_type",headerName:"Namespace",flex:.5,valueGetter:function(e){return e.value.model}},{field:"created_at",headerName:"Created At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,h.o0)(e.value)}},{field:"updated_at",headerName:"Updated At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,h.o0)(e.value)}}],v={columns:{columnVisibilityModel:{updated_at:!1}}},p=[{field:"created_at",sort:"desc"}],y=function(e){return(0,r.jsx)(a.Z,{sx:{width:"100%",height:600},children:(0,r.jsx)(f.W,{endpoint:"/tasks/",columns:m,initialState:v,initialSorting:p,getRowId:function(e){return e.task_id}})})},g=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"BOLD Tasks"})}),(0,r.jsx)(a.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(l.Z,{maxWidth:!1,children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(c.Z,{title:"Tasks"}),(0,r.jsx)(s.Z,{children:(0,r.jsx)(y,{})})]})})})]})};g.getLayout=function(e){return(0,r.jsx)(d.A,{showNavbar:!1,children:e})};var b=g}},function(e){e.O(0,[502,464,17,91,774,888,179],(function(){return t=42360,e(e.s=t);var t}));var t=e.O();_N_E=t}]);