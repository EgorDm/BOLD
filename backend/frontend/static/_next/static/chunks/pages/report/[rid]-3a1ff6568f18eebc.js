(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{22904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report/[rid]",function(){return n(94493)}])},76992:function(e,t,n){"use strict";n.d(t,{A:function(){return q}});var r=n(85893),o=n(67294),i=n(99226),l=n(90948),u=n(45697),a=n.n(u),c=n(95934),s=n(42293),f=n(10155),d=n(93946),v=n(34386),p=n(326),b=n(42761);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function h(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=(0,c.Z)(s.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,boxShadow:t.shadows[3]}})),g=function(e){var t=e.onSidebarOpen,n=h(e,["onSidebarOpen"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(x,y({sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}}},n,{children:(0,r.jsxs)(f.Z,{disableGutters:!0,sx:{minHeight:64,left:0,px:2},children:[(0,r.jsx)(d.Z,{onClick:t,sx:{display:{xs:"inline-flex",lg:"none"}},children:(0,r.jsx)(p.Z,{fontSize:"small"})}),(0,r.jsx)(v.Z,{title:"Search",children:(0,r.jsx)(d.Z,{sx:{ml:1},children:(0,r.jsx)(b.Z,{fontSize:"small"})})}),(0,r.jsx)(i.Z,{sx:{flexGrow:1}})]})}))})};g.propTypes={onSidebarOpen:a().func};var j=n(11163),O=n(98396),w=n(67720),S=n(58826),C=n(41071),Z=n(31523),k=n(85938),P=n(6914),E=n(26447),I=n(15861),A=n(79369),_=function(e){return(0,r.jsxs)(E.Z,{direction:"row",children:[(0,r.jsx)(I.Z,{variant:"h3",fontWeight:"bold",children:"BOLD"}),(0,r.jsx)(A.Z,{sx:{transform:"rotate(90deg)",fontSize:44,marginTop:.25,marginLeft:-1.1,marginRight:-1.5}})]})},R=n(41664),T=n.n(R),D=n(97212),F=n(83321);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var N=function(e){var t=e.href,n=e.icon,o=e.title,l=z(e,["href","icon","title"]),u=(0,j.useRouter)(),a=!!t&&u.pathname===t;return(0,r.jsx)(D.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2}},l,{children:(0,r.jsx)(T(),{href:t,passHref:!0,children:(0,r.jsx)(F.Z,{component:"a",startIcon:n,disableRipple:!0,sx:{backgroundColor:a&&"rgba(255,255,255, 0.08)",borderRadius:1,color:a?"secondary.main":"neutral.300",fontWeight:a&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:a?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}},children:(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:o})})})}))};N.propTypes={href:a().string,icon:a().node,title:a().string};var L=n(81261),U=[{href:"/",icon:(0,r.jsx)(C.Z,{fontSize:"small"}),title:"Datasets"},{href:"/reports",icon:(0,r.jsx)(Z.Z,{fontSize:"small"}),title:"Reports"},{href:"/tasks",icon:(0,r.jsx)(k.Z,{fontSize:"small"}),title:"Tasks"},{href:"/lodc",icon:(0,r.jsx)(P.Z,{fontSize:"small"}),title:"LODC"},{href:"/triplydb",icon:(0,r.jsx)(L.Z,{fontSize:"small"}),title:"TriplyDB"}],W=function(e){var t=e.open,n=e.onClose,l=(0,j.useRouter)(),u=(0,O.Z)((function(e){return e.breakpoints.up("lg")}),{defaultMatches:!0,noSsr:!1});(0,o.useEffect)((function(){l.isReady&&t&&(null===n||void 0===n||n())}),[l.asPath]);var a=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{sx:{mt:3,px:2,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(i.Z,{sx:{backgroundColor:"rgba(255, 255, 255, 0.04)",cursor:"pointer",px:3,py:"11px",borderRadius:1},children:(0,r.jsx)(_,{})})})}),(0,r.jsx)(w.Z,{sx:{borderColor:"#2D3748",my:3}}),(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:U.map((function(e){return(0,r.jsx)(N,{icon:e.icon,href:e.href,title:e.title},e.title)}))})]})});return u?(0,r.jsx)(S.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent",children:a}):(0,r.jsx)(S.ZP,{anchor:"left",onClose:n,open:t,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:function(e){return e.zIndex.appBar+100}},variant:"temporary",children:a})};W.propTypes={onClose:a().func,open:a().bool};var B=(0,l.ZP)("div")((function(e){var t,n,r,o=e.theme;return t={display:"flex",flex:"1 1 auto",maxWidth:"100%"},n=o.breakpoints.up("lg"),r={paddingLeft:280},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t})),q=function(e){var t=e.children,n=e.showSidebar,l=void 0===n||n,u=e.showNavbar,a=void 0===u||u,c=(0,o.useState)(l),s=c[0],f=c[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{sx:{paddingTop:a?"64px":0},children:(0,r.jsx)(i.Z,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:t})}),a&&(0,r.jsx)(g,{onSidebarOpen:function(){return f(!0)}}),(0,r.jsx)(W,{onClose:function(){return f(!1)},open:s})]})}},87177:function(e,t,n){"use strict";var r=n(73400),o=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=l(o.useState({message:void 0,variant:"default"}),2),t=e[0],n=e[1],i=(0,r.Ds)().enqueueSnackbar;return o.useEffect((function(){if(null===t||void 0===t?void 0:t.message){var e="info";t.variant&&(e=t.variant),i(t.message,{variant:e,autoHideDuration:5e3})}}),[t]),{notification:t,sendNotification:n}}},94493:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return $t}});var r=n(85893),o=n(9008),i=n.n(o),l=n(99226),u=n(11163),a=n(76992),c=n(67720),s=n(55113),f=n(26447),d=n(44267),v=n(18377),p=n(67294),b=n(68699);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=p.createContext(null),x=function(e){var t=y(p.useState(null),2),n=t[0],o=t[1],i=p.useRef(null),l=(0,p.useCallback)((function(e){o(e),i.current=e}),[]),u=(0,p.useMemo)((function(){return{focus:n,focusRef:i,setFocus:l}}),[n]);return(0,r.jsx)(h.Provider,{value:u,children:e.children})},g=function(){var e=p.useContext(h);if(null===e)throw new Error("useContext must be used within a Provider");return e},j=n(87177),O=n(66754);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=(0,O.E)(),Z=C.useContext,k=C.useEvent,P=C.Provider,E=function(e){var t=e.reportId,n=e.children,o=(0,j.Z)().sendNotification,i=S(p.useState({}),2),l=i[0],u=i[1],a=(0,p.useCallback)((function(){o({variant:"success",message:"Connected to notebook"})}),[]),c=(0,p.useCallback)((function(){o({variant:"error",message:"Disconnected from notebook"})}),[]);return(0,r.jsx)(P,{endpoint:"".concat("ws://localhost:8000","/ws/notebook/").concat(t,"/"),state:l,setState:u,onSocketOpen:a,onSocketClose:c,children:n})},I=Z,A=k,_=n(96486),R=n.n(_),T=n(34051),D=n.n(T),F=n(88767);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({},Object.fromEntries(e.map((function(e){return[e.prefix,e.name]}))))},N=n(62400);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){U(i,r,o,l,u,"next",e)}function u(e){U(i,r,o,l,u,"throw",e)}l(void 0)}))}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=p.createContext(null),H=function(e){var t=(0,j.Z)().sendNotification,n=e.reportId,o=e.children,i=G(p.useState(null),2),l=i[0],u=i[1],a=p.useRef(null),c=(0,p.useCallback)((function(e){u(e),a.current=e}),[]),s=(0,F.useQuery)(["report",n],W(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.x1.get("/reports/".concat(n,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Fetched report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to fetch report"})}}),f=s.refetch,d=s.isFetching,v=(0,F.useMutation)(W(D().mark((function e(){var t;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.x1.put("/reports/".concat(n,"/"),q({},a.current));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Saved report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to save notebook"})}}),b=v.mutate,m=v.isLoading,y=(0,p.useCallback)((function(e){t({variant:"info",message:"Saving report"}),c(e),b()}),[]),h=(0,p.useMemo)((function(){return{report:l,reportRef:a,setReport:c,save:y,isSaving:m,refetch:f,isFetching:d}}),[l,m,d]);return(0,r.jsx)(V.Provider,{value:h,children:o})},$=function(){var e=p.useContext(V);if(null===e)throw new Error("useContext must be used within a Provider");return e},J=function(){var e,t=$().report;return p.useMemo((function(){var e;return z(null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces)}),[null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces])};function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=p.createContext(null),ee=function(e){var t,n=e.children,o=K(p.useState(!1),2),i=o[0],l=o[1],u=K(p.useState(null),2),a=u[0],c=u[1],s=(0,p.useRef)(null),f=(0,j.Z)().sendNotification,d=(0,p.useCallback)((function(e){c(e),s.current=e}),[]),v=(0,p.useCallback)((function(e){d((0,b.VC)(s.current,e.metadata.id,e))}),[]),m=$(),y=m.report,h=m.reportRef,x=m.isSaving,g=m.isFetching,O=m.save,w=(0,p.useCallback)((function(){O(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Y(e,t,n[t])}))}return e}({},h.current,{notebook:s.current}))}),[]);(0,p.useEffect)((function(){g||((null===y||void 0===y?void 0:y.notebook)?d(y.notebook):d((0,b.lw)("Untitled notebook")))}),[null===y,g]),(0,p.useEffect)((function(){if(s.current&&y.notebook){var e=!R().isEqual(s.current,y.notebook);e!==i&&l(e)}}),[i?null:null===y||void 0===y||null===(t=y.notebook)||void 0===t?void 0:t.content,i?null:a,x]),A("CELL_RESULT",(function(e){var t,n,r;d((0,b.lU)(s.current,e.cell_id,e.outputs)),console.debug("Added cell result",s.current);var o,i=e.outputs.some((function(e){return"error"===e.output_type})),l=null!==(o=null===(t=s.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(t){return t===e.cell_id})))&&void 0!==o?o:-1;f(i?{variant:"error",message:"Cell #".concat(l+1," run failed")}:{variant:"success",message:"Cell #".concat(l+1," run succeeded")})}),[]),A("CELL_STATE",(function(e){d((0,b.dr)(s.current,e.cell_id,e.state)),console.debug("Added cell state",s.current)}),[]),(0,p.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),w())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var S=(0,p.useMemo)((function(){return{notebook:a,notebookRef:s,setNotebook:d,setCell:v,changed:i,save:w,isSaving:x,isFetching:g}}),[a,i,x,g]);return(0,r.jsx)(X.Provider,{value:S,children:n})},te=function(){var e=p.useContext(X);if(null===e)throw new Error("useContext must be used within a Provider");return e};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=p.createContext(null),ie=function(e){var t=te().save,n=re(p.useState([]),2),o=n[0],i=n[1],l=p.useRef([]),u=(0,p.useCallback)((function(e){i(e),l.current=e}),[]),a=(0,p.useCallback)((function(e){t(),u(R().uniq(l.current.concat(e)))}),[]),c=(0,j.Z)().sendNotification,s=I(),f=s.socket,d=s.status,v=te().changed;(0,p.useEffect)((function(){if(!v&&o.length>0&&d===O.Q.CONNECTED){var e=!0,t=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var l=r.value;f.send(JSON.stringify({type:"CELL_RUN",data:l}))}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}c({variant:"info",message:"Running ".concat(o.length," cell(s)")}),u([])}}),[v,o.length>0]);var b=g().focusRef;(0,p.useEffect)((function(){var e=function(e){e.shiftKey&&"Enter"===e.key&&(console.log("running cell"),e.preventDefault(),a([b.current]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var m=(0,p.useMemo)((function(){return{queue:o,runCells:a}}),[a]);return(0,r.jsx)(oe.Provider,{value:m,children:e.children})},le=function(){var e=p.useContext(oe);if(null===e)throw new Error("useContext must be used within a Provider");return e},ue=p.createContext(null),ae=function(e){var t,n,o,i=e.cellId,l=le().runCells,u=I(),a=u.socket,c=(u.status,g()),s=c.focus,f=c.setFocus,d=te(),v=d.notebook,m=d.notebookRef,y=d.setNotebook,h=d.setCell,x=(d.changed,d.save,p.useRef(null)),j=null===v||void 0===v||null===(t=v.content)||void 0===t?void 0:t.cells[i],O=(null===v||void 0===v||null===(n=v.results)||void 0===n?void 0:n.states[i])||null,w=(null===v||void 0===v||null===(o=v.results)||void 0===o?void 0:o.outputs[i])||null;x.current=j;var S=(0,p.useCallback)((function(){y((0,b.dr)(m.current,i,{status:"QUEUED"})),l([i])}),[a]),C=(0,p.useCallback)((function(e){s!==i&&f(i)}),[s,i]),Z=(0,p.useMemo)((function(){return{cell:j,cellRef:x,state:O,outputs:w,setCell:h,runCell:S}}),[j,O,w]);return(0,r.jsx)(ue.Provider,{value:Z,children:(0,r.jsx)("div",{onClick:C,children:e.children})})},ce=function(){var e=p.useContext(ue);if(null===e)throw new Error("useContext must be used within a Provider");return e},se=n(31812),fe=n(2734),de=n(98456),ve=n(70655),pe=n(86886),be=function(e){if("execute_result"===e.output_type){var t,n=Object.keys(e.data)[0];return{data:e.data[n],contentType:n,status:200,executionTime:1e3*(null!==(t=e.execution_time)&&void 0!==t?t:0)}}if("error"===e.output_type){var r,o=[e.ename,e.evalue,e.traceback.join("\n")];return{status:400,executionTime:1e3*(null!==(r=e.execution_time)&&void 0!==r?r:0),error:{status:400,text:o.join("\n\n")}}}var i;return{status:400,executionTime:1e3*(null!==(i=e.execution_time)&&void 0!==i?i:0),error:{status:400,text:"Cant render output"}}},me=n(5152),ye=n.n(me),he=ye()((function(){return Promise.all([n.e(335),n.e(381)]).then(n.bind(n,97381)).then((function(e){return e.Yasr}))}),{loadableGenerated:{webpack:function(){return[97381]}},ssr:!1}),xe=ye()((function(){return Promise.all([n.e(94),n.e(443)]).then(n.bind(n,16443)).then((function(e){return e.Yasqe}))}),{loadableGenerated:{webpack:function(){return[16443]}},ssr:!1});function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=n(93946),Oe=n(78445),we=n(61903),Se=n(83321),Ce=n(53156),Ze=n(54937),ke=n(93902);function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pe(e,t,n[t])}))}return e}var Ie=ye()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),Ae=function(e){var t=e.title,n=e.x,o=e.y,i=e.layout,l=e.height,u=void 0===l?400:l;return(0,r.jsx)(Ie,{data:[{type:"bar",x:n,y:o}],style:{width:"100%"},layout:Ee({autosize:!0,height:u,title:t},i)})},_e=n(99964),Re=n(15861),Te={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,maxWidth:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,maxHeight:"100%",display:"flex",flexDirection:"column",fontFamily:"Monospace"},De=function(e){var t=e.source,n=e.open,o=e.onClose;return(0,r.jsx)(_e.Z,{open:n,onClose:o,children:(0,r.jsx)(v.Z,{sx:Te,children:(null!==t&&void 0!==t?t:[]).map((function(e,t){return(0,r.jsx)(Re.Z,{children:(0,r.jsx)("pre",{style:{fontFamily:"inherit"},children:e})},t)}))})})},Fe=n(51184),Me=n(79332);function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ze(e,t,n[t])}))}return e}function Le(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ue=function(e){var t=e.label,n=e.onChange,o=e.value,i=e.step,l=e.min,u=e.max,a=Le(e,["label","onChange","value","step","min","max"]);return(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(Re.Z,{gutterBottom:!0,children:t}),(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(pe.ZP,{item:!0,xs:!0,children:(0,r.jsx)(Fe.ZP,Ne({defaultValue:20,step:i,value:o,marks:!0,min:1,max:u,valueLabelDisplay:"auto",onChange:n},a))}),(0,r.jsx)(pe.ZP,{item:!0,children:(0,r.jsx)(Me.Z,{value:o,size:"small",onChange:function(e){return n(e,parseInt(e.target.value),0)},onBlur:function(e){return n(e,parseInt(e.target.value),0)},inputProps:{step:i,min:l,max:u,type:"number","aria-labelledby":"input-slider"}})})]})]})},We=n(97212),Be=n(59334),qe=n(34386),Ge=n(87918),Ve=n(417),He=n(23493),$e=n.n(He);function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qe(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ye(e,t,n[t])}))}return e}function Xe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(e){if("string"===typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}var rt={SUBJECT:0,PREDICATE:1,OBJECT:2},ot=function(e){var t=e.datasetId,n=e.pos,o=e.prefixes,i=e.label,u=e.onChange,a=e.limit,s=e.value,f=Xe(e,["datasetId","pos","prefixes","label","onChange","limit","value"]),d=et(p.useState([]),2),v=d[0],b=d[1],m=et(p.useState(""),2),y=m[0],h=m[1],x=et(p.useState([]),2),g=x[0],j=x[1],O=null!==s&&void 0!==s?s:v,w=p.useMemo((function(){return $e()(function(){var e,r=(e=D().mark((function e(r,o){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.x1.get("/terms/".concat(t,"/search"),{params:{limit:null!==a&&void 0!==a?a:50,query:r.query,pos:rt[n]}});case 2:i=e.sent,o(i.data);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){Qe(i,r,o,l,u,"next",e)}function u(e){Qe(i,r,o,l,u,"throw",e)}l(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),200)}),[n,t,a]);p.useEffect((function(){var e=!0;if(""!==y)return w({query:y},(function(t){if(e){var n=t?tt(O).concat(tt(t.hits.map((function(e){return e.document})))):tt(O),r=R().uniqBy(n,"value");j(r)}})),function(){e=!1};j(O||[])}),[O,y,fetch]);var S=(0,p.useMemo)((function(){return function(e){return(0,r.jsx)(we.Z,Ke({},e,{variant:"filled",fullWidth:!0,label:i}))}}),[i]),C=(0,p.useMemo)((function(){return function(e,t){e.className;var n=Xe(e,["className"]),i="SUBJECT"===t.pos?"info.light":"PREDICATE"===t.pos?"warning.light":"success.light",u="uri"===t.type?(0,ke.R3)(t.value,o||{}):t.value,a=t.label?t.label:(0,ke.lA)(t.value),s=u;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(We.ZP,Ke({},n,{sx:{alignItems:"stretch",cursor:"pointer"},children:[(0,r.jsx)(l.Z,{sx:{width:4,bgcolor:i,mr:1,borderRadius:1}}),(0,r.jsx)(Be.Z,{primary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Re.Z,{component:"span",fontWeight:t.label?500:"normal",children:[a," "]}),(0,r.jsxs)(Re.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]}),secondary:s})]})),(0,r.jsx)(c.Z,{variant:"fullWidth",component:"li"})]})}}),[o]),Z=(0,p.useMemo)((function(){return function(e,t,n){var i="uri"===n.type?(0,ke.R3)(n.value,o||{}):n.value,l=n.label?n.label:(0,ke.lA)(n.value);return(0,r.jsx)(qe.Z,{sx:{maxWidth:"none"},arrow:!0,title:i,children:(0,r.jsx)(Ge.Z,Ke({label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Re.Z,{variant:"body2",component:"span",fontWeight:n.label?500:"normal",children:[l," "]}),(0,r.jsxs)(Re.Z,{variant:"caption",component:"span",children:["(",n.count,")"]})]})},t))},e)}}),[o]);return(0,r.jsx)(Ve.Z,Ke({autoComplete:!0,multiple:!0,value:O,options:g,getOptionLabel:function(e){return"string"===typeof e?e:e.value},filterOptions:function(e){return e},onChange:function(e,t){j(t?tt(t).concat(tt(g)):g),b(t),u&&u(t)},onInputChange:function(e,t){h(t)},renderInput:S,renderOption:C,renderTags:function(e,t){return e.map((function(e,n){return Z(n,t({index:n}),e)}))}},f))},it=n(41733),lt=n(96540),ut=n(68825),at=n(96214),ct=n(45670),st=n(55050),ft=n(88409),dt=n(40044);function vt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var pt=function(e){var t=e.value,n=e.onChange;vt(e,["value","onChange"]);return(0,r.jsx)(l.Z,{sx:{width:"100%"},children:(0,r.jsxs)(ct.ZP,{value:t,children:[(0,r.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsx)(ft.Z,{value:t,onChange:n,children:e.tabs.map((function(e){var t=e.value,n=e.label;return(0,r.jsx)(dt.Z,{value:t,label:n},t)}))})}),e.tabs.map((function(n){var o=n.value;n.label;return(0,r.jsx)(st.Z,{value:o,children:t===o&&e.renderTab(o)},o)}))]})})};function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mt(e,t,n[t])}))}return e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||jt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function gt(e){return function(e){if(Array.isArray(e))return bt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){if(e){if("string"===typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}function Ot(){var e=xt(["?v (COUNT(?v) as ?count)"]);return Ot=function(){return e},e}function wt(){var e=xt(["\n      VALUES ?p { "," } \n      ?s ?p ?v\n     "]);return wt=function(){return e},e}function St(){var e=xt(["\n      VALUES "," { "," }\n      VALUES "," { "," }\n      ?s "," ","\n    "]);return St=function(){return e},e}function Ct(){var e=xt(["?count >= ",""]);return Ct=function(){return e},e}var Zt=[{value:"plot",label:"Show Plot"},{value:"table",label:"Show Table"}],kt=function(e){var t;return"literal"===e.type?(0,ut.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ut.namedNode)(e.value)},Pt=function(e){var t=e.outputs,n=e.mode,o=J(),i=t[0];if("plot"===n){if("execute_result"===i.output_type&&"application/sparql-results+json"in i.data){var l=JSON.parse(i.data["application/sparql-results+json"]),u=l.results.bindings.map((function(e){return(0,ke.lA)(e.v.value)})),a=l.results.bindings.map((function(e){return parseInt(e.count.value)}));return(0,r.jsx)(Ae,{x:u,y:a,layout:{xaxis:{title:"Value"},yaxis:{title:"Count"}}})}}else if("table"===n){var c=be(i);return(0,r.jsx)(he,{result:c,prefixes:o})}return null},Et={code:function(e){var t=ce(),n=t.cell,o=t.outputs,i=t.setCell,u=n.source,a=p.useRef(null),c=J(),s=(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(xe,{value:u||"",onChange:function(e){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ge(e,t,n[t])}))}return e}({},n,{source:e}))},editorRef:a})}),f=p.useMemo((function(){return(null===o||void 0===o?void 0:o.length)?be(o[0]):null}),[o]),d=(0,p.useMemo)((function(){return!!(null===o||void 0===o?void 0:o.length)&&(0,r.jsx)(l.Z,{sx:{width:"100%"},children:(0,r.jsx)(he,{result:f,prefixes:c})})}),[o,c]);return(0,r.jsxs)(r.Fragment,{children:[s,d]})},widget_valuedistribution:function(e){var t=$().report,n=ce(),o=n.cell,i=n.cellRef,l=n.outputs,u=n.setCell,a=o.data,c=o.source,s=ht(p.useState(!1),2),d=s[0],v=s[1];(0,p.useEffect)((function(){var e=function(e){var t,n,r,o=(null!==(t=e.group_predicate)&&void 0!==t?t:[]).map(kt),i=(0,Ze.X)(Ot()).WHERE(wt(),o);(null!==(n=e.filters)&&void 0!==n?n:[]).forEach((function(e,t){var n,r,o,l,u=null!==(o=null===(n=e.predicate)||void 0===n?void 0:n.map(kt))&&void 0!==o?o:[],a=null!==(l=null===(r=e.object)||void 0===r?void 0:r.map(kt))&&void 0!==l?l:[],c=(0,ut.variable)("p".concat(t)),s=(0,ut.variable)("o".concat(t));i=i.WHERE(St(),c,u,s,a,c,s)}));var l,u=101===e.group_count?1e3:null!==(r=e.group_count)&&void 0!==r?r:20;return(i=i.GROUP().BY((0,ut.variable)("v")).HAVING(Ct(),null!==(l=e.min_group_size)&&void 0!==l?l:1).ORDER().BY((0,ut.variable)("count"),!0).LIMIT(u)).build()}(a);u(yt({},o,{source:[e]}))}),[a]);var b,m,y,h,x=(0,p.useCallback)((function(e){var t=i.current;u(yt({},t,{data:yt({},t.data,e)}))}),[]),g=(0,p.useCallback)((function(){var e=i.current.data;x({filters:gt(e.filters||[]).concat([{}])})}),[]),j=(0,p.useCallback)((function(e,t){var n=i.current.data;x({filters:gt(n.filters.slice(0,e)).concat([yt({},n.filters[e],t)],gt(n.filters.slice(e+1)))})}),[]),O=(0,p.useCallback)((function(e){var t=i.current.data;x({filters:gt(t.filters.slice(0,e)).concat(gt(t.filters.slice(e+1)))})}),[]),w=(0,p.useMemo)((function(){var e,n,o;return(null!==(e=null===a||void 0===a?void 0:a.filters)&&void 0!==e?e:[]).map((function(e,i){var l,u;return(0,r.jsxs)(pe.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsx)(ot,{datasetId:null===t||void 0===t||null===(l=t.dataset)||void 0===l?void 0:l.id,pos:"PREDICATE",label:"Filter values of",value:null!==(n=e.predicate)&&void 0!==n?n:[],onChange:function(e){return j(i,{predicate:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(ot,{sx:{flex:1},datasetId:null===t||void 0===t||null===(u=t.dataset)||void 0===u?void 0:u.id,pos:"OBJECT",label:"Matching values",value:null!==(o=e.object)&&void 0!==o?o:[],onChange:function(e){return j(i,{object:e})}}),(0,r.jsx)(je.Z,{"aria-label":"delete",onClick:function(){return O(i)},children:(0,r.jsx)(it.Z,{})})]})})]},i)}))}),[a.filters]),S=(0,p.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Oe.Z,{sx:{p:0},title:"Value Distribution Query Builder",subheader:"Plots distribution of values for a given predicate and a filter",action:(0,r.jsx)(je.Z,{"aria-label":"View source",onClick:function(){return v(!0)},children:(0,r.jsx)(at.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(we.Z,{label:"For Subject",value:"Any",variant:"filled",disabled:!0})}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(ot,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"PREDICATE",label:"Group values of",value:null!==(b=null===a||void 0===a?void 0:a.group_predicate)&&void 0!==b?b:[],onChange:function(e){return x({group_predicate:e})}})}),w,(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(Se.Z,{variant:"text",startIcon:(0,r.jsx)(lt.Z,{}),onClick:g,children:" Add filter"})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Ce.Z,{maxWidth:"md",children:(0,r.jsx)(Ue,{label:"Limit number of groups",value:null!==(m=null===a||void 0===a?void 0:a.group_count)&&void 0!==m?m:20,valueLabelFormat:function(e){return 101!==e?e.toString():"Unlimited"},onChange:function(e,t){return x({group_count:t})},min:1,max:101,step:1})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Ce.Z,{maxWidth:"md",children:(0,r.jsx)(Ue,{label:"Min group size",value:null!==(y=null===a||void 0===a?void 0:a.min_group_size)&&void 0!==y?y:2,onChange:function(e,t){return x({min_group_size:t})},min:1,max:20,step:1})})})]})})}),[a]),C=(0,p.useMemo)((function(){return!!(null===l||void 0===l?void 0:l.length)&&(0,r.jsx)(pt,{value:null!==(h=a.output_mode)&&void 0!==h?h:"plot",tabs:Zt,onChange:function(e,t){return x({output_mode:t})},renderTab:function(e){return(0,r.jsx)(Pt,{mode:e,outputs:l})}})}),[a.output_mode,l]);return(0,r.jsxs)(r.Fragment,{children:[S,C,(0,r.jsx)(De,{source:c,open:d,onClose:function(){return v(!1)}})]})}},It=function(e){var t=(0,fe.Z)(),n=g().focus,o=ce(),i=o.cell,u=o.state,a=o.runCell,c=n===i.metadata.id,s=Et[i.cell_type],d=(0,p.useMemo)((function(){var e="RUNNING"===(null===u||void 0===u?void 0:u.status)||"QUEUED"===(null===u||void 0===u?void 0:u.status),t=e?"primary":"FINISHED"===(null===u||void 0===u?void 0:u.status)?"success":"ERROR"===(null===u||void 0===u?void 0:u.status)?"error":"primary";return(0,r.jsx)(se.Z,{loading:e,variant:"text",onClick:a,color:t,loadingIndicator:(0,r.jsx)(de.Z,{color:"primary",size:16}),children:(0,r.jsx)(ve.Z,{})})}),[u]);return(0,r.jsxs)(l.Z,{py:2,sx:{display:"flex",borderColor:c?t.palette.grey[300]:"transparent",borderStyle:"solid",borderRadius:"8px"},children:[(0,r.jsx)(l.Z,{children:d}),(0,r.jsx)(f.Z,{spacing:2,sx:{flex:1},children:(0,r.jsx)(s,{})})]})},At=n(88078);function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_t(e,t,n[t])}))}return e}var Tt=function(e){var t,n=te(),o=n.notebook,i=n.notebookRef,l=n.setNotebook,u=n.isSaving,a=n.changed,c=(0,p.useCallback)((function(e){var t;l(Rt({},i.current,{metadata:Rt({},null===(t=i.current)||void 0===t?void 0:t.metadata,{name:e})}))}),[i]);return(0,p.useMemo)((function(){var e;return(0,r.jsx)(Oe.Z,{title:null===o?(0,r.jsx)(At.Z,{variant:"text"}):(0,r.jsx)(Me.Z,{fullWidth:!0,value:null===o||void 0===o||null===(e=o.metadata)||void 0===e?void 0:e.name,onChange:function(e){return c(e.target.value)}}),subheader:null===o?(0,r.jsx)(At.Z,{variant:"text"}):u?"Saving...":a?"Changed":"Draft saved"})}),[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.name,u,a])},Dt=n(94054),Ft=n(47312),Mt=n(85945),zt=n(18972),Nt=n(72428),Lt=n(25883),Ut=n(41899),Wt=n(59622),Bt=n(95175);function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gt=function(e){var t,n,o,i=g(),u=i.focus,a=i.focusRef,s=i.setFocus,f=te(),d=f.notebook,v=f.notebookRef,m=f.setNotebook,y=le().runCells,h=(0,j.Z)().sendNotification,x=u?d.content.cells[u]:null,O=null!==(n=null===x||void 0===x?void 0:x.cell_type)&&void 0!==n?n:"code",w=null!==(o=null===x||void 0===x||null===(t=x.metadata)||void 0===t?void 0:t.timeout)&&void 0!==o?o:5e3;(0,p.useEffect)((function(){!u&&v.current&&v.current.content.cell_order.length>0&&s(v.current.content.cell_order[0])}),[null===u]);var S=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=v.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1,i=(0,b.kE)("code");m((0,b.gg)(v.current,i,o)),h({variant:"success",message:"Cell added"})}),[]),C=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=v.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1;m((0,b.rZ)(v.current,a.current)),h({variant:"success",message:"Cell #".concat(o+1," deleted")})}),[]),Z=(0,p.useCallback)((function(e){var t,n,r,o,i=null!==(o=null===(t=v.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(e){return e===a.current})))&&void 0!==o?o:-1,l=v.current.content.cells[a.current],u=(0,b.kE)(e,l.metadata);m((0,b.VC)(v.current,a.current,u)),h({variant:"success",message:"Cell #".concat(i+1," type changed to ").concat(e)})}),[]),k=(0,p.useCallback)((function(e){m((0,b.wN)(v.current,a.current,{timeout:e}))}),[]),P=(0,p.useCallback)((function(){y([a.current])}),[]),E=(0,p.useCallback)((function(){y(v.current.content.cell_order)}),[]);return(0,p.useMemo)((function(){return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderLeftWidth:"0px",borderRightWidth:"0px",borderRadius:1,bgcolor:"background.paper",color:"text.secondary",pl:2},children:[(0,r.jsx)(je.Z,{"aria-label":"add",size:"large",onClick:S,children:(0,r.jsx)(Nt.Z,{fontSize:"inherit"})}),(0,r.jsx)(je.Z,{"aria-label":"delete",size:"large",onClick:C,children:(0,r.jsx)(it.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(je.Z,{"aria-label":"cut",size:"large",children:(0,r.jsx)(Lt.Z,{fontSize:"inherit"})}),(0,r.jsx)(je.Z,{"aria-label":"copy",size:"large",children:(0,r.jsx)(Ut.Z,{fontSize:"inherit"})}),(0,r.jsx)(je.Z,{"aria-label":"paste",size:"large",children:(0,r.jsx)(Wt.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(je.Z,{"aria-label":"run",size:"large",onClick:P,children:(0,r.jsx)(ve.Z,{fontSize:"inherit"})}),(0,r.jsx)(je.Z,{"aria-label":"runAll",size:"large",onClick:E,children:(0,r.jsx)(Bt.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsxs)(Dt.Z,{variant:"filled",sx:{minWidth:120},children:[(0,r.jsx)(Ft.Z,{children:"Cell Type"}),(0,r.jsxs)(Mt.Z,{displayEmpty:!0,sx:{border:"none"},value:O,onChange:function(e){return Z(e.target.value)},children:[(0,r.jsx)(zt.Z,{value:"code",children:"Code"}),(0,r.jsx)(zt.Z,{value:"markdown",children:"Markdown"}),(0,r.jsx)(zt.Z,{value:"widget_valuedistribution",children:"Histogram Widget"})]})]}),(0,r.jsx)(Ve.Z,{sx:{minWidth:140},getOptionLabel:function(e){return e.toString()},renderInput:function(e){return(0,r.jsx)(we.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qt(e,t,n[t])}))}return e}({},e,{variant:"filled",label:"Timeout (s)",placeholder:"Timeout (s)"}))},options:[5,60,180,600],disableClearable:!0,value:w/1e3,onChange:function(e,t){return t&&k(1e3*t)}})]})}),[u,O,w])},Vt=function(e){var t,n=te().notebook,o=null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.cell_order.map((function(e){return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(ae,{cellId:e,children:(0,r.jsx)(It,{})}),(0,r.jsx)(c.Z,{})]},e)}));return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.Z,{sx:{position:"sticky",zIndex:10,left:0,right:0,top:0},children:(0,r.jsxs)(s.Z,{elevation:15,children:[(0,r.jsx)(Tt,{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(Gt,{})]})}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(d.Z,{children:o})]})},Ht=function(){var e=(0,u.useRouter)().query.rid;return console.log(e),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"BOLD Profiler"})}),(0,r.jsx)(l.Z,{component:"main",children:e&&(0,r.jsx)(H,{reportId:e,children:(0,r.jsx)(E,{reportId:e,children:(0,r.jsx)(ee,{children:(0,r.jsx)(x,{children:(0,r.jsx)(ie,{children:(0,r.jsx)(Vt,{})})})})})})})]})};Ht.getLayout=function(e){return(0,r.jsx)(a.A,{showNavbar:!1,children:e})};var $t=Ht},68699:function(e,t,n){"use strict";n.d(t,{VC:function(){return s},dr:function(){return d},gg:function(){return p},kE:function(){return c},lU:function(){return f},lw:function(){return a},rZ:function(){return b},wN:function(){return v}});var r=n(25934);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function u(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=function(e){return{metadata:{name:e},content:{cells:{},cell_order:[]},results:{outputs:{},states:{}}}},c=function(e,t){return t=null!==t&&void 0!==t?t:{id:(0,r.Z)()},"code"===e?{cell_type:"code",metadata:t,source:"SELECT * \n{ ?s ?p ?o } \nLIMIT 10"}:"markdown"===e?{cell_type:"markdown",metadata:t,source:["# Markdown cell"]}:e.startsWith("widget_")?{cell_type:e,metadata:t,source:[],data:{}}:void 0},s=function(e,t,n){return l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},t,n))}),results:{outputs:l({},e.results.outputs,i({},t,[])),states:l({},e.results.states,i({},t,{status:"INITIAL"}))}})},f=function(e,t,n){return l({},e,{results:l({},e.results,{outputs:l({},e.results.outputs,i({},t,n))})})},d=function(e,t,n){return l({},e,{results:l({},e.results,{states:l({},e.results.states,i({},t,l({},e.results.states[t],n)))})})},v=function(e,t,n){return l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},t,l({},e.content.cells[t],{metadata:l({},e.content.cells[t].metadata,n)})))})})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.metadata.id,o=u(e.content.cell_order);return-1===n?o.push(r):o.splice(n+1,0,r),l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},r,t)),cell_order:o})})},b=function(e,t){var n=u(e.content.cell_order),r=n.indexOf(t);-1!==r&&n.splice(r,1);var o=l({},e.content.cells);return delete o[t],l({},e,{content:l({},e.content,{cells:o,cell_order:n})})}}},function(e){e.O(0,[502,83,732,13,610,774,888,179],(function(){return t=22904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);