(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{22904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report/[rid]",function(){return n(21111)}])},3430:function(e,t,n){"use strict";n.d(t,{F:function(){return a}});var r=n(85893),o=n(99964),i=n(66242),l=n(78445),u=n(44267),a=(n(67294),function(e){var t=e.open,n=e.onClose,a=e.title,c=e.header,s=e.children;return(0,r.jsx)(o.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(i.Z,{sx:{width:600,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[c||(0,r.jsx)(l.Z,{title:a}),(0,r.jsx)(u.Z,{sx:{overflow:"auto",flex:1},children:s})]})})})},76992:function(e,t,n){"use strict";n.d(t,{A:function(){return q}});var r=n(85893),o=n(67294),i=n(99226),l=n(90948),u=n(45697),a=n.n(u),c=n(95934),s=n(42293),f=n(10155),d=n(93946),v=n(34386),p=n(326),m=n(42761);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=(0,c.Z)(s.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,boxShadow:t.shadows[3]}})),j=function(e){var t=e.onSidebarOpen,n=y(e,["onSidebarOpen"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(x,h({sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}}},n,{children:(0,r.jsxs)(f.Z,{disableGutters:!0,sx:{minHeight:64,left:0,px:2},children:[(0,r.jsx)(d.Z,{onClick:t,sx:{display:{xs:"inline-flex",lg:"none"}},children:(0,r.jsx)(p.Z,{fontSize:"small"})}),(0,r.jsx)(v.Z,{title:"Search",children:(0,r.jsx)(d.Z,{sx:{ml:1},children:(0,r.jsx)(m.Z,{fontSize:"small"})})}),(0,r.jsx)(i.Z,{sx:{flexGrow:1}})]})}))})};j.propTypes={onSidebarOpen:a().func};var g=n(11163),w=n(98396),O=n(67720),S=n(58826),C=n(41071),Z=n(31523),P=n(85938),E=n(6914),A=n(26447),k=n(15861),I=n(79369),_=function(e){return(0,r.jsxs)(A.Z,{direction:"row",children:[(0,r.jsx)(k.Z,{variant:"h3",fontWeight:"bold",children:"BOLD"}),(0,r.jsx)(I.Z,{sx:{transform:"rotate(90deg)",fontSize:44,marginTop:.25,marginLeft:-1.1,marginRight:-1.5}})]})},T=n(41664),R=n.n(T),z=n(97212),D=n(83321);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var L=function(e){var t=e.href,n=e.icon,o=e.title,l=N(e,["href","icon","title"]),u=(0,g.useRouter)(),a=!!t&&u.pathname===t;return(0,r.jsx)(z.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2}},l,{children:(0,r.jsx)(R(),{href:t,passHref:!0,children:(0,r.jsx)(D.Z,{component:"a",startIcon:n,disableRipple:!0,sx:{backgroundColor:a&&"rgba(255,255,255, 0.08)",borderRadius:1,color:a?"secondary.main":"neutral.300",fontWeight:a&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:a?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}},children:(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:o})})})}))};L.propTypes={href:a().string,icon:a().node,title:a().string};var F=n(81261),U=[{href:"/",icon:(0,r.jsx)(C.Z,{fontSize:"small"}),title:"Datasets"},{href:"/reports",icon:(0,r.jsx)(Z.Z,{fontSize:"small"}),title:"Reports"},{href:"/tasks",icon:(0,r.jsx)(P.Z,{fontSize:"small"}),title:"Tasks"},{href:"/lodc",icon:(0,r.jsx)(E.Z,{fontSize:"small"}),title:"LODC"},{href:"/triplydb",icon:(0,r.jsx)(F.Z,{fontSize:"small"}),title:"TriplyDB"}],W=function(e){var t=e.open,n=e.onClose,l=(0,g.useRouter)(),u=(0,w.Z)((function(e){return e.breakpoints.up("lg")}),{defaultMatches:!0,noSsr:!1});(0,o.useEffect)((function(){l.isReady&&t&&(null===n||void 0===n||n())}),[l.asPath]);var a=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{sx:{mt:3,px:2,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(i.Z,{sx:{backgroundColor:"rgba(255, 255, 255, 0.04)",cursor:"pointer",px:3,py:"11px",borderRadius:1},children:(0,r.jsx)(_,{})})})}),(0,r.jsx)(O.Z,{sx:{borderColor:"#2D3748",my:3}}),(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:U.map((function(e){return(0,r.jsx)(L,{icon:e.icon,href:e.href,title:e.title},e.title)}))})]})});return u?(0,r.jsx)(S.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent",children:a}):(0,r.jsx)(S.ZP,{anchor:"left",onClose:n,open:t,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:function(e){return e.zIndex.appBar+100}},variant:"temporary",children:a})};W.propTypes={onClose:a().func,open:a().bool};var B=(0,l.ZP)("div")((function(e){var t,n,r,o=e.theme;return t={display:"flex",flex:"1 1 auto",maxWidth:"100%"},n=o.breakpoints.up("lg"),r={paddingLeft:280},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t})),q=function(e){var t=e.children,n=e.showSidebar,l=void 0===n||n,u=e.showNavbar,a=void 0===u||u,c=(0,o.useState)(l),s=c[0],f=c[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{sx:{paddingTop:a?"64px":0},children:(0,r.jsx)(i.Z,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:t})}),a&&(0,r.jsx)(j,{onSidebarOpen:function(){return f(!0)}}),(0,r.jsx)(W,{onClose:function(){return f(!1)},open:s})]})}},87177:function(e,t,n){"use strict";var r=n(73400),o=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=l(o.useState({message:void 0,variant:"default"}),2),t=e[0],n=e[1],i=(0,r.Ds)().enqueueSnackbar;return o.useEffect((function(){if(null===t||void 0===t?void 0:t.message){var e="info";t.variant&&(e=t.variant),i(t.message,{variant:e,autoHideDuration:5e3})}}),[t]),{notification:t,sendNotification:n}}},21111:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Qr}});var r=n(85893),o=n(9008),i=n.n(o),l=n(99226),u=n(11163),a=n(76992),c=n(67720),s=n(55113),f=n(26447),d=n(44267),v=n(18377),p=n(67294),m=n(68699);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=p.createContext(null),x=function(e){var t=h(p.useState(null),2),n=t[0],o=t[1],i=p.useRef(null),l=(0,p.useCallback)((function(e){o(e),i.current=e}),[]),u=(0,p.useMemo)((function(){return{focus:n,focusRef:i,setFocus:l}}),[n]);return(0,r.jsx)(y.Provider,{value:u,children:e.children})},j=function(){var e=p.useContext(y);if(null===e)throw new Error("useContext must be used within a Provider");return e},g=n(87177),w=n(66754);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=(0,w.E)(),Z=C.useContext,P=C.useEvent,E=C.Provider,A=function(e){var t=e.reportId,n=e.children,o=(0,g.Z)().sendNotification,i=S(p.useState({}),2),l=i[0],u=i[1],a=(0,p.useCallback)((function(){o({variant:"success",message:"Connected to notebook"})}),[]),c=(0,p.useCallback)((function(){o({variant:"error",message:"Disconnected from notebook"})}),[]);return(0,r.jsx)(E,{endpoint:"".concat("ws://localhost:8000","/ws/notebook/").concat(t,"/"),state:l,setState:u,onSocketOpen:a,onSocketClose:c,children:n})},k=Z,I=P,_=n(96486),T=n.n(_),R=n(34051),z=n.n(R),D=n(88767);function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({},Object.fromEntries(e.map((function(e){return[e.prefix,e.name]}))))},L=n(62400);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){U(i,r,o,l,u,"next",e)}function u(e){U(i,r,o,l,u,"throw",e)}l(void 0)}))}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=p.createContext(null),Q=function(e){var t=(0,g.Z)().sendNotification,n=e.reportId,o=e.children,i=G(p.useState(null),2),l=i[0],u=i[1],a=p.useRef(null),c=(0,p.useCallback)((function(e){u(e),a.current=e}),[]),s=(0,D.useQuery)(["report",n],W(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.x1.get("/reports/".concat(n,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Fetched report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to fetch report"})}}),f=s.refetch,d=s.isFetching,v=(0,D.useMutation)(W(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.x1.put("/reports/".concat(n,"/"),q({},a.current));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Saved report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to save notebook"})}}),m=v.mutate,b=v.isLoading,h=(0,p.useCallback)((function(e){t({variant:"info",message:"Saving report"}),c(e),m()}),[]),y=(0,p.useMemo)((function(){return{report:l,reportRef:a,setReport:c,save:h,isSaving:b,refetch:f,isFetching:d}}),[l,b,d]);return(0,r.jsx)(H.Provider,{value:y,children:o})},V=function(){var e=p.useContext(H);if(null===e)throw new Error("useContext must be used within a Provider");return e},J=function(){var e,t=V().report;return p.useMemo((function(){var e;return N(null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces)}),[null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces])};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=p.createContext(null),ee=function(e){var t,n=e.children,o=K(p.useState(!1),2),i=o[0],l=o[1],u=K(p.useState(null),2),a=u[0],c=u[1],s=(0,p.useRef)(null),f=(0,g.Z)().sendNotification,d=(0,p.useCallback)((function(e){c(e),s.current=e}),[]),v=(0,p.useCallback)((function(e){d((0,m.VC)(s.current,e.metadata.id,e))}),[]),b=V(),h=b.report,y=b.reportRef,x=b.isSaving,j=b.isFetching,w=b.save,O=(0,p.useCallback)((function(){w(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({},y.current,{notebook:s.current}))}),[]);(0,p.useEffect)((function(){j||((null===h||void 0===h?void 0:h.notebook)?d(h.notebook):d((0,m.lw)("Untitled notebook")))}),[null===h,j]),(0,p.useEffect)((function(){if(s.current&&h.notebook){var e=!T().isEqual(s.current,h.notebook);e!==i&&l(e)}}),[i?null:null===h||void 0===h||null===(t=h.notebook)||void 0===t?void 0:t.content,i?null:a,x]),I("CELL_RESULT",(function(e){var t,n,r;d((0,m.lU)(s.current,e.cell_id,e.outputs)),console.debug("Added cell result",s.current);var o,i=e.outputs.some((function(e){return"error"===e.output_type})),l=null!==(o=null===(t=s.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(t){return t===e.cell_id})))&&void 0!==o?o:-1;e.outputs.length>0&&f(i?{variant:"error",message:"Cell #".concat(l+1," run failed")}:{variant:"success",message:"Cell #".concat(l+1," run succeeded")})}),[]),I("CELL_STATE",(function(e){d((0,m.dr)(s.current,e.cell_id,e.state)),console.debug("Added cell state",s.current)}),[]),(0,p.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),O())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var S=(0,p.useMemo)((function(){return{notebook:a,notebookRef:s,setNotebook:d,setCell:v,changed:i,save:O,isSaving:x,isFetching:j}}),[a,i,x,j]);return(0,r.jsx)(Y.Provider,{value:S,children:n})},te=function(){var e=p.useContext(Y);if(null===e)throw new Error("useContext must be used within a Provider");return e};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=p.createContext(null),ie=function(e){var t=te().save,n=re(p.useState([]),2),o=n[0],i=n[1],l=p.useRef([]),u=(0,p.useCallback)((function(e){i(e),l.current=e}),[]),a=(0,p.useCallback)((function(e){t(),u(T().uniq(l.current.concat(e)))}),[]),c=(0,g.Z)().sendNotification,s=k(),f=s.socket,d=s.status,v=te(),m=v.changed,b=v.isSaving;(0,p.useEffect)((function(){if(!m&&!b&&o.length>0&&d===w.Q.CONNECTED){console.debug("Dispatching run queue");var e=!0,t=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var l=r.value;f.send(JSON.stringify({type:"CELL_RUN",data:l}))}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}c({variant:"info",message:"Running ".concat(o.length," cell(s)")}),u([])}}),[m,b,o.length>0]);var h=j().focusRef;(0,p.useEffect)((function(){var e=function(e){e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),a([h.current]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var y=(0,p.useMemo)((function(){return{queue:o,runCells:a}}),[a]);return(0,r.jsx)(oe.Provider,{value:y,children:e.children})},le=function(){var e=p.useContext(oe);if(null===e)throw new Error("useContext must be used within a Provider");return e},ue=p.createContext(null),ae=function(e){var t,n,o,i=e.cellId,l=le().runCells,u=k().socket,a=j(),c=a.focus,s=a.setFocus,f=te(),d=f.notebook,v=f.notebookRef,b=f.setNotebook,h=f.setCell,y=p.useRef(null),x=null===d||void 0===d||null===(t=d.content)||void 0===t?void 0:t.cells[i],g=(null===d||void 0===d||null===(n=d.results)||void 0===n?void 0:n.states[i])||null,w=(null===d||void 0===d||null===(o=d.results)||void 0===o?void 0:o.outputs[i])||null;y.current=x;var O=(0,p.useCallback)((function(){b((0,m.dr)(v.current,i,{status:"QUEUED"})),l([i])}),[u]),S=(0,p.useCallback)((function(e){c!==i&&s(i)}),[c,i]),C=(0,p.useMemo)((function(){return{cell:x,cellRef:y,state:g,outputs:w,setCell:h,runCell:O}}),[x,g,w]);return(0,r.jsx)(ue.Provider,{value:C,children:(0,r.jsx)("div",{onClick:S,children:e.children})})},ce=function(){var e=p.useContext(ue);if(null===e)throw new Error("useContext must be used within a Provider");return e},se=n(31812),fe=n(2734),de=n(98456),ve=n(70655),pe=n(86886),me=n(78445),be=n(93946),he=n(94054),ye=n(40476),xe=n(53457),je=n(53156),ge=n(68825),we=n(9335),Oe=n(61983);function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Se(e,t,n[t])}))}return e}var Ze=function(e){var t=ce(),n=t.cell,r=t.cellRef,o=t.setCell,i=n.data;return(0,p.useEffect)((function(){var t=Object.values(e(i));o(Ce({},r.current,{source:t}))}),[i]),{setData:(0,p.useCallback)((function(e){var t=r.current;o(Ce({},t,{data:Ce({},t.data,e)}))}),[])}},Pe=n(93902),Ee=n(53402),Ae=n.n(Ee),ke=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},Ie={rdf:Ae()("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfs:Ae()("http://www.w3.org/2000/01/rdf-schema#"),owl:Ae()("http://www.w3.org/2002/07/owl#")},_e=function(e){if("execute_result"===e.output_type){var t,n=Object.keys(e.data)[0];return{data:e.data[n],contentType:n,status:200,executionTime:1e3*(null!==(t=e.execution_time)&&void 0!==t?t:0)}}if("error"===e.output_type){var r,o=[e.ename,e.evalue,e.traceback.join("\n")];return{status:400,executionTime:1e3*(null!==(r=e.execution_time)&&void 0!==r?r:0),error:{status:400,text:o.join("\n\n")}}}var i;return{status:400,executionTime:1e3*(null!==(i=e.execution_time)&&void 0!==i?i:0),error:{status:400,text:"Cant render output"}}},Te=n(99964),Re=n(15861);function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Me={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,maxWidth:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,maxHeight:"100%",display:"flex",flexDirection:"column",fontFamily:"Monospace",overflow:"auto"},Ne=function(e){var t,n=e.source,o=e.open,i=e.onClose;return(0,r.jsx)(Te.Z,{open:o,onClose:i,children:(0,r.jsx)(v.Z,{sx:Me,children:(0,r.jsx)(f.Z,{spacing:2,children:(null!==(t=Object.entries(n))&&void 0!==t?t:[]).filter((function(e){var t=De(e,2);t[0];return t[1]})).map((function(e,t){var n=De(e,2),o=n[0],i=n[1];return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)(Re.Z,{variant:"h6",children:o}),(0,r.jsx)("pre",{style:{fontFamily:"inherit"},children:i.replaceAll("\n\n","\n")})]},t)}))})})})},Le=n(5152),Fe=n.n(Le),Ue=Fe()((function(){return Promise.all([n.e(335),n.e(641),n.e(381)]).then(n.bind(n,97381)).then((function(e){return e.Yasr}))}),{loadableGenerated:{webpack:function(){return[97381]}},ssr:!1}),We=n(50480),Be=n(69368);function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qe(e,t,n[t])}))}return e}function He(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Qe=function(e){var t=e.value,n=e.label,o=He(e,["value","label"]);return(0,r.jsx)(We.Z,{control:(0,r.jsx)(Be.Z,Ge({checked:t,value:t},o)),label:n})},Ve=n(51184),Je=n(79332);function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xe(e,t,n[t])}))}return e}function Ke(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ye=function(e){var t=e.label,n=e.onChange,o=e.value,i=e.step,l=e.min,u=e.max,a=Ke(e,["label","onChange","value","step","min","max"]);return(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(Re.Z,{gutterBottom:!0,children:t}),(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(pe.ZP,{item:!0,xs:!0,children:(0,r.jsx)(Ve.ZP,$e({defaultValue:20,step:i,value:o,marks:!0,min:1,max:u,valueLabelDisplay:"auto",onChange:n},a))}),(0,r.jsx)(pe.ZP,{item:!0,children:(0,r.jsx)(Je.Z,{value:o,size:"small",onChange:function(e){return n(e,parseInt(e.target.value),0)},onBlur:function(e){return n(e,parseInt(e.target.value),0)},inputProps:{step:i,min:l,max:u,type:"number","aria-labelledby":"input-slider"}})})]})]})},et=n(96214),tt=n(45670),nt=n(55050),rt=n(88409),ot=n(40044);function it(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var lt=function(e){var t=e.value,n=e.onChange;it(e,["value","onChange"]);return(0,r.jsx)(l.Z,{sx:{width:"100%"},children:(0,r.jsxs)(tt.ZP,{value:t,children:[(0,r.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsx)(rt.Z,{value:t,onChange:n,children:e.tabs.map((function(e){var t=e.value,n=e.label;return(0,r.jsx)(ot.Z,{value:t,label:n},t)}))})}),e.tabs.map((function(n){var o=n.value;n.label;return(0,r.jsx)(nt.Z,{value:o,children:t===o&&e.renderTab(o)},o)}))]})})},ut=function(e){var t,n=e.mode,o=e.options,i=e.onChange,l=e.renderResult,u=ce(),a=u.cell,c=u.outputs;return(0,p.useMemo)((function(){return c&&c.length>0&&(0,r.jsx)(lt,{value:null!==n&&void 0!==n?n:o[0].value,tabs:o,onChange:function(e,t){return i(t)},renderTab:function(e){return l({mode:e,cell:a,outputs:c})}})}),[null===(t=a.data)||void 0===t?void 0:t.output_mode,c])},at=n(4707),ct=n(26452),st=n(23508),ft=n(26215);function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function bt(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){if(e){if("string"===typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function yt(){var e=mt(['(GROUP_CONCAT(distinct ?subOf;SEPARATOR=",") AS ?subsOf)']);return yt=function(){return e},e}function xt(){var e=mt(['(GROUP_CONCAT(distinct ?equiv;SEPARATOR=",") AS ?equivs)']);return xt=function(){return e},e}function jt(){var e=mt(['(GROUP_CONCAT(distinct ?key;SEPARATOR=",") AS ?keys)']);return jt=function(){return e},e}function gt(){var e=mt(['(GROUP_CONCAT(distinct ?prop;SEPARATOR=",") AS ?props)']);return gt=function(){return e},e}function wt(){var e=mt(["(COUNT(?s) AS ?count)"]);return wt=function(){return e},e}function Ot(){var e=mt(["\n    ?class\n    ","\n    ","\n    ","\n    ","\n    ","\n  "]);return Ot=function(){return e},e}function St(){var e=mt(["OPTIONAL { ?class "," ?subOf . } ."]);return St=function(){return e},e}function Ct(){var e=mt(["OPTIONAL { ?class "," ?equiv . } ."]);return Ct=function(){return e},e}function Zt(){var e=mt(["OPTIONAL { ?class "," ?keylist . ?keylist ","*/"," ?key . } ."]);return Zt=function(){return e},e}function Pt(){var e=mt(["OPTIONAL { ?prop rdfs:domain ?class . } ."]);return Pt=function(){return e},e}function Et(){var e=mt(["\n    ?class "," ?ty .\n    ?s ?p ?class .\n    ","\n    ","\n    ","\n    ","\n  "]);return Et=function(){return e},e}function At(){var e=mt(["\n      VALUES ?ty { "," }\n    "]);return At=function(){return e},e}var kt=[{value:"hierarchy",label:"Hierarchy"},{value:"table",label:"Show Table"}],It=function(e){var t,n=Ie.rdf,r=Ie.rdfs,o=Ie.owl,i=(0,we.X)(Ot(),e.withSubs?(0,Oe.j)(yt()):"",e.withEquivs?(0,Oe.j)(xt()):"",e.withKeys?(0,Oe.j)(jt()):"",e.withProps?(0,Oe.j)(gt()):"",e.withCounts?(0,Oe.j)(wt()):"").WHERE(Et(),n.type,e.withSubs?(0,Oe.j)(St(),r.subClassOf):"",e.withEquivs?(0,Oe.j)(Ct(),o.equivalentClass):"",e.withKeys?(0,Oe.j)(Zt(),o.hasKey,n.rest,n.first):"",e.withProps?(0,Oe.j)(Pt()):"").GROUP().BY("class").LIMIT(null!==(t=e.limit)&&void 0!==t?t:20);if(!e.anyClass){var l=bt(e.owlClasses?[o.Class]:[]).concat(bt(e.rdfClasses?[r.Class]:[]));i=i.WHERE(At(),l)}return e.withCounts&&(i=i.ORDER().BY((0,ge.variable)("count"),!0)),{primaryQuery:i.build()}},_t=function(e){var t,n=e.mode,o=e.cell,i=e.outputs,l=J(),u=o.data;if("hierarchy"===n&&"execute_result"===(null===(t=i[0])||void 0===t?void 0:t.output_type)){var a=function(e){if("execute_result"===e.output_type){var t=Object.keys(e.data)[0],n=e.data[t];return JSON.parse(n)}return null}(i[0]),c=0,s=a.results.bindings.map((function(e,t){var n,r,o,i,a,s,f,d,v,p,m=null===(n=e.class)||void 0===n?void 0:n.value,b="uri"===(null===(r=e.class)||void 0===r?void 0:r.type)?(0,Pe.R3)(m,l||{}):m,h=function(e){var t,n;return(null===(n=null===(t=null===e||void 0===e?void 0:e.split(","))||void 0===t?void 0:t.filter((function(e){return!!e})))||void 0===n?void 0:n.map(Pe.R3))||[]},y=null===(o=e.count)||void 0===o?void 0:o.value,x=[];(null===(i=u.withSubs)||void 0===i||i)&&x.push(Tt("Parents",h(null===(a=e.subsOf)||void 0===a?void 0:a.value)));(null===(s=u.withEquivs)||void 0===s||s)&&x.push(Tt("Equivalent To",h(null===(f=e.equiv)||void 0===f?void 0:f.value)));(null===(d=u.withKeys)||void 0===d||d)&&x.push(Tt("Keys",h(null===(v=e.key)||void 0===v?void 0:v.value)));u.withProps&&x.push(Tt("Properties",h(null===(p=e.props)||void 0===p?void 0:p.value)));return{id:c++,name:"".concat(b," ").concat(y?"(".concat(y,")"):""),children:x}}));return(0,r.jsx)(at.Z,{defaultCollapseIcon:(0,r.jsx)(st.Z,{}),defaultExpandIcon:(0,r.jsx)(ft.Z,{}),sx:{height:300,flexGrow:1,overflowY:"auto"},children:s.map(Rt)})}var f=_e(i[0]);return(0,r.jsx)(Ue,{result:f,prefixes:l})},Tt=function(e,t){return{id:e,name:"".concat(e," (").concat(t.length,")"),children:t.map((function(e){return{id:e,name:e}}))}},Rt=function(e){return(0,r.jsx)(ct.Z,{nodeId:e.id.toString(),label:e.name,children:Array.isArray(e.children)?e.children.map((function(e){return Rt(e)})):null},e.id)},zt=n(61903),Dt=n(87109),Mt=n(83321),Nt=n(24358),Lt=n(58032),Ft=n(82580),Ut=n(74231),Wt=Fe()((function(){return Promise.all([n.e(94),n.e(641),n.e(443)]).then(n.bind(n,16443)).then((function(e){return e.Yasqe}))}),{loadableGenerated:{webpack:function(){return[16443]}},ssr:!1}),Bt=n(3430),qt=n(542);function Gt(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qt=function(e){var t=e.open,n=e.templatePrompt,o=e.templateOutput,i=e.onClose,l=(0,p.useState)(!1),u=l[0],a=l[1],c=(0,g.Z)().sendNotification,s=(0,Ft.TA)({initialValues:{prompt:void 0},validationSchema:Ut.Ry({}),onSubmit:function(){var e,t=(e=z().mark((function e(t){var r,l;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,r=t.prompt.replace(/\n/g," "),e.next=5,L.x1.post("/services/gpt_prompt",{prompt:n.replaceAll("{{prompt}}",r)});case 5:(l=e.sent)&&(200===l.status?(c({variant:"success",message:"Report created"}),i({prompt:r,output:o.replaceAll("{{prompt}}",r).replaceAll("{{output}}",l.data.choices[0].text).trim()})):c({variant:"error",message:"GPT error, check if it is set up correctly"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){Gt(i,r,o,l,u,"next",e)}function u(e){Gt(i,r,o,l,u,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return(0,r.jsxs)(Bt.F,{title:"GPT Text to SPARQL query",open:t,onClose:i,children:[(0,r.jsx)("form",{onSubmit:s.handleSubmit,children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(zt.Z,{InputProps:{startAdornment:(0,r.jsx)(Dt.Z,{position:"start",children:(0,r.jsx)(Re.Z,{children:"Query must "})})},name:"prompt",value:s.values.prompt,onChange:s.handleChange,error:s.touched.prompt&&Boolean(s.errors.prompt),helperText:s.touched.prompt&&s.errors.prompt,multiline:!0,fullWidth:!0,rows:4,variant:"standard",sx:{alignItems:"start"},inputProps:{style:{alignItems:"start"}}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)(Mt.Z,{variant:"contained",type:"submit",children:"Submit"})})]})}),(0,r.jsx)(Nt.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:u,children:(0,r.jsx)(de.Z,{color:"inherit"})})]})},Vt=n(95934),Jt=n(97212),Xt=n(59334),$t=n(417),Kt=n(34386),Yt=n(87918),en=n(23493),tn=n.n(en),nn=n(41664),rn=n.n(nn);function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t,n,r,o,i,l){try{var u=e[i](l),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,o)}function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){un(e,t,n[t])}))}return e}function cn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||dn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e){return function(e){if(Array.isArray(e))return on(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){if(e){if("string"===typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}function vn(){var e,t,n=(e=["\n  td, td * {\n    vertical-align: top;\n  }\n  \n  td:first-child {\n    padding-right: 8px;\n  }\n\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return vn=function(){return n},n}var pn=function(e){var t=e.datasetId,n=e.pos,o=e.prefixes,i=e.label,u=e.onChange,a=e.limit,s=e.value,f=cn(e,["datasetId","pos","prefixes","label","onChange","limit","value"]),d=sn(p.useState([]),2),v=d[0],m=d[1],b=sn(p.useState(""),2),h=b[0],y=b[1],x=sn(p.useState([]),2),j=x[0],g=x[1],w=null!==s&&void 0!==s?s:v,O=p.useMemo((function(){return tn()(function(){var e,r=(e=z().mark((function e(r,o){var i;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.x1.get("/datasets/".concat(t,"/search"),{params:{limit:null!==a&&void 0!==a?a:50,query:r.query,pos:n}});case 2:i=e.sent,o(i.data);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){ln(i,r,o,l,u,"next",e)}function u(e){ln(i,r,o,l,u,"throw",e)}l(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),200)}),[n,t,a]);p.useEffect((function(){var e=!0;if(""!==h)return O({query:h},(function(t){if(e){var n=t?fn(w).concat(fn(t.hits.map((function(e){return e.document})))):fn(w),r=T().uniqBy(n,"value");g(r)}})),function(){e=!1};g(w||[])}),[w,h,fetch]);var S=(0,p.useMemo)((function(){return function(e){return(0,r.jsx)(zt.Z,an({},e,{variant:"filled",fullWidth:!0,label:i}))}}),[i]),C=(0,p.useMemo)((function(){return function(e,t){e.className;var n=cn(e,["className"]),i="SUBJECT"===t.pos?"info.light":"PREDICATE"===t.pos?"warning.light":"success.light",u="uri"===t.type?(0,Pe.R3)(t.value,o||{}):t.value,a=t.label?t.label:(0,Pe.lA)(t.value),s=u;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Jt.ZP,an({},n,{sx:{alignItems:"stretch",cursor:"pointer"},children:[(0,r.jsx)(l.Z,{sx:{width:4,bgcolor:i,mr:1,borderRadius:1}}),(0,r.jsx)(Xt.Z,{primary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Re.Z,{component:"span",fontWeight:t.label?500:"normal",children:[a," "]}),t.count&&(0,r.jsxs)(Re.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]}),secondary:s})]})),(0,r.jsx)(c.Z,{variant:"fullWidth",component:"li"})]})}}),[o]),Z=(0,p.useMemo)((function(){return function(e,t,n){return(0,r.jsx)(bn,{term:n,chipProps:t,prefixes:o},e)}}),[o]);return(0,r.jsx)($t.Z,an({autoComplete:!0,multiple:!0,value:w,options:j,getOptionLabel:function(e){return"string"===typeof e?e:e.value},filterOptions:function(e){return e},onChange:function(e,t){g(t?fn(t).concat(fn(j)):j),m(t),u&&u(t)},onInputChange:function(e,t){y(t)},renderInput:S,renderOption:C,renderTags:function(e,t){return e.map((function(e,n){return Z(n,t({index:n}),e)}))}},f))},mn=Vt.Z.table(vn()),bn=function(e){var t=e.term,n=e.prefixes,o=e.chipProps,i=cn(e,["term","prefixes","chipProps"]),l="uri"===t.type?(0,Pe.R3)(t.value,n||{}):t.value,u=t.label?t.label:(0,Pe.lA)(t.value);return(0,r.jsx)(Kt.Z,an({sx:{maxWidth:"none"},arrow:!0,title:(0,r.jsx)(f.Z,{children:(0,r.jsxs)(mn,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"IRI"}),(0,r.jsx)("td",{children:(0,r.jsx)(rn(),{href:l,children:l})})]}),t.description&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}),t.range&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Range"}),(0,r.jsx)("td",{children:t.range})]}),t.lang&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Lang"}),(0,r.jsx)("td",{children:t.lang})]}),t.rdf_type&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"RDF Type"}),(0,r.jsx)("td",{children:t.rdf_type})]})]})})},i,{children:(0,r.jsx)(Yt.Z,an({label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Re.Z,{variant:"body2",component:"span",fontWeight:t.label?500:"normal",children:[u," "]}),t.count&&(0,r.jsxs)(Re.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]})},o))}))};function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function jn(){var e=xn(["?p ?o"]);return jn=function(){return e},e}function gn(){var e=xn(["\n    VALUES ?s { ",' }\n    ?s ?p ?o .\n    FILTER(!isLiteral(?o) || langMatches(lang(?o), "en"))\n  ']);return gn=function(){return e},e}var wn=[{value:"table",label:"Show Table"}],On=function(e){var t,n,r,o=null!==(n=null===(t=e.subject)||void 0===t?void 0:t.map(ke))&&void 0!==n?n:[];return{primaryQuery:(0,we.X)(jn()).WHERE(gn(),o).LIMIT(null!==(r=e.limit)&&void 0!==r?r:20).build()}},Sn=function(e){e.mode,e.cell;var t=e.outputs,n=J(),o=_e(t[0]);return(0,r.jsx)(Ue,{result:o,prefixes:n})},Cn=n(47312),Zn=n(85945),Pn=n(18972);function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){An(e,t,n[t])}))}return e}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Tn(){var e=_n(["?s ?p ?o"]);return Tn=function(){return e},e}function Rn(){var e=_n(["VALUES "," { "," }"]);return Rn=function(){return e},e}function zn(){var e=_n(["VALUES "," { "," }"]);return zn=function(){return e},e}function Dn(){var e=_n(["VALUES "," { "," }"]);return Dn=function(){return e},e}function Mn(){var e=_n(["\n    "," "," ","\n  "]);return Mn=function(){return e},e}var Nn=[{value:"table",label:"Show Table"}],Ln=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},Fn=function(e){var t=e.outputs,n=e.mode,o=(e.settings,e.setData,J());if("table"===n){var i=_e(t[0]);return(0,r.jsx)(Ue,{result:i,prefixes:o})}return null},Un=n(72852);function Wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Bn(e,t,n[t])}))}return e}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||Qn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e){return function(e){if(Array.isArray(e))return Wn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){if(e){if("string"===typeof e)return Wn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wn(e,t):void 0}}var Vn=Fe()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),Jn=function(e){var t=e.title,n=e.x,o=e.y,i=e.z,l=e.layout,u=e.cumulative,a=void 0!==u&&u,c=e.normalized,s=void 0!==c&&c,f=e.height,d=void 0===f?400:f,v=n,p=o,m=i;if(s)if(m){var b={};T().zip(p,m).forEach((function(e){var t=Gn(e,2),n=t[0],r=t[1];b[r]=(b[r]||0)+n})),p=T().zip(p,m).map((function(e){var t=Gn(e,2),n=t[0],r=t[1];return n/b[r]}))}else{var h=o.reduce((function(e,t){return e+t}),0);p=o.map((function(e){return e/h}))}if(a&&!m){v.every((function(e){return!isNaN(Number(e))}))&&(v=v.map((function(e){return Number(e)})));var y=T().sortBy(v.map((function(e,t){return{v:e,i:t}})),"v");v=y.map((function(e){return e.v})),p=y.map((function(e){var t=e.i;return p[t]}));var x=0;p=p.map((function(e){return x+=e}))}var j=m?Hn(T().uniq(v).map((function(e){return{x:T().zip(v,m).filter((function(t){var n=Gn(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=Gn(e,2);t[0];return t[1]})),y:T().zip(v,p).filter((function(t){var n=Gn(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=Gn(e,2);t[0];return t[1]})),stackgroup:"one",name:"".concat(e)}}))):[{type:"bar",x:v,y:p}];return(0,r.jsx)(Vn,{data:j,style:{width:"100%"},layout:qn({autosize:!0,height:d,title:t},l)})};function Xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xn(e,t,n[t])}))}return e}var Kn=Fe()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),Yn=function(e){var t=e.title,n=e.values,o=e.layout,i=e.height,l=void 0===i?400:i;return(0,r.jsx)(Kn,{data:[{type:"pie",labels:n.map((function(e){return e.label})),values:n.map((function(e){return e.value}))}],style:{width:"100%"},layout:$n({autosize:!0,height:l,title:t},o)})},er=n(41733),tr=n(96540);function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){rr(e,t,n[t])}))}return e}function ir(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,u=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(a){u=!0,o=a}finally{try{l||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ur(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){if(e){if("string"===typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(e,t):void 0}}function cr(){var e=lr(["\n      VALUES ?p { "," } \n      ?s ?p ?o\n     "]);return cr=function(){return e},e}function sr(){var e=lr(["\n        VALUES "," { "," }\n        VALUES "," { "," }\n        ?s "," ","\n      "]);return sr=function(){return e},e}function fr(){var e=lr(["\n      VALUES ?tp { "," }\n      ?s ?tp ?tv\n    "]);return fr=function(){return e},e}function dr(){var e=lr(["(MIN(",") AS ?","_min)  (MAX(",") AS ?","_max)"]);return dr=function(){return e},e}function vr(){var e=lr(["\n      { "," }\n      BIND (((?","_max - ?","_min) / ",") AS ?","_step)\n    "]);return vr=function(){return e},e}function pr(){var e=lr(["(0.5 + xsd:integer(("," - ?","_min) / ?","_step)) * ?","_step + ?","_min"]);return pr=function(){return e},e}function mr(){var e=lr(["?g (COUNT(?g) as ?count) ",""]);return mr=function(){return e},e}function br(){var e=lr(["?count >= ",""]);return br=function(){return e},e}function hr(){var e=lr(["BIND (?o as ?g)"]);return hr=function(){return e},e}function yr(){var e=lr(["?count >= ",""]);return yr=function(){return e},e}function xr(){var e=lr(["(YEAR(xsd:dateTime(?tv)) * 12 + MONTH(xsd:dateTime(?tv)))"]);return xr=function(){return e},e}function jr(){var e=lr(["?s ?p ?o ?tv"]);return jr=function(){return e},e}function gr(){var e=lr(["?s ?p ?o"]);return gr=function(){return e},e}function wr(){var e=lr(["(COUNT(?s) AS ?complete_count)"]);return wr=function(){return e},e}function Or(){var e=lr(["(COUNT(?s) AS ?total_count)"]);return Or=function(){return e},e}function Sr(){var e=lr(["?s ?p ?o"]);return Sr=function(){return e},e}function Cr(){var e=lr(["("," AS ?total_count)"]);return Cr=function(){return e},e}function Zr(){var e=lr(["*"]);return Zr=function(){return e},e}function Pr(){var e=lr(["\n    { "," }\n    { "," }\n  "]);return Pr=function(){return e},e}var Er=101,Ar=[{value:"plot",label:"Show Plot"},{value:"table",label:"Show Table"},{value:"examples",label:"Show Examples"},{value:"completeness",label:"Completeness Analysis"}],kr=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},Ir=function(e){var t=e.outputs,n=e.mode,o=e.settings,i=e.setData,l=J();if("plot"===n){var u=t[0];if("execute_result"===u.output_type&&"application/sparql-results+json"in u.data){var a,c,s,f,d=JSON.parse(u.data["application/sparql-results+json"]),v=d.results.bindings.filter((function(e){return e.g})),p=v.map((function(e){return(0,Pe.lA)(e.g.value)})),m=v.map((function(e){var t;return(null===(t=e.count)||void 0===t?void 0:t.value)&&Number(e.count.value)||null})),b=(null!==(c=null===d||void 0===d||null===(a=d.head)||void 0===a?void 0:a.vars)&&void 0!==c?c:[]).includes("t")?v.map((function(e){var t;return(null===(t=e.t)||void 0===t?void 0:t.value)&&Number(e.t.value)||null})):void 0,h=o.normalized,y=o.cumulative;return(0,r.jsxs)(pe.ZP,{container:!0,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(We.Z,{control:(0,r.jsx)(Un.Z,{checked:null!==h&&void 0!==h&&h,value:null!==h&&void 0!==h&&h,onChange:function(e){return i({visualization_settings:{normalized:e.target.checked,cumulative:y}})}}),label:"Normalized"}),(0,r.jsx)(We.Z,{control:(0,r.jsx)(Un.Z,{checked:null!==y&&void 0!==y&&y,value:null!==y&&void 0!==y&&y,onChange:function(e){return i({visualization_settings:{normalized:h,cumulative:e.target.checked}})}}),label:"Cumulative"})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Jn,{x:p,y:m,z:b,normalized:null!==(s=o.normalized)&&void 0!==s&&s,cumulative:null!==(f=o.cumulative)&&void 0!==f&&f,layout:{xaxis:{title:"Value"},yaxis:{title:"Count"}}})})]})}}else{if("table"===n){var x=t[0]?_e(t[0]):null;return(0,r.jsx)(Ue,{result:x,prefixes:l})}if("examples"===n){var j=t[1]?_e(t[1]):null;return(0,r.jsx)(Ue,{result:j,prefixes:l})}if("completeness"===n){var g=t[2];if(g&&"execute_result"===g.output_type&&"application/sparql-results+json"in g.data){var w,O,S=JSON.parse(g.data["application/sparql-results+json"]),C=null!==(w=S.results.bindings.map((function(e){return parseInt(e.complete_count.value)}))[0])&&void 0!==w?w:0,Z=null!==(O=S.results.bindings.map((function(e){return parseInt(e.total_count.value)}))[0])&&void 0!==O?O:0;return(0,r.jsx)(Yn,{values:[{label:"Complete",value:C},{label:"Incomplete",value:Z-C}]})}}}return null},_r={code:function(e){var t=ce(),n=t.cell,o=t.outputs,i=t.setCell,u=n.source,a=p.useRef(null),c=J(),s=(0,p.useState)(!1),f=s[0],d=s[1],v=(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Wt,{value:u||"",onChange:function(e){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ht(e,t,n[t])}))}return e}({},n,{source:e}))},editorRef:a})}),m=p.useMemo((function(){return(null===o||void 0===o?void 0:o.length)?_e(o[0]):null}),[o]),b=(0,p.useMemo)((function(){return!!(null===o||void 0===o?void 0:o.length)&&(0,r.jsx)(l.Z,{sx:{width:"100%"},children:(0,r.jsx)(Ue,{result:m,prefixes:c})})}),[o,c]),h=V().report,y=(0,p.useMemo)((function(){var e,t,n=(null!==(t=null===(e=h.dataset)||void 0===e?void 0:e.namespaces)&&void 0!==t?t:[]).filter((function(e){return e.prefix})).map((function(e){return"PREFIX ".concat(e.prefix,": <").concat(e.name,">")})).join("\n");return{templatePrompt:"\n        ### Generate SPARQL query that should\n        ### {{prompt}}\n        ".concat(n,"\n        SELECT \n        ").replace(/^ +/gm,"").trim(),templateOutput:"\n        ### GPT output for: {{prompt}}\n        ".concat(n,"\n        SELECT {{output}}\n        ").replace(/^ +/gm,"").trim()}}),[h.dataset]),x=y.templatePrompt,j=y.templateOutput,g=(0,p.useMemo)((function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Lt.Z,{size:"small",color:"secondary",sx:{position:"absolute",right:4,top:4},onClick:function(){return d(!0)},children:(0,r.jsx)(qt.Z,{})}),(0,r.jsx)(Qt,{open:f,templatePrompt:x,templateOutput:j,onClose:function(e){var t;(d(!1),e&&e.output)&&(null===(t=a.current)||void 0===t||t.setValue(e.output.trim()))}})]})}),[f]);return(0,r.jsxs)(r.Fragment,{children:[v,g,b]})},widget_valuedistribution:function(e){var t=V().report,n=ce(),o=n.cell,i=n.cellRef,l=n.outputs,u=n.setCell,a=o.data,c=o.source,s=ir(p.useState(!1),2),d=s[0],v=s[1];(0,p.useEffect)((function(){var e,n,r,i=function(e,t){var n,r,o,i,l,u=(null!==(r=e.group_predicate)&&void 0!==r?r:[]).map(kr),a=function(e){return e.WHERE(cr(),u)},c=function(t){var n;return(null!==(n=e.filters)&&void 0!==n?n:[]).forEach((function(e,n){var r,o,i,l,u=null!==(i=null===(r=e.predicate)||void 0===r?void 0:r.map(kr))&&void 0!==i?i:[],a=null!==(l=null===(o=e.object)||void 0===o?void 0:o.map(kr))&&void 0!==l?l:[],c=(0,ge.variable)("p".concat(n)),s=(0,ge.variable)("o".concat(n));t=t.WHERE(sr(),c,u,s,a,c,s)})),t},s=function(t){var n,r=(null!==(n=e.temporal_predicate)&&void 0!==n?n:[]).map(kr);return t.WHERE(fr(),r)},f=function(t,n,r,o){var i=c(a((0,we.X)(dr(),n,r,n,r)));return e.temporal_predicate&&(i=s(i)),t.WHERE(vr(),i,r,r,o,r)},d=function(e,t){return(0,Oe.j)(pr(),e,t,t,t,t)},v=e.group_count===Er?1e3:null!==(o=e.group_count)&&void 0!==o?o:20,p=(0,we.X)(mr(),e.temporal_predicate?"((?tu / 12) as ?t)":null).ORDER().BY((0,ge.variable)("count"),!0).LIMIT(v);if(p=a(p),p=c(p),e.continuous&&(p=f(p,"?o","o",v)),p=e.continuous?p.GROUP().BY(d((0,ge.variable)("o"),"o")).AS("g").HAVING(br(),null!==(i=e.min_group_size)&&void 0!==i?i:1):p.WHERE(hr()).GROUP().BY("g").HAVING(yr(),null!==(l=e.min_group_size)&&void 0!==l?l:1),e.temporal_predicate){var m,b=(0,Oe.j)(xr());p=(p=f(p=s(p),b,"t",null!==(m=e.temporal_group_count)&&void 0!==m?m:20)).GROUP().BY(d(b,"t")).AS("tu")}p=p.build();var h=e.temporal_predicate?(0,we.X)(jr()):(0,we.X)(gr());h=a(h),h=c(h),e.temporal_predicate&&(h=s(h)),h=(h=h.LIMIT(100)).build();var y=c(a((0,we.X)(wr()))),x=(null===(n=e.filters)||void 0===n?void 0:n.length)>0?c((0,we.X)(Or()).WHERE(Sr())):(0,we.X)(Cr(),t);return{primaryQuery:p,exampleQuery:h,completenessQuery:(0,we.X)(Zr()).WHERE(Pr(),y,x).build()}}(a,null!==(r=null===t||void 0===t||null===(e=t.dataset)||void 0===e||null===(n=e.statistics)||void 0===n?void 0:n.triple_count)&&void 0!==r?r:0),l=i.primaryQuery,c=i.exampleQuery,s=i.completenessQuery;u(or({},o,{source:[l,c,s]}))}),[a]);var m,b,h,y,x,j,g,w,O,S=(0,p.useCallback)((function(e){var t=i.current;u(or({},t,{data:or({},t.data,e)}))}),[]),C=(0,p.useCallback)((function(){var e=i.current.data;S({filters:ur(e.filters||[]).concat([{}])})}),[]),Z=(0,p.useCallback)((function(e,t){var n=i.current.data;S({filters:ur(n.filters.slice(0,e)).concat([or({},n.filters[e],t)],ur(n.filters.slice(e+1)))})}),[]),P=(0,p.useCallback)((function(e){var t=i.current.data;S({filters:ur(t.filters.slice(0,e)).concat(ur(t.filters.slice(e+1)))})}),[]),E=(0,p.useMemo)((function(){var e,n,o;return(null!==(e=null===a||void 0===a?void 0:a.filters)&&void 0!==e?e:[]).map((function(e,i){var l,u;return(0,r.jsxs)(pe.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsx)(pn,{datasetId:null===t||void 0===t||null===(l=t.dataset)||void 0===l?void 0:l.id,pos:"PREDICATE",label:"Filter values of",value:null!==(n=e.predicate)&&void 0!==n?n:[],onChange:function(e){return Z(i,{predicate:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(pn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(u=t.dataset)||void 0===u?void 0:u.id,pos:"OBJECT",label:"Matching values",value:null!==(o=e.object)&&void 0!==o?o:[],onChange:function(e){return Z(i,{object:e})}}),(0,r.jsx)(be.Z,{"aria-label":"delete",onClick:function(){return P(i)},children:(0,r.jsx)(er.Z,{})})]})})]},i)}))}),[a.filters]),A=(0,p.useMemo)((function(){var e,n;return"number"===typeof(null===(e=a.temporal_predicate)||void 0===e?void 0:e.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(pn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.id,pos:"PREDICATE",label:"Temporally group by",value:null!==(m=a.temporal_predicate)&&void 0!==m?m:[],onChange:function(e){return S({temporal_predicate:e})}}),(0,r.jsx)(be.Z,{"aria-label":"delete",onClick:function(){return S({temporal_predicate:null})},children:(0,r.jsx)(er.Z,{})})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Limit number of timestamps",value:null!==(b=null===a||void 0===a?void 0:a.temporal_group_count)&&void 0!==b?b:20,valueLabelFormat:function(e){return e!==Er?e.toString():"Unlimited"},onChange:function(e,t){return S({temporal_group_count:t})},min:1,max:Er,step:1})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(Mt.Z,{variant:"text",startIcon:(0,r.jsx)(tr.Z,{}),onClick:function(){return S({temporal_predicate:[]})},children:" Add temporal grouping"})})]})}),[a.temporal_predicate,a.temporal_group_count]),k=(0,p.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Value Distribution Query Builder",subheader:"Plots distribution of values for a given predicate and a filter",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return v(!0)},children:(0,r.jsx)(et.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(zt.Z,{label:"For Subject",value:"Any",variant:"filled",disabled:!0})}),(0,r.jsx)(pe.ZP,{item:!0,xs:8,children:(0,r.jsx)(pn,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"PREDICATE",label:"Group values of",value:null!==(h=null===a||void 0===a?void 0:a.group_predicate)&&void 0!==h?h:[],onChange:function(e){return S({group_predicate:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(xe.Z,{children:(0,r.jsx)(We.Z,{control:(0,r.jsx)(Be.Z,{value:null!==(y=null===a||void 0===a?void 0:a.continuous)&&void 0!==y&&y,checked:null!==(x=null===a||void 0===a?void 0:a.continuous)&&void 0!==x&&x,onChange:function(e){return S({continuous:e.target.checked})}}),label:"Continuous"})})}),E,(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(Mt.Z,{variant:"text",startIcon:(0,r.jsx)(tr.Z,{}),onClick:C,children:" Add filter"})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Limit number of groups",value:null!==(j=null===a||void 0===a?void 0:a.group_count)&&void 0!==j?j:20,valueLabelFormat:function(e){return e!==Er?e.toString():"Unlimited"},onChange:function(e,t){return S({group_count:t})},min:1,max:Er,step:1})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Min group size",value:null!==(g=null===a||void 0===a?void 0:a.min_group_size)&&void 0!==g?g:2,onChange:function(e,t){return S({min_group_size:t})},min:1,max:20,step:1})})}),A]})})}),[a]),I=(0,p.useMemo)((function(){return!!(null===l||void 0===l?void 0:l.length)&&(0,r.jsx)(lt,{value:null!==(w=a.output_mode)&&void 0!==w?w:"plot",tabs:Ar,onChange:function(e,t){return S({output_mode:t})},renderTab:function(e){return(0,r.jsx)(Ir,{mode:e,outputs:l,settings:null!==(O=a.visualization_settings)&&void 0!==O?O:{},setData:S})}})}),[a.output_mode,l,a.visualization_settings]);return(0,r.jsxs)(r.Fragment,{children:[k,I,(0,r.jsx)(Ne,{source:{"Main Query":c[0],"Example Query":c[1],"Completeness Query":c[2]},open:d,onClose:function(){return v(!1)}})]})},widget_triplematch:function(e){var t=V().report,n=ce(),o=n.cell,i=n.cellRef,l=n.outputs,u=n.setCell,a=o.data,c=o.source,s=In(p.useState(!1),2),d=s[0],v=s[1];(0,p.useEffect)((function(){var e=function(e){var t,n,r,o,i,l=(0,we.X)(Tn()),u=null!==(o=e.target)&&void 0!==o?o:"SUBJECT",a=(0,ge.variable)("s"),c=(0,ge.variable)("p"),s=(0,ge.variable)("o");if("SUBJECT"!==u&&(null===(t=e.subject)||void 0===t?void 0:t.length)){var f,d,v=null!==(d=null===(f=e.subject)||void 0===f?void 0:f.map(Ln))&&void 0!==d?d:[];l=l.WHERE(Rn(),a,v)}if("PREDICATE"!==u&&(null===(n=e.predicate)||void 0===n?void 0:n.length)){var p,m,b=null!==(m=null===(p=e.predicate)||void 0===p?void 0:p.map(Ln))&&void 0!==m?m:[];l=l.WHERE(zn(),c,b)}if("OBJECT"!==u&&(null===(r=e.object)||void 0===r?void 0:r.length)){var h,y,x=null!==(y=null===(h=e.object)||void 0===h?void 0:h.map(Ln))&&void 0!==y?y:[];l=l.WHERE(Dn(),s,x)}return{primaryQuery:(l=l.WHERE(Mn(),a,c,s).LIMIT(null!==(i=e.limit)&&void 0!==i?i:100)).build()}}(a).primaryQuery;u(kn({},o,{source:[e]}))}),[a]);var m,b,h,y,x,j,g,w=(0,p.useCallback)((function(e){var t=i.current;u(kn({},t,{data:kn({},t.data,e)}))}),[]),O=null!==(m=a.target)&&void 0!==m?m:"SUBJECT",S=(0,p.useMemo)((function(){var e,n,o;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Triple Match Builder",subheader:"Displays all matching triples given a set of filters",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return v(!0)},children:(0,r.jsx)(et.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsxs)(he.Z,{fullWidth:!0,children:[(0,r.jsx)(Cn.Z,{children:"I need a"}),(0,r.jsxs)(Zn.Z,{value:O,label:"Term Type",onChange:function(e){return w({target:e.target.value})},children:[(0,r.jsx)(Pn.Z,{value:"SUBJECT",children:"Subject"}),(0,r.jsx)(Pn.Z,{value:"PREDICATE",children:"Predicate"}),(0,r.jsx)(Pn.Z,{value:"OBJECT",children:"Object"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Re.Z,{children:"That matches"})}),(0,r.jsxs)(pe.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:"SUBJECT"===O?(0,r.jsx)(zt.Z,{label:"For Subject",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(pn,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"SUBJECT",label:"Subject must match",value:null!==(b=a.subject)&&void 0!==b?b:[],onChange:function(e){return w({subject:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:"PREDICATE"===O?(0,r.jsx)(zt.Z,{label:"For Predicate",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(pn,{datasetId:null===t||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.id,pos:"PREDICATE",label:"Predicate must match",value:null!==(h=a.predicate)&&void 0!==h?h:[],onChange:function(e){return w({predicate:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:(0,r.jsx)(f.Z,{direction:"row",spacing:2,children:"OBJECT"===O?(0,r.jsx)(zt.Z,{label:"For Object",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(pn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(o=t.dataset)||void 0===o?void 0:o.id,pos:"OBJECT",label:"Object must match",value:null!==(y=a.object)&&void 0!==y?y:[],onChange:function(e){return w({object:e})}})})})]}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Limit results",value:null!==(x=null===a||void 0===a?void 0:a.limit)&&void 0!==x?x:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return w({limit:t})},min:100,max:1e3,step:100})})})]})})}),[a]),C=(0,p.useMemo)((function(){return!!(null===l||void 0===l?void 0:l.length)&&(0,r.jsx)(lt,{value:null!==(j=a.output_mode)&&void 0!==j?j:"table",tabs:Nn,onChange:function(e,t){return w({output_mode:t})},renderTab:function(e){return(0,r.jsx)(Fn,{mode:e,outputs:l,settings:null!==(g=a.visualization_settings)&&void 0!==g?g:{},setData:w})}})}),[a.output_mode,l,a.visualization_settings]);return(0,r.jsxs)(r.Fragment,{children:[S,C,(0,r.jsx)(Ne,{source:{"Main Query":c[0]},open:d,onClose:function(){return v(!1)}})]})},widget_classtree:function(e){var t,n,o,i,l,u,a,c=ce().cell,s=c.data,f=c.source,d=pt(p.useState(!1),2),v=d[0],m=d[1],b=Ze(It).setData;(0,p.useEffect)((function(){b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){vt(e,t,n[t])}))}return e}({withCounts:!0,withSubs:!0,withEquivs:!0,withKeys:!0,withProps:!0,owlClasses:!0,rdfClasses:!0,anyClass:!1},s))}),[]);var h=(0,p.useMemo)((function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Class Tree Widget",subheader:"Displays a two level class hierarchy of the dataset",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return m(!0)},children:(0,r.jsx)(et.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:6,children:(0,r.jsxs)(he.Z,{sx:{m:3},component:"fieldset",variant:"standard",children:[(0,r.jsx)(ye.Z,{component:"legend",children:"General Settings"}),(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(Qe,{value:null===(t=s.withCounts)||void 0===t||t,onChange:function(e){return b({withCounts:e.target.checked})},label:"With Counts"}),(0,r.jsx)(Qe,{value:null===(n=s.withSubs)||void 0===n||n,onChange:function(e){return b({withSubs:e.target.checked})},label:"With Subclasses"}),(0,r.jsx)(Qe,{value:null===(o=s.withEquivs)||void 0===o||o,onChange:function(e){return b({withEquivs:e.target.checked})},label:"With Equivalent Classes"}),(0,r.jsx)(Qe,{value:null===(i=s.withKeys)||void 0===i||i,onChange:function(e){return b({withKeys:e.target.checked})},label:"With Keys"}),(0,r.jsx)(Qe,{value:s.withProps,onChange:function(e){return b({withProps:e.target.checked})},label:"With Properties"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:6,children:(0,r.jsxs)(he.Z,{sx:{m:3},component:"fieldset",variant:"standard",children:[(0,r.jsx)(ye.Z,{component:"legend",children:"Class Type"}),(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(Qe,{value:null===(l=s.owlClasses)||void 0===l||l,onChange:function(e){return b({owlClasses:e.target.checked})},label:"Use OWL Classes"}),(0,r.jsx)(Qe,{value:null===(u=s.rdfClasses)||void 0===u||u,onChange:function(e){return b({rdfClasses:e.target.checked})},label:"Use RDF Classes"}),(0,r.jsx)(Qe,{value:s.anyClass,onChange:function(e){return b({anyClass:e.target.checked})},label:"Use Any Classes"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Limit results",value:null!==(a=null===s||void 0===s?void 0:s.limit)&&void 0!==a?a:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return b({limit:t})},min:100,max:1e3,step:100})})})]})})}),[s,s.owlClasses]);return(0,r.jsxs)(r.Fragment,{children:[h,(0,r.jsx)(ut,{mode:s.output_mode,options:kt,renderResult:_t,onChange:function(e){return b({output_mode:e})}}),(0,r.jsx)(Ne,{source:{"Main Query":f[0]},open:v,onClose:function(){return m(!1)}})]})},widget_propertiespreview:function(e){var t,n,o=V().report,i=ce().cell,l=i.data,u=i.source,a=yn(p.useState(!1),2),c=a[0],s=a[1],f=Ze(On).setData,d=(0,p.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Property Preview Widget",subheader:"Displays all properties for a given object",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return s(!0)},children:(0,r.jsx)(et.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(pn,{datasetId:null===o||void 0===o||null===(e=o.dataset)||void 0===e?void 0:e.id,pos:"SUBJECT",label:"Subject must match",value:null!==(t=l.subject)&&void 0!==t?t:[],onChange:function(e){return f({subject:e})}})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(Ye,{label:"Limit results",value:null!==(n=null===l||void 0===l?void 0:l.limit)&&void 0!==n?n:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return f({limit:t})},min:100,max:1e3,step:100})})})]})})}),[l]);return(0,r.jsxs)(r.Fragment,{children:[d,(0,r.jsx)(ut,{mode:l.output_mode,options:wn,renderResult:Sn,onChange:function(e){return f({output_mode:e})}}),(0,r.jsx)(Ne,{source:{"Main Query":u[0]},open:c,onClose:function(){return s(!1)}})]})}},Tr=function(e){var t=(0,fe.Z)(),n=j().focus,o=ce(),i=o.cell,u=o.state,a=o.runCell,c=n===i.metadata.id,s=_r[i.cell_type],d=(0,p.useMemo)((function(){var e="RUNNING"===(null===u||void 0===u?void 0:u.status)||"QUEUED"===(null===u||void 0===u?void 0:u.status),t=e?"primary":"FINISHED"===(null===u||void 0===u?void 0:u.status)?"success":"ERROR"===(null===u||void 0===u?void 0:u.status)?"error":"primary";return(0,r.jsx)(se.Z,{loading:e,variant:"text",onClick:a,color:t,loadingIndicator:(0,r.jsx)(de.Z,{color:"primary",size:16}),children:(0,r.jsx)(ve.Z,{})})}),[u]);return(0,r.jsxs)(l.Z,{py:2,sx:{display:"flex",borderColor:c?t.palette.grey[300]:"transparent",borderStyle:"solid",borderRadius:"8px",position:"relative"},children:[(0,r.jsx)(l.Z,{children:d}),(0,r.jsx)(f.Z,{spacing:2,sx:{flex:1},children:(0,r.jsx)(s,{})})]})},Rr=n(88078);function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zr(e,t,n[t])}))}return e}var Mr=function(e){var t,n=te(),o=n.notebook,i=n.notebookRef,l=n.setNotebook,u=n.isSaving,a=n.changed,c=(0,p.useCallback)((function(e){var t;l(Dr({},i.current,{metadata:Dr({},null===(t=i.current)||void 0===t?void 0:t.metadata,{name:e})}))}),[i]);return(0,p.useMemo)((function(){var e;return(0,r.jsx)(me.Z,{title:null===o?(0,r.jsx)(Rr.Z,{variant:"text"}):(0,r.jsx)(Je.Z,{fullWidth:!0,value:null===o||void 0===o||null===(e=o.metadata)||void 0===e?void 0:e.name,onChange:function(e){return c(e.target.value)}}),subheader:null===o?(0,r.jsx)(Rr.Z,{variant:"text"}):u?"Saving...":a?"Changed":"Draft saved"})}),[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.name,u,a])},Nr=n(72428),Lr=n(25883),Fr=n(41899),Ur=n(59622),Wr=n(95175);function Br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=function(e){var t,n,o,i=j(),u=i.focus,a=i.focusRef,s=i.setFocus,f=te(),d=f.notebook,v=f.notebookRef,b=f.setNotebook,h=le().runCells,y=(0,g.Z)().sendNotification,x=u?d.content.cells[u]:null,w=null!==(n=null===x||void 0===x?void 0:x.cell_type)&&void 0!==n?n:"code",O=null!==(o=null===x||void 0===x||null===(t=x.metadata)||void 0===t?void 0:t.timeout)&&void 0!==o?o:5e3;(0,p.useEffect)((function(){!u&&v.current&&v.current.content.cell_order.length>0&&s(v.current.content.cell_order[0])}),[null===u]);var S=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=v.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1,i=(0,m.kE)("code");b((0,m.gg)(v.current,i,o)),y({variant:"success",message:"Cell added"})}),[]),C=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=v.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1;b((0,m.rZ)(v.current,a.current)),y({variant:"success",message:"Cell #".concat(o+1," deleted")})}),[]),Z=(0,p.useCallback)((function(e){var t,n,r,o,i=null!==(o=null===(t=v.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(e){return e===a.current})))&&void 0!==o?o:-1,l=v.current.content.cells[a.current],u=(0,m.kE)(e,l.metadata);b((0,m.VC)(v.current,a.current,u)),y({variant:"success",message:"Cell #".concat(i+1," type changed to ").concat(e)})}),[]),P=(0,p.useCallback)((function(e){b((0,m.wN)(v.current,a.current,{timeout:e}))}),[]),E=(0,p.useCallback)((function(){h([a.current])}),[]),A=(0,p.useCallback)((function(){h(v.current.content.cell_order)}),[]);return(0,p.useMemo)((function(){return(0,r.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderLeftWidth:"0px",borderRightWidth:"0px",borderRadius:1,bgcolor:"background.paper",color:"text.secondary",pl:2},children:[(0,r.jsx)(be.Z,{"aria-label":"add",size:"large",onClick:S,children:(0,r.jsx)(Nr.Z,{fontSize:"inherit"})}),(0,r.jsx)(be.Z,{"aria-label":"delete",size:"large",onClick:C,children:(0,r.jsx)(er.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(be.Z,{"aria-label":"cut",size:"large",children:(0,r.jsx)(Lr.Z,{fontSize:"inherit"})}),(0,r.jsx)(be.Z,{"aria-label":"copy",size:"large",children:(0,r.jsx)(Fr.Z,{fontSize:"inherit"})}),(0,r.jsx)(be.Z,{"aria-label":"paste",size:"large",children:(0,r.jsx)(Ur.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(be.Z,{"aria-label":"run",size:"large",onClick:E,children:(0,r.jsx)(ve.Z,{fontSize:"inherit"})}),(0,r.jsx)(be.Z,{"aria-label":"runAll",size:"large",onClick:A,children:(0,r.jsx)(Wr.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsxs)(he.Z,{variant:"filled",sx:{minWidth:120},children:[(0,r.jsx)(Cn.Z,{children:"Cell Type"}),(0,r.jsxs)(Zn.Z,{displayEmpty:!0,sx:{border:"none"},value:w,onChange:function(e){return Z(e.target.value)},children:[(0,r.jsx)(Pn.Z,{value:"code",children:"Code"}),(0,r.jsx)(Pn.Z,{value:"markdown",children:"Markdown"}),(0,r.jsx)(Pn.Z,{value:"widget_valuedistribution",children:"Histogram Widget"}),(0,r.jsx)(Pn.Z,{value:"widget_triplematch",children:"Triple Match Widget"}),(0,r.jsx)(Pn.Z,{value:"widget_classtree",children:"Class Tree Widget"}),(0,r.jsx)(Pn.Z,{value:"widget_propertiespreview",children:"Properties Preview Widget"})]})]}),(0,r.jsx)($t.Z,{sx:{minWidth:140},getOptionLabel:function(e){return e.toString()},renderInput:function(e){return(0,r.jsx)(zt.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Br(e,t,n[t])}))}return e}({},e,{variant:"filled",label:"Timeout (s)",placeholder:"Timeout (s)"}))},options:[5,60,180,600],disableClearable:!0,value:O/1e3,onChange:function(e,t){return t&&P(1e3*t)}})]})}),[u,w,O])},Gr=function(e){var t,n=te().notebook,o=null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.cell_order.map((function(e){return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(ae,{cellId:e,children:(0,r.jsx)(Tr,{})}),(0,r.jsx)(c.Z,{})]},e)}));return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.Z,{sx:{position:"sticky",zIndex:10,left:0,right:0,top:0},children:(0,r.jsxs)(s.Z,{elevation:15,children:[(0,r.jsx)(Mr,{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(qr,{})]})}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(d.Z,{children:o})]})},Hr=function(){var e=(0,u.useRouter)().query.rid;return console.log(e),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"BOLD Profiler"})}),(0,r.jsx)(l.Z,{component:"main",children:e&&(0,r.jsx)(Q,{reportId:e,children:(0,r.jsx)(A,{reportId:e,children:(0,r.jsx)(ee,{children:(0,r.jsx)(x,{children:(0,r.jsx)(ie,{children:(0,r.jsx)(Gr,{})})})})})})})]})};Hr.getLayout=function(e){return(0,r.jsx)(a.A,{showNavbar:!1,children:e})};var Qr=Hr},68699:function(e,t,n){"use strict";n.d(t,{VC:function(){return s},dr:function(){return d},gg:function(){return p},kE:function(){return c},lU:function(){return f},lw:function(){return a},rZ:function(){return m},wN:function(){return v}});var r=n(25934);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function u(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=function(e){return{metadata:{name:e},content:{cells:{},cell_order:[]},results:{outputs:{},states:{}}}},c=function(e,t){return t=null!==t&&void 0!==t?t:{id:(0,r.Z)()},"code"===e?{cell_type:"code",metadata:t,source:"SELECT * \n{ ?s ?p ?o } \nLIMIT 10"}:"markdown"===e?{cell_type:"markdown",metadata:t,source:["# Markdown cell"]}:e.startsWith("widget_")?{cell_type:e,metadata:t,source:[],data:{}}:void 0},s=function(e,t,n){return l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},t,n))})})},f=function(e,t,n){return l({},e,{results:l({},e.results,{outputs:l({},e.results.outputs,i({},t,n))})})},d=function(e,t,n){return l({},e,{results:l({},e.results,{states:l({},e.results.states,i({},t,l({},e.results.states[t],n)))})})},v=function(e,t,n){return l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},t,l({},e.content.cells[t],{metadata:l({},e.content.cells[t].metadata,n)})))})})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.metadata.id,o=u(e.content.cell_order);return-1===n?o.push(r):o.splice(n+1,0,r),l({},e,{content:l({},e.content,{cells:l({},e.content.cells,i({},r,t)),cell_order:o}),results:{outputs:l({},e.results.outputs,i({},r,[])),states:l({},e.results.states,i({},r,{status:"INITIAL"}))}})},m=function(e,t){var n=u(e.content.cell_order),r=n.indexOf(t);-1!==r&&n.splice(r,1);var o=l({},e.content.cells);return delete o[t],l({},e,{content:l({},e.content,{cells:o,cell_order:n})})}}},function(e){e.O(0,[502,811,25,13,519,774,888,179],(function(){return t=22904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);