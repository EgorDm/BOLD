(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{22904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report/[rid]",function(){return n(19480)}])},3430:function(e,t,n){"use strict";n.d(t,{F:function(){return a}});var r=n(85893),o=n(99964),i=n(66242),u=n(78445),l=n(44267),a=(n(67294),function(e){var t=e.open,n=e.onClose,a=e.title,c=e.header,s=e.children;return(0,r.jsx)(o.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,r.jsxs)(i.Z,{sx:{width:600,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxHeight:"100%",display:"flex",flexDirection:"column"},children:[c||(0,r.jsx)(u.Z,{title:a}),(0,r.jsx)(l.Z,{sx:{overflow:"auto",flex:1},children:s})]})})})},76992:function(e,t,n){"use strict";n.d(t,{A:function(){return G}});var r=n(85893),o=n(67294),i=n(99226),u=n(90948),l=n(45697),a=n.n(l),c=n(95934),s=n(42293),f=n(10155),d=n(93946),p=n(34386),v=n(326),m=n(42761);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=(0,c.Z)(s.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.background.paper,boxShadow:t.shadows[3]}})),g=function(e){var t=e.onSidebarOpen,n=y(e,["onSidebarOpen"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(x,h({sx:{left:{lg:280},width:{lg:"calc(100% - 280px)"}}},n,{children:(0,r.jsxs)(f.Z,{disableGutters:!0,sx:{minHeight:64,left:0,px:2},children:[(0,r.jsx)(d.Z,{onClick:t,sx:{display:{xs:"inline-flex",lg:"none"}},children:(0,r.jsx)(v.Z,{fontSize:"small"})}),(0,r.jsx)(p.Z,{title:"Search",children:(0,r.jsx)(d.Z,{sx:{ml:1},children:(0,r.jsx)(m.Z,{fontSize:"small"})})}),(0,r.jsx)(i.Z,{sx:{flexGrow:1}})]})}))})};g.propTypes={onSidebarOpen:a().func};var j=n(11163),O=n(98396),w=n(67720),S=n(58826),Z=n(41071),C=n(31523),P=n(85938),k=n(6914),E=n(26447),A=n(15861),I=n(79369),_=function(e){return(0,r.jsxs)(E.Z,{direction:"row",children:[(0,r.jsx)(A.Z,{variant:"h3",fontWeight:"bold",children:"BOLD"}),(0,r.jsx)(I.Z,{sx:{transform:"rotate(90deg)",fontSize:44,marginTop:.25,marginLeft:-1.1,marginRight:-1.5}})]})},T=n(41664),R=n.n(T),z=n(97212),N=n(83321);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var F=function(e){var t=e.href,n=e.icon,o=e.title,u=M(e,["href","icon","title"]),l=(0,j.useRouter)(),a=!!t&&l.pathname===t;return(0,r.jsx)(z.ZP,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}({disableGutters:!0,sx:{display:"flex",mb:.5,py:0,px:2}},u,{children:(0,r.jsx)(R(),{href:t,passHref:!0,children:(0,r.jsx)(N.Z,{component:"a",startIcon:n,disableRipple:!0,sx:{backgroundColor:a&&"rgba(255,255,255, 0.08)",borderRadius:1,color:a?"secondary.main":"neutral.300",fontWeight:a&&"fontWeightBold",justifyContent:"flex-start",px:3,textAlign:"left",textTransform:"none",width:"100%","& .MuiButton-startIcon":{color:a?"secondary.main":"neutral.400"},"&:hover":{backgroundColor:"rgba(255,255,255, 0.08)"}},children:(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:o})})})}))};F.propTypes={href:a().string,icon:a().node,title:a().string};var L=n(81261),U=[{href:"/",icon:(0,r.jsx)(Z.Z,{fontSize:"small"}),title:"Datasets"},{href:"/reports",icon:(0,r.jsx)(C.Z,{fontSize:"small"}),title:"Reports"},{href:"/tasks",icon:(0,r.jsx)(P.Z,{fontSize:"small"}),title:"Tasks"},{href:"/lodc",icon:(0,r.jsx)(k.Z,{fontSize:"small"}),title:"LODC"},{href:"/triplydb",icon:(0,r.jsx)(L.Z,{fontSize:"small"}),title:"TriplyDB"}],W=function(e){var t=e.open,n=e.onClose,u=(0,j.useRouter)(),l=(0,O.Z)((function(e){return e.breakpoints.up("lg")}),{defaultMatches:!0,noSsr:!1});(0,o.useEffect)((function(){u.isReady&&t&&(null===n||void 0===n||n())}),[u.asPath]);var a=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(i.Z,{sx:{mt:3,px:2,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(i.Z,{sx:{backgroundColor:"rgba(255, 255, 255, 0.04)",cursor:"pointer",px:3,py:"11px",borderRadius:1},children:(0,r.jsx)(_,{})})})}),(0,r.jsx)(w.Z,{sx:{borderColor:"#2D3748",my:3}}),(0,r.jsx)(i.Z,{sx:{flexGrow:1},children:U.map((function(e){return(0,r.jsx)(F,{icon:e.icon,href:e.href,title:e.title},e.title)}))})]})});return l?(0,r.jsx)(S.ZP,{anchor:"left",open:!0,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},variant:"permanent",children:a}):(0,r.jsx)(S.ZP,{anchor:"left",onClose:n,open:t,PaperProps:{sx:{backgroundColor:"neutral.900",color:"#FFFFFF",width:280}},sx:{zIndex:function(e){return e.zIndex.appBar+100}},variant:"temporary",children:a})};W.propTypes={onClose:a().func,open:a().bool};var B=(0,u.ZP)("div")((function(e){var t,n,r,o=e.theme;return t={display:"flex",flex:"1 1 auto",maxWidth:"100%"},n=o.breakpoints.up("lg"),r={paddingLeft:280},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t})),G=function(e){var t=e.children,n=e.showSidebar,u=void 0===n||n,l=e.showNavbar,a=void 0===l||l,c=(0,o.useState)(u),s=c[0],f=c[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{sx:{paddingTop:a?"64px":0},children:(0,r.jsx)(i.Z,{sx:{display:"flex",flex:"1 1 auto",flexDirection:"column",width:"100%"},children:t})}),a&&(0,r.jsx)(g,{onSidebarOpen:function(){return f(!0)}}),(0,r.jsx)(W,{onClose:function(){return f(!1)},open:s})]})}},87177:function(e,t,n){"use strict";var r=n(73400),o=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=u(o.useState({message:void 0,variant:"default"}),2),t=e[0],n=e[1],i=(0,r.Ds)().enqueueSnackbar;return o.useEffect((function(){if(null===t||void 0===t?void 0:t.message){var e="info";t.variant&&(e=t.variant),i(t.message,{variant:e,autoHideDuration:5e3})}}),[t]),{notification:t,sendNotification:n}}},19480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Rn}});var r=n(85893),o=n(9008),i=n.n(o),u=n(99226),l=n(11163),a=n(76992),c=n(67720),s=n(55113),f=n(26447),d=n(44267),p=n(18377),v=n(67294),m=n(68699);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=v.createContext(null),x=function(e){var t=h(v.useState(null),2),n=t[0],o=t[1],i=v.useRef(null),u=(0,v.useCallback)((function(e){o(e),i.current=e}),[]),l=(0,v.useMemo)((function(){return{focus:n,focusRef:i,setFocus:u}}),[n]);return(0,r.jsx)(y.Provider,{value:l,children:e.children})},g=function(){var e=v.useContext(y);if(null===e)throw new Error("useContext must be used within a Provider");return e},j=n(87177),O=n(66754);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=(0,O.E)(),C=Z.useContext,P=Z.useEvent,k=Z.Provider,E=function(e){var t=e.reportId,n=e.children,o=(0,j.Z)().sendNotification,i=S(v.useState({}),2),u=i[0],l=i[1],a=(0,v.useCallback)((function(){o({variant:"success",message:"Connected to notebook"})}),[]),c=(0,v.useCallback)((function(){o({variant:"error",message:"Disconnected from notebook"})}),[]);return(0,r.jsx)(k,{endpoint:"".concat("ws://localhost:8000","/ws/notebook/").concat(t,"/"),state:u,setState:l,onSocketOpen:a,onSocketClose:c,children:n})},A=C,I=P,_=n(96486),T=n.n(_),R=n(34051),z=n.n(R),N=n(88767);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}({},Object.fromEntries(e.map((function(e){return[e.prefix,e.name]}))))},F=n(62400);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){U(i,r,o,u,l,"next",e)}function l(e){U(i,r,o,u,l,"throw",e)}u(void 0)}))}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Q=v.createContext(null),H=function(e){var t=(0,j.Z)().sendNotification,n=e.reportId,o=e.children,i=q(v.useState(null),2),u=i[0],l=i[1],a=v.useRef(null),c=(0,v.useCallback)((function(e){l(e),a.current=e}),[]),s=(0,N.useQuery)(["report",n],W(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.x1.get("/reports/".concat(n,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Fetched report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to fetch report"})}}),f=s.refetch,d=s.isFetching,p=(0,N.useMutation)(W(z().mark((function e(){var t;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.x1.put("/reports/".concat(n,"/"),G({},a.current));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Saved report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to save notebook"})}}),m=p.mutate,b=p.isLoading,h=(0,v.useCallback)((function(e){t({variant:"info",message:"Saving report"}),c(e),m()}),[]),y=(0,v.useMemo)((function(){return{report:u,reportRef:a,setReport:c,save:h,isSaving:b,refetch:f,isFetching:d}}),[u,b,d]);return(0,r.jsx)(Q.Provider,{value:y,children:o})},V=function(){var e=v.useContext(Q);if(null===e)throw new Error("useContext must be used within a Provider");return e},X=function(){var e,t=V().report;return v.useMemo((function(){var e;return M(null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces)}),[null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces])};function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var K=v.createContext(null),ee=function(e){var t,n=e.children,o=Y(v.useState(!1),2),i=o[0],u=o[1],l=Y(v.useState(null),2),a=l[0],c=l[1],s=(0,v.useRef)(null),f=(0,j.Z)().sendNotification,d=(0,v.useCallback)((function(e){c(e),s.current=e}),[]),p=(0,v.useCallback)((function(e){d((0,m.VC)(s.current,e.metadata.id,e))}),[]),b=V(),h=b.report,y=b.reportRef,x=b.isSaving,g=b.isFetching,O=b.save,w=(0,v.useCallback)((function(){O(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}({},y.current,{notebook:s.current}))}),[]);(0,v.useEffect)((function(){g||((null===h||void 0===h?void 0:h.notebook)?d(h.notebook):d((0,m.lw)("Untitled notebook")))}),[null===h,g]),(0,v.useEffect)((function(){if(s.current&&h.notebook){var e=!T().isEqual(s.current,h.notebook);e!==i&&u(e)}}),[i?null:null===h||void 0===h||null===(t=h.notebook)||void 0===t?void 0:t.content,i?null:a,x]),I("CELL_RESULT",(function(e){var t,n,r;d((0,m.lU)(s.current,e.cell_id,e.outputs)),console.debug("Added cell result",s.current);var o,i=e.outputs.some((function(e){return"error"===e.output_type})),u=null!==(o=null===(t=s.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(t){return t===e.cell_id})))&&void 0!==o?o:-1;e.outputs.length>0&&f(i?{variant:"error",message:"Cell #".concat(u+1," run failed")}:{variant:"success",message:"Cell #".concat(u+1," run succeeded")})}),[]),I("CELL_STATE",(function(e){d((0,m.dr)(s.current,e.cell_id,e.state)),console.debug("Added cell state",s.current)}),[]),(0,v.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),w())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var S=(0,v.useMemo)((function(){return{notebook:a,notebookRef:s,setNotebook:d,setCell:p,changed:i,save:w,isSaving:x,isFetching:g}}),[a,i,x,g]);return(0,r.jsx)(K.Provider,{value:S,children:n})},te=function(){var e=v.useContext(K);if(null===e)throw new Error("useContext must be used within a Provider");return e};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=v.createContext(null),ie=function(e){var t=te().save,n=re(v.useState([]),2),o=n[0],i=n[1],u=v.useRef([]),l=(0,v.useCallback)((function(e){i(e),u.current=e}),[]),a=(0,v.useCallback)((function(e){t(),l(T().uniq(u.current.concat(e)))}),[]),c=(0,j.Z)().sendNotification,s=A(),f=s.socket,d=s.status,p=te().changed;(0,v.useEffect)((function(){if(!p&&o.length>0&&d===O.Q.CONNECTED){var e=!0,t=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var u=r.value;f.send(JSON.stringify({type:"CELL_RUN",data:u}))}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}c({variant:"info",message:"Running ".concat(o.length," cell(s)")}),l([])}}),[p,o.length>0]);var m=g().focusRef;(0,v.useEffect)((function(){var e=function(e){e.shiftKey&&"Enter"===e.key&&(console.log("running cell"),e.preventDefault(),a([m.current]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var b=(0,v.useMemo)((function(){return{queue:o,runCells:a}}),[a]);return(0,r.jsx)(oe.Provider,{value:b,children:e.children})},ue=function(){var e=v.useContext(oe);if(null===e)throw new Error("useContext must be used within a Provider");return e},le=v.createContext(null),ae=function(e){var t,n,o,i=e.cellId,u=ue().runCells,l=A().socket,a=g(),c=a.focus,s=a.setFocus,f=te(),d=f.notebook,p=f.notebookRef,b=f.setNotebook,h=f.setCell,y=v.useRef(null),x=null===d||void 0===d||null===(t=d.content)||void 0===t?void 0:t.cells[i],j=(null===d||void 0===d||null===(n=d.results)||void 0===n?void 0:n.states[i])||null,O=(null===d||void 0===d||null===(o=d.results)||void 0===o?void 0:o.outputs[i])||null;y.current=x;var w=(0,v.useCallback)((function(){b((0,m.dr)(p.current,i,{status:"QUEUED"})),u([i])}),[l]),S=(0,v.useCallback)((function(e){c!==i&&s(i)}),[c,i]),Z=(0,v.useMemo)((function(){return{cell:x,cellRef:y,state:j,outputs:O,setCell:h,runCell:w}}),[x,j,O]);return(0,r.jsx)(le.Provider,{value:Z,children:(0,r.jsx)("div",{onClick:S,children:e.children})})},ce=function(){var e=v.useContext(le);if(null===e)throw new Error("useContext must be used within a Provider");return e},se=n(31812),fe=n(2734),de=n(98456),pe=n(70655),ve=n(86886),me=n(61903),be=n(87109),he=n(15861),ye=n(83321),xe=n(24358),ge=n(58032),je=n(82580),Oe=n(74231),we=function(e){if("execute_result"===e.output_type){var t,n=Object.keys(e.data)[0];return{data:e.data[n],contentType:n,status:200,executionTime:1e3*(null!==(t=e.execution_time)&&void 0!==t?t:0)}}if("error"===e.output_type){var r,o=[e.ename,e.evalue,e.traceback.join("\n")];return{status:400,executionTime:1e3*(null!==(r=e.execution_time)&&void 0!==r?r:0),error:{status:400,text:o.join("\n\n")}}}var i;return{status:400,executionTime:1e3*(null!==(i=e.execution_time)&&void 0!==i?i:0),error:{status:400,text:"Cant render output"}}},Se=n(5152),Ze=n.n(Se),Ce=Ze()((function(){return Promise.all([n.e(335),n.e(641),n.e(381)]).then(n.bind(n,97381)).then((function(e){return e.Yasr}))}),{loadableGenerated:{webpack:function(){return[97381]}},ssr:!1}),Pe=Ze()((function(){return Promise.all([n.e(94),n.e(641),n.e(443)]).then(n.bind(n,16443)).then((function(e){return e.Yasqe}))}),{loadableGenerated:{webpack:function(){return[16443]}},ssr:!1}),ke=n(3430),Ee=n(542);function Ae(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){var t=e.open,n=e.templatePrompt,o=e.templateOutput,i=e.onClose,u=(0,v.useState)(!1),l=u[0],a=u[1],c=(0,j.Z)().sendNotification,s=(0,je.TA)({initialValues:{prompt:void 0},validationSchema:Oe.Ry({}),onSubmit:function(){var e,t=(e=z().mark((function e(t){var r,u;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,r=t.prompt.replace(/\n/g," "),e.next=5,F.x1.post("/services/gpt_prompt",{prompt:n.replaceAll("{{prompt}}",r)});case 5:(u=e.sent)&&(200===u.status?(c({variant:"success",message:"Report created"}),i({prompt:r,output:o.replaceAll("{{prompt}}",r).replaceAll("{{output}}",u.data.choices[0].text).trim()})):c({variant:"error",message:"GPT error, check if it is set up correctly"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){Ae(i,r,o,u,l,"next",e)}function l(e){Ae(i,r,o,u,l,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return(0,r.jsxs)(ke.F,{title:"GPT Text to SPARQL query",open:t,onClose:i,children:[(0,r.jsx)("form",{onSubmit:s.handleSubmit,children:(0,r.jsxs)(ve.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{InputProps:{startAdornment:(0,r.jsx)(be.Z,{position:"start",children:(0,r.jsx)(he.Z,{children:"Query must "})})},name:"prompt",value:s.values.prompt,onChange:s.handleChange,error:s.touched.prompt&&Boolean(s.errors.prompt),helperText:s.touched.prompt&&s.errors.prompt,multiline:!0,fullWidth:!0,rows:4,variant:"standard",sx:{alignItems:"start"},inputProps:{style:{alignItems:"start"}}})}),(0,r.jsx)(ve.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)(ye.Z,{variant:"contained",type:"submit",children:"Submit"})})]})}),(0,r.jsx)(xe.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:l,children:(0,r.jsx)(de.Z,{color:"inherit"})})]})},Te=n(93946),Re=n(53156),ze=n(78445),Ne=n(53457),De=n(50480),Me=n(69368),Fe=n(72852),Le=n(9335),Ue=n(61983),We=n(93902);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ge(e,t,n[t])}))}return e}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Ve(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){if(e){if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}var Xe=Ze()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),$e=function(e){var t=e.title,n=e.x,o=e.y,i=e.z,u=e.layout,l=e.cumulative,a=void 0!==l&&l,c=e.normalized,s=void 0!==c&&c,f=e.height,d=void 0===f?400:f,p=n,v=o,m=i;if(s)if(m){var b={};T().zip(v,m).forEach((function(e){var t=Qe(e,2),n=t[0],r=t[1];b[r]=(b[r]||0)+n})),v=T().zip(v,m).map((function(e){var t=Qe(e,2),n=t[0],r=t[1];return n/b[r]}))}else{var h=o.reduce((function(e,t){return e+t}),0);v=o.map((function(e){return e/h}))}if(a&&!m){p.every((function(e){return!isNaN(Number(e))}))&&(p=p.map((function(e){return Number(e)})));var y=T().sortBy(p.map((function(e,t){return{v:e,i:t}})),"v");p=y.map((function(e){return e.v})),v=y.map((function(e){var t=e.i;return v[t]}));var x=0;v=v.map((function(e){return x+=e}))}var g=m?He(T().uniq(p).map((function(e){return{x:T().zip(p,m).filter((function(t){var n=Qe(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=Qe(e,2);t[0];return t[1]})),y:T().zip(p,v).filter((function(t){var n=Qe(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=Qe(e,2);t[0];return t[1]})),stackgroup:"one",name:"".concat(e)}}))):[{type:"bar",x:p,y:v}];return(0,r.jsx)(Xe,{data:g,style:{width:"100%"},layout:qe({autosize:!0,height:d,title:t},u)})};function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Je(e,t,n[t])}))}return e}var Ke=Ze()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),et=function(e){var t=e.title,n=e.values,o=e.layout,i=e.height,u=void 0===i?400:i;return(0,r.jsx)(Ke,{data:[{type:"pie",labels:n.map((function(e){return e.label})),values:n.map((function(e){return e.value}))}],style:{width:"100%"},layout:Ye({autosize:!0,height:u,title:t},o)})},tt=n(99964);function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ot={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,maxWidth:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,maxHeight:"100%",display:"flex",flexDirection:"column",fontFamily:"Monospace",overflow:"auto"},it=function(e){var t,n=e.source,o=e.open,i=e.onClose;return(0,r.jsx)(tt.Z,{open:o,onClose:i,children:(0,r.jsx)(p.Z,{sx:ot,children:(0,r.jsx)(f.Z,{spacing:2,children:(null!==(t=Object.entries(n))&&void 0!==t?t:[]).filter((function(e){var t=rt(e,2);t[0];return t[1]})).map((function(e,t){var n=rt(e,2),o=n[0],i=n[1];return(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)(he.Z,{variant:"h6",children:o}),(0,r.jsx)(he.Z,{children:(0,r.jsx)("pre",{style:{fontFamily:"inherit"},children:i.replaceAll("\n\n","\n")})},t)]})}))})})})},ut=n(51184),lt=n(79332);function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){at(e,t,n[t])}))}return e}function st(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ft=function(e){var t=e.label,n=e.onChange,o=e.value,i=e.step,u=e.min,l=e.max,a=st(e,["label","onChange","value","step","min","max"]);return(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(he.Z,{gutterBottom:!0,children:t}),(0,r.jsxs)(ve.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(ve.ZP,{item:!0,xs:!0,children:(0,r.jsx)(ut.ZP,ct({defaultValue:20,step:i,value:o,marks:!0,min:1,max:l,valueLabelDisplay:"auto",onChange:n},a))}),(0,r.jsx)(ve.ZP,{item:!0,children:(0,r.jsx)(lt.Z,{value:o,size:"small",onChange:function(e){return n(e,parseInt(e.target.value),0)},onBlur:function(e){return n(e,parseInt(e.target.value),0)},inputProps:{step:i,min:u,max:l,type:"number","aria-labelledby":"input-slider"}})})]})]})},dt=n(97212),pt=n(59334),vt=n(34386),mt=n(87918),bt=n(417),ht=n(23493),yt=n.n(ht);function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){jt(e,t,n[t])}))}return e}function wt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){if(e){if("string"===typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}var Pt={SUBJECT:0,PREDICATE:1,OBJECT:2},kt=function(e){var t=e.datasetId,n=e.pos,o=e.prefixes,i=e.label,l=e.onChange,a=e.limit,s=e.value,f=wt(e,["datasetId","pos","prefixes","label","onChange","limit","value"]),d=St(v.useState([]),2),p=d[0],m=d[1],b=St(v.useState(""),2),h=b[0],y=b[1],x=St(v.useState([]),2),g=x[0],j=x[1],O=null!==s&&void 0!==s?s:p,w=v.useMemo((function(){return yt()(function(){var e,r=(e=z().mark((function e(r,o){var i;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.x1.get("/terms/".concat(t,"/search"),{params:{limit:null!==a&&void 0!==a?a:50,query:r.query,pos:Pt[n]}});case 2:i=e.sent,o(i.data);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){gt(i,r,o,u,l,"next",e)}function l(e){gt(i,r,o,u,l,"throw",e)}u(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),200)}),[n,t,a]);v.useEffect((function(){var e=!0;if(""!==h)return w({query:h},(function(t){if(e){var n=t?Zt(O).concat(Zt(t.hits.map((function(e){return e.document})))):Zt(O),r=T().uniqBy(n,"value");j(r)}})),function(){e=!1};j(O||[])}),[O,h,fetch]);var S=(0,v.useMemo)((function(){return function(e){return(0,r.jsx)(me.Z,Ot({},e,{variant:"filled",fullWidth:!0,label:i}))}}),[i]),Z=(0,v.useMemo)((function(){return function(e,t){e.className;var n=wt(e,["className"]),i="SUBJECT"===t.pos?"info.light":"PREDICATE"===t.pos?"warning.light":"success.light",l="uri"===t.type?(0,We.R3)(t.value,o||{}):t.value,a=t.label?t.label:(0,We.lA)(t.value),s=l;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(dt.ZP,Ot({},n,{sx:{alignItems:"stretch",cursor:"pointer"},children:[(0,r.jsx)(u.Z,{sx:{width:4,bgcolor:i,mr:1,borderRadius:1}}),(0,r.jsx)(pt.Z,{primary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(he.Z,{component:"span",fontWeight:t.label?500:"normal",children:[a," "]}),(0,r.jsxs)(he.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]}),secondary:s})]})),(0,r.jsx)(c.Z,{variant:"fullWidth",component:"li"})]})}}),[o]),C=(0,v.useMemo)((function(){return function(e,t,n){var i="uri"===n.type?(0,We.R3)(n.value,o||{}):n.value,u=n.label?n.label:(0,We.lA)(n.value);return(0,r.jsx)(vt.Z,{sx:{maxWidth:"none"},arrow:!0,title:i,children:(0,r.jsx)(mt.Z,Ot({label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(he.Z,{variant:"body2",component:"span",fontWeight:n.label?500:"normal",children:[u," "]}),(0,r.jsxs)(he.Z,{variant:"caption",component:"span",children:["(",n.count,")"]})]})},t))},e)}}),[o]);return(0,r.jsx)(bt.Z,Ot({autoComplete:!0,multiple:!0,value:O,options:g,getOptionLabel:function(e){return"string"===typeof e?e:e.value},filterOptions:function(e){return e},onChange:function(e,t){j(t?Zt(t).concat(Zt(g)):g),m(t),l&&l(t)},onInputChange:function(e,t){y(t)},renderInput:S,renderOption:Z,renderTags:function(e,t){return e.map((function(e,n){return C(n,t({index:n}),e)}))}},f))},Et=n(41733),At=n(96540),It=n(68825),_t=n(96214),Tt=n(45670),Rt=n(55050),zt=n(88409),Nt=n(40044);function Dt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mt=function(e){var t=e.value,n=e.onChange;Dt(e,["value","onChange"]);return(0,r.jsx)(u.Z,{sx:{width:"100%"},children:(0,r.jsxs)(Tt.ZP,{value:t,children:[(0,r.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsx)(zt.Z,{value:t,onChange:n,children:e.tabs.map((function(e){var t=e.value,n=e.label;return(0,r.jsx)(Nt.Z,{value:t,label:n},t)}))})}),e.tabs.map((function(n){var o=n.value;n.label;return(0,r.jsx)(Rt.Z,{value:o,children:t===o&&e.renderTab(o)},o)}))]})})};function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lt(e,t,n[t])}))}return e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Gt(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){if(e){if("string"===typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}function Qt(){var e=Bt(["\n      VALUES ?p { "," } \n      ?s ?p ?o\n     "]);return Qt=function(){return e},e}function Ht(){var e=Bt(["\n        VALUES "," { "," }\n        VALUES "," { "," }\n        ?s "," ","\n      "]);return Ht=function(){return e},e}function Vt(){var e=Bt(["\n      VALUES ?tp { "," }\n      ?s ?tp ?tv\n    "]);return Vt=function(){return e},e}function Xt(){var e=Bt(["(MIN(",") AS ?","_min)  (MAX(",") AS ?","_max)"]);return Xt=function(){return e},e}function $t(){var e=Bt(["\n      { "," }\n      BIND (((?","_max - ?","_min) / ",") AS ?","_step)\n    "]);return $t=function(){return e},e}function Jt(){var e=Bt(["(0.5 + xsd:integer(("," - ?","_min) / ?","_step)) * ?","_step + ?","_min"]);return Jt=function(){return e},e}function Yt(){var e=Bt(["?g (COUNT(?g) as ?count) ",""]);return Yt=function(){return e},e}function Kt(){var e=Bt(["?count >= ",""]);return Kt=function(){return e},e}function en(){var e=Bt(["BIND (?o as ?g)"]);return en=function(){return e},e}function tn(){var e=Bt(["?count >= ",""]);return tn=function(){return e},e}function nn(){var e=Bt(["?s ?p ?o ?tv"]);return nn=function(){return e},e}function rn(){var e=Bt(["?s ?p ?o"]);return rn=function(){return e},e}function on(){var e=Bt(["(COUNT(?s) AS ?complete_count)"]);return on=function(){return e},e}function un(){var e=Bt(["(COUNT(?s) AS ?total_count)"]);return un=function(){return e},e}function ln(){var e=Bt(["?s ?p ?o"]);return ln=function(){return e},e}function an(){var e=Bt(["("," AS ?total_count)"]);return an=function(){return e},e}function cn(){var e=Bt(["*"]);return cn=function(){return e},e}function sn(){var e=Bt(["\n    { "," }\n    { "," }\n  "]);return sn=function(){return e},e}var fn=101,dn=[{value:"plot",label:"Show Plot"},{value:"table",label:"Show Table"},{value:"examples",label:"Show Examples"},{value:"completeness",label:"Completeness Analysis"}],pn=function(e){var t;return"literal"===e.type?(0,It.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,It.namedNode)(e.value)},vn=function(e){var t=e.outputs,n=e.mode,o=e.settings,i=e.setData,u=X();if("plot"===n){var l=t[0];if("execute_result"===l.output_type&&"application/sparql-results+json"in l.data){var a,c,s,f,d=JSON.parse(l.data["application/sparql-results+json"]),p=d.results.bindings.filter((function(e){return e.g})),v=p.map((function(e){return(0,We.lA)(e.g.value)})),m=p.map((function(e){return parseInt(e.count.value)})),b=(null!==(c=null===d||void 0===d||null===(a=d.head)||void 0===a?void 0:a.vars)&&void 0!==c?c:[]).includes("t")?p.map((function(e){return parseInt(e.t.value)})):void 0,h=o.normalized,y=o.cumulative;return(0,r.jsxs)(ve.ZP,{container:!0,children:[(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsxs)(Ne.Z,{children:[(0,r.jsx)(De.Z,{control:(0,r.jsx)(Fe.Z,{checked:null!==h&&void 0!==h&&h,value:null!==h&&void 0!==h&&h,onChange:function(e){return i({visualization_settings:{normalized:e.target.checked,cumulative:y}})}}),label:"Normalized"}),(0,r.jsx)(De.Z,{control:(0,r.jsx)(Fe.Z,{checked:null!==y&&void 0!==y&&y,value:null!==y&&void 0!==y&&y,onChange:function(e){return i({visualization_settings:{normalized:h,cumulative:e.target.checked}})}}),label:"Cumulative"})]})}),(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)($e,{x:v,y:m,z:b,normalized:null!==(s=o.normalized)&&void 0!==s&&s,cumulative:null!==(f=o.cumulative)&&void 0!==f&&f,layout:{xaxis:{title:"Value"},yaxis:{title:"Count"}}})})]})}}else{if("table"===n){var x=we(t[0]);return(0,r.jsx)(Ce,{result:x,prefixes:u})}if("examples"===n){var g=we(t[1]);return(0,r.jsx)(Ce,{result:g,prefixes:u})}if("completeness"===n){var j=t[2];if(j&&"execute_result"===j.output_type&&"application/sparql-results+json"in j.data){var O,w,S=JSON.parse(j.data["application/sparql-results+json"]),Z=null!==(O=S.results.bindings.map((function(e){return parseInt(e.complete_count.value)}))[0])&&void 0!==O?O:0,C=null!==(w=S.results.bindings.map((function(e){return parseInt(e.total_count.value)}))[0])&&void 0!==w?w:0;return(0,r.jsx)(et,{values:[{label:"Complete",value:Z},{label:"Incomplete",value:C-Z}]})}}}return null},mn={code:function(e){var t=ce(),n=t.cell,o=t.outputs,i=t.setCell,l=n.source,a=v.useRef(null),c=X(),s=(0,v.useState)(!1),f=s[0],d=s[1],p=(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(Pe,{value:l||"",onChange:function(e){i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ie(e,t,n[t])}))}return e}({},n,{source:e}))},editorRef:a})}),m=v.useMemo((function(){return(null===o||void 0===o?void 0:o.length)?we(o[0]):null}),[o]),b=(0,v.useMemo)((function(){return!!(null===o||void 0===o?void 0:o.length)&&(0,r.jsx)(u.Z,{sx:{width:"100%"},children:(0,r.jsx)(Ce,{result:m,prefixes:c})})}),[o,c]),h=V().report,y=(0,v.useMemo)((function(){var e,t,n=(null!==(t=null===(e=h.dataset)||void 0===e?void 0:e.namespaces)&&void 0!==t?t:[]).filter((function(e){return e.prefix})).map((function(e){return"PREFIX ".concat(e.prefix,": <").concat(e.name,">")})).join("\n");return{templatePrompt:"\n        ### Generate SPARQL query that should\n        ### {{prompt}}\n        ".concat(n,"\n        SELECT \n        ").replace(/^ +/gm,"").trim(),templateOutput:"\n        ### GPT output for: {{prompt}}\n        ".concat(n,"\n        SELECT {{output}}\n        ").replace(/^ +/gm,"").trim()}}),[h.dataset]),x=y.templatePrompt,g=y.templateOutput,j=(0,v.useMemo)((function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ge.Z,{size:"small",color:"secondary",sx:{position:"absolute",right:4,top:4},onClick:function(){return d(!0)},children:(0,r.jsx)(Ee.Z,{})}),(0,r.jsx)(_e,{open:f,templatePrompt:x,templateOutput:g,onClose:function(e){var t;(d(!1),e&&e.output)&&(null===(t=a.current)||void 0===t||t.setValue(e.output.trim()))}})]})}),[f]);return(0,r.jsxs)(r.Fragment,{children:[p,j,b]})},widget_valuedistribution:function(e){var t=V().report,n=ce(),o=n.cell,i=n.cellRef,u=n.outputs,l=n.setCell,a=o.data,c=o.source,s=Wt(v.useState(!1),2),d=s[0],p=s[1];(0,v.useEffect)((function(){var e,n,r,i=function(e,t){var n,r,o,i,u,l,a=(null!==(r=e.group_predicate)&&void 0!==r?r:[]).map(pn),c=function(e){return e.WHERE(Qt(),a)},s=function(t){var n;return(null!==(n=e.filters)&&void 0!==n?n:[]).forEach((function(e,n){var r,o,i,u,l=null!==(i=null===(r=e.predicate)||void 0===r?void 0:r.map(pn))&&void 0!==i?i:[],a=null!==(u=null===(o=e.object)||void 0===o?void 0:o.map(pn))&&void 0!==u?u:[],c=(0,It.variable)("p".concat(n)),s=(0,It.variable)("o".concat(n));t=t.WHERE(Ht(),c,l,s,a,c,s)})),t},f=function(t){var n,r=(null!==(n=e.temporal_predicate)&&void 0!==n?n:[]).map(pn);return t.WHERE(Vt(),r)},d=function(t,n,r,o){var i=s(c((0,Le.X)(Xt(),n,r,n,r)));return e.temporal_predicate&&(i=f(i)),t.WHERE($t(),i,r,r,o,r)},p=function(e,t){return(0,Ue.j)(Jt(),e,t,t,t,t)},v=e.group_count===fn?1e3:null!==(o=e.group_count)&&void 0!==o?o:20,m=(0,Le.X)(Yt(),e.temporal_predicate?"?t":null).ORDER().BY((0,It.variable)("count"),!0).LIMIT(v);m=c(m),m=s(m),e.continuous&&(m=d(m,"?o","o",v)),m=e.continuous?m.GROUP().BY(p((0,It.variable)("o"),"o")).AS("g").HAVING(Kt(),null!==(i=e.min_group_size)&&void 0!==i?i:1):m.WHERE(en()).GROUP().BY("g").HAVING(tn(),null!==(u=e.min_group_size)&&void 0!==u?u:1),e.temporal_predicate&&(m=(m=d(m=f(m),"?tv","t",null!==(l=e.temporal_group_count)&&void 0!==l?l:20)).GROUP().BY(p((0,It.variable)("tv"),"t")).AS("t")),m=m.build();var b=e.temporal_predicate?(0,Le.X)(nn()):(0,Le.X)(rn());b=c(b),b=s(b),e.temporal_predicate&&(b=f(b)),b=(b=b.LIMIT(100)).build();var h=s(c((0,Le.X)(on()))),y=(null===(n=e.filters)||void 0===n?void 0:n.length)>0?s((0,Le.X)(un()).WHERE(ln())):(0,Le.X)(an(),t);return{primaryQuery:m,exampleQuery:b,completenessQuery:(0,Le.X)(cn()).WHERE(sn(),h,y).build()}}(a,null!==(r=null===t||void 0===t||null===(e=t.dataset)||void 0===e||null===(n=e.statistics)||void 0===n?void 0:n.triple_count)&&void 0!==r?r:0),u=i.primaryQuery,c=i.exampleQuery,s=i.completenessQuery;l(Ut({},o,{source:[u,c,s]}))}),[a]);var m,b,h,y,x,g,j,O,w,S=(0,v.useCallback)((function(e){var t=i.current;l(Ut({},t,{data:Ut({},t.data,e)}))}),[]),Z=(0,v.useCallback)((function(){var e=i.current.data;S({filters:Gt(e.filters||[]).concat([{}])})}),[]),C=(0,v.useCallback)((function(e,t){var n=i.current.data;S({filters:Gt(n.filters.slice(0,e)).concat([Ut({},n.filters[e],t)],Gt(n.filters.slice(e+1)))})}),[]),P=(0,v.useCallback)((function(e){var t=i.current.data;S({filters:Gt(t.filters.slice(0,e)).concat(Gt(t.filters.slice(e+1)))})}),[]),k=(0,v.useMemo)((function(){var e,n,o;return(null!==(e=null===a||void 0===a?void 0:a.filters)&&void 0!==e?e:[]).map((function(e,i){var u,l;return(0,r.jsxs)(ve.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(ve.ZP,{item:!0,xs:2}),(0,r.jsx)(ve.ZP,{item:!0,xs:5,children:(0,r.jsx)(kt,{datasetId:null===t||void 0===t||null===(u=t.dataset)||void 0===u?void 0:u.id,pos:"PREDICATE",label:"Filter values of",value:null!==(n=e.predicate)&&void 0!==n?n:[],onChange:function(e){return C(i,{predicate:e})}})}),(0,r.jsx)(ve.ZP,{item:!0,xs:5,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(kt,{sx:{flex:1},datasetId:null===t||void 0===t||null===(l=t.dataset)||void 0===l?void 0:l.id,pos:"OBJECT",label:"Matching values",value:null!==(o=e.object)&&void 0!==o?o:[],onChange:function(e){return C(i,{object:e})}}),(0,r.jsx)(Te.Z,{"aria-label":"delete",onClick:function(){return P(i)},children:(0,r.jsx)(Et.Z,{})})]})})]},i)}))}),[a.filters]),E=(0,v.useMemo)((function(){var e,n;return"number"===typeof(null===(e=a.temporal_predicate)||void 0===e?void 0:e.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ve.ZP,{item:!0,xs:2}),(0,r.jsx)(ve.ZP,{item:!0,xs:10,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(kt,{sx:{flex:1},datasetId:null===t||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.id,pos:"PREDICATE",label:"Temporally group by",value:null!==(m=a.temporal_predicate)&&void 0!==m?m:[],onChange:function(e){return S({temporal_predicate:e})}}),(0,r.jsx)(Te.Z,{"aria-label":"delete",onClick:function(){return S({temporal_predicate:null})},children:(0,r.jsx)(Et.Z,{})})]})}),(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(Re.Z,{maxWidth:"md",children:(0,r.jsx)(ft,{label:"Limit number of timestamps",value:null!==(b=null===a||void 0===a?void 0:a.temporal_group_count)&&void 0!==b?b:20,valueLabelFormat:function(e){return e!==fn?e.toString():"Unlimited"},onChange:function(e,t){return S({temporal_group_count:t})},min:1,max:fn,step:1})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ve.ZP,{item:!0,xs:2}),(0,r.jsx)(ve.ZP,{item:!0,xs:10,children:(0,r.jsx)(ye.Z,{variant:"text",startIcon:(0,r.jsx)(At.Z,{}),onClick:function(){return S({temporal_predicate:[]})},children:" Add temporal grouping"})})]})}),[a.temporal_predicate,a.temporal_group_count]),A=(0,v.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(ve.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(ze.Z,{sx:{p:0},title:"Value Distribution Query Builder",subheader:"Plots distribution of values for a given predicate and a filter",action:(0,r.jsx)(Te.Z,{"aria-label":"View source",onClick:function(){return p(!0)},children:(0,r.jsx)(_t.Z,{})})})}),(0,r.jsx)(ve.ZP,{item:!0,xs:2,children:(0,r.jsx)(me.Z,{label:"For Subject",value:"Any",variant:"filled",disabled:!0})}),(0,r.jsx)(ve.ZP,{item:!0,xs:8,children:(0,r.jsx)(kt,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"PREDICATE",label:"Group values of",value:null!==(h=null===a||void 0===a?void 0:a.group_predicate)&&void 0!==h?h:[],onChange:function(e){return S({group_predicate:e})}})}),(0,r.jsx)(ve.ZP,{item:!0,xs:2,children:(0,r.jsx)(Ne.Z,{children:(0,r.jsx)(De.Z,{control:(0,r.jsx)(Me.Z,{value:null!==(y=null===a||void 0===a?void 0:a.continuous)&&void 0!==y&&y,checked:null!==(x=null===a||void 0===a?void 0:a.continuous)&&void 0!==x&&x,onChange:function(e){return S({continuous:e.target.checked})}}),label:"Continuous"})})}),k,(0,r.jsx)(ve.ZP,{item:!0,xs:2}),(0,r.jsx)(ve.ZP,{item:!0,xs:10,children:(0,r.jsx)(ye.Z,{variant:"text",startIcon:(0,r.jsx)(At.Z,{}),onClick:Z,children:" Add filter"})}),(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(Re.Z,{maxWidth:"md",children:(0,r.jsx)(ft,{label:"Limit number of groups",value:null!==(g=null===a||void 0===a?void 0:a.group_count)&&void 0!==g?g:20,valueLabelFormat:function(e){return e!==fn?e.toString():"Unlimited"},onChange:function(e,t){return S({group_count:t})},min:1,max:fn,step:1})})}),(0,r.jsx)(ve.ZP,{item:!0,xs:12,children:(0,r.jsx)(Re.Z,{maxWidth:"md",children:(0,r.jsx)(ft,{label:"Min group size",value:null!==(j=null===a||void 0===a?void 0:a.min_group_size)&&void 0!==j?j:2,onChange:function(e,t){return S({min_group_size:t})},min:1,max:20,step:1})})}),E]})})}),[a]),I=(0,v.useMemo)((function(){return!!(null===u||void 0===u?void 0:u.length)&&(0,r.jsx)(Mt,{value:null!==(O=a.output_mode)&&void 0!==O?O:"plot",tabs:dn,onChange:function(e,t){return S({output_mode:t})},renderTab:function(e){return(0,r.jsx)(vn,{mode:e,outputs:u,settings:null!==(w=a.visualization_settings)&&void 0!==w?w:{},setData:S})}})}),[a.output_mode,u,a.visualization_settings]);return(0,r.jsxs)(r.Fragment,{children:[A,I,(0,r.jsx)(it,{source:{"Main Query":c[0],"Example Query":c[1],"Completeness Query":c[2]},open:d,onClose:function(){return p(!1)}})]})}},bn=function(e){var t=(0,fe.Z)(),n=g().focus,o=ce(),i=o.cell,l=o.state,a=o.runCell,c=n===i.metadata.id,s=mn[i.cell_type],d=(0,v.useMemo)((function(){var e="RUNNING"===(null===l||void 0===l?void 0:l.status)||"QUEUED"===(null===l||void 0===l?void 0:l.status),t=e?"primary":"FINISHED"===(null===l||void 0===l?void 0:l.status)?"success":"ERROR"===(null===l||void 0===l?void 0:l.status)?"error":"primary";return(0,r.jsx)(se.Z,{loading:e,variant:"text",onClick:a,color:t,loadingIndicator:(0,r.jsx)(de.Z,{color:"primary",size:16}),children:(0,r.jsx)(pe.Z,{})})}),[l]);return(0,r.jsxs)(u.Z,{py:2,sx:{display:"flex",borderColor:c?t.palette.grey[300]:"transparent",borderStyle:"solid",borderRadius:"8px",position:"relative"},children:[(0,r.jsx)(u.Z,{children:d}),(0,r.jsx)(f.Z,{spacing:2,sx:{flex:1},children:(0,r.jsx)(s,{})})]})},hn=n(88078);function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){yn(e,t,n[t])}))}return e}var gn=function(e){var t,n=te(),o=n.notebook,i=n.notebookRef,u=n.setNotebook,l=n.isSaving,a=n.changed,c=(0,v.useCallback)((function(e){var t;u(xn({},i.current,{metadata:xn({},null===(t=i.current)||void 0===t?void 0:t.metadata,{name:e})}))}),[i]);return(0,v.useMemo)((function(){var e;return(0,r.jsx)(ze.Z,{title:null===o?(0,r.jsx)(hn.Z,{variant:"text"}):(0,r.jsx)(lt.Z,{fullWidth:!0,value:null===o||void 0===o||null===(e=o.metadata)||void 0===e?void 0:e.name,onChange:function(e){return c(e.target.value)}}),subheader:null===o?(0,r.jsx)(hn.Z,{variant:"text"}):l?"Saving...":a?"Changed":"Draft saved"})}),[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.name,l,a])},jn=n(94054),On=n(47312),wn=n(85945),Sn=n(18972),Zn=n(72428),Cn=n(25883),Pn=n(41899),kn=n(59622),En=n(95175);function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var In=function(e){var t,n,o,i=g(),l=i.focus,a=i.focusRef,s=i.setFocus,f=te(),d=f.notebook,p=f.notebookRef,b=f.setNotebook,h=ue().runCells,y=(0,j.Z)().sendNotification,x=l?d.content.cells[l]:null,O=null!==(n=null===x||void 0===x?void 0:x.cell_type)&&void 0!==n?n:"code",w=null!==(o=null===x||void 0===x||null===(t=x.metadata)||void 0===t?void 0:t.timeout)&&void 0!==o?o:5e3;(0,v.useEffect)((function(){!l&&p.current&&p.current.content.cell_order.length>0&&s(p.current.content.cell_order[0])}),[null===l]);var S=(0,v.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=p.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1,i=(0,m.kE)("code");b((0,m.gg)(p.current,i,o)),y({variant:"success",message:"Cell added"})}),[]),Z=(0,v.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=p.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===a.current})))&&void 0!==r?r:-1;b((0,m.rZ)(p.current,a.current)),y({variant:"success",message:"Cell #".concat(o+1," deleted")})}),[]),C=(0,v.useCallback)((function(e){var t,n,r,o,i=null!==(o=null===(t=p.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(e){return e===a.current})))&&void 0!==o?o:-1,u=p.current.content.cells[a.current],l=(0,m.kE)(e,u.metadata);b((0,m.VC)(p.current,a.current,l)),y({variant:"success",message:"Cell #".concat(i+1," type changed to ").concat(e)})}),[]),P=(0,v.useCallback)((function(e){b((0,m.wN)(p.current,a.current,{timeout:e}))}),[]),k=(0,v.useCallback)((function(){h([a.current])}),[]),E=(0,v.useCallback)((function(){h(p.current.content.cell_order)}),[]);return(0,v.useMemo)((function(){return(0,r.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderLeftWidth:"0px",borderRightWidth:"0px",borderRadius:1,bgcolor:"background.paper",color:"text.secondary",pl:2},children:[(0,r.jsx)(Te.Z,{"aria-label":"add",size:"large",onClick:S,children:(0,r.jsx)(Zn.Z,{fontSize:"inherit"})}),(0,r.jsx)(Te.Z,{"aria-label":"delete",size:"large",onClick:Z,children:(0,r.jsx)(Et.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(Te.Z,{"aria-label":"cut",size:"large",children:(0,r.jsx)(Cn.Z,{fontSize:"inherit"})}),(0,r.jsx)(Te.Z,{"aria-label":"copy",size:"large",children:(0,r.jsx)(Pn.Z,{fontSize:"inherit"})}),(0,r.jsx)(Te.Z,{"aria-label":"paste",size:"large",children:(0,r.jsx)(kn.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(Te.Z,{"aria-label":"run",size:"large",onClick:k,children:(0,r.jsx)(pe.Z,{fontSize:"inherit"})}),(0,r.jsx)(Te.Z,{"aria-label":"runAll",size:"large",onClick:E,children:(0,r.jsx)(En.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsxs)(jn.Z,{variant:"filled",sx:{minWidth:120},children:[(0,r.jsx)(On.Z,{children:"Cell Type"}),(0,r.jsxs)(wn.Z,{displayEmpty:!0,sx:{border:"none"},value:O,onChange:function(e){return C(e.target.value)},children:[(0,r.jsx)(Sn.Z,{value:"code",children:"Code"}),(0,r.jsx)(Sn.Z,{value:"markdown",children:"Markdown"}),(0,r.jsx)(Sn.Z,{value:"widget_valuedistribution",children:"Histogram Widget"})]})]}),(0,r.jsx)(bt.Z,{sx:{minWidth:140},getOptionLabel:function(e){return e.toString()},renderInput:function(e){return(0,r.jsx)(me.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){An(e,t,n[t])}))}return e}({},e,{variant:"filled",label:"Timeout (s)",placeholder:"Timeout (s)"}))},options:[5,60,180,600],disableClearable:!0,value:w/1e3,onChange:function(e,t){return t&&P(1e3*t)}})]})}),[l,O,w])},_n=function(e){var t,n=te().notebook,o=null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.cell_order.map((function(e){return(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(ae,{cellId:e,children:(0,r.jsx)(bn,{})}),(0,r.jsx)(c.Z,{})]},e)}));return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.Z,{sx:{position:"sticky",zIndex:10,left:0,right:0,top:0},children:(0,r.jsxs)(s.Z,{elevation:15,children:[(0,r.jsx)(gn,{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(In,{})]})}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(d.Z,{children:o})]})},Tn=function(){var e=(0,l.useRouter)().query.rid;return console.log(e),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"BOLD Profiler"})}),(0,r.jsx)(u.Z,{component:"main",children:e&&(0,r.jsx)(H,{reportId:e,children:(0,r.jsx)(E,{reportId:e,children:(0,r.jsx)(ee,{children:(0,r.jsx)(x,{children:(0,r.jsx)(ie,{children:(0,r.jsx)(_n,{})})})})})})})]})};Tn.getLayout=function(e){return(0,r.jsx)(a.A,{showNavbar:!1,children:e})};var Rn=Tn},68699:function(e,t,n){"use strict";n.d(t,{VC:function(){return s},dr:function(){return d},gg:function(){return v},kE:function(){return c},lU:function(){return f},lw:function(){return a},rZ:function(){return m},wN:function(){return p}});var r=n(25934);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=function(e){return{metadata:{name:e},content:{cells:{},cell_order:[]},results:{outputs:{},states:{}}}},c=function(e,t){return t=null!==t&&void 0!==t?t:{id:(0,r.Z)()},"code"===e?{cell_type:"code",metadata:t,source:"SELECT * \n{ ?s ?p ?o } \nLIMIT 10"}:"markdown"===e?{cell_type:"markdown",metadata:t,source:["# Markdown cell"]}:e.startsWith("widget_")?{cell_type:e,metadata:t,source:[],data:{}}:void 0},s=function(e,t,n){return u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},t,n))})})},f=function(e,t,n){return u({},e,{results:u({},e.results,{outputs:u({},e.results.outputs,i({},t,n))})})},d=function(e,t,n){return u({},e,{results:u({},e.results,{states:u({},e.results.states,i({},t,u({},e.results.states[t],n)))})})},p=function(e,t,n){return u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},t,u({},e.content.cells[t],{metadata:u({},e.content.cells[t].metadata,n)})))})})},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.metadata.id,o=l(e.content.cell_order);return-1===n?o.push(r):o.splice(n+1,0,r),u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},r,t)),cell_order:o}),results:{outputs:u({},e.results.outputs,i({},r,[])),states:u({},e.results.states,i({},r,{status:"INITIAL"}))}})},m=function(e,t){var n=l(e.content.cell_order),r=n.indexOf(t);-1!==r&&n.splice(r,1);var o=u({},e.content.cells);return delete o[t],u({},e,{content:u({},e.content,{cells:o,cell_order:n})})}}},function(e){e.O(0,[502,811,25,13,161,774,888,179],(function(){return t=22904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);