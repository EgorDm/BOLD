(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{22904:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/report/[rid]",function(){return n(39720)}])},87177:function(e,t,n){"use strict";var r=n(73400),o=n(67294);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.Z=function(){var e=u(o.useState({message:void 0,variant:"default"}),2),t=e[0],n=e[1],i=(0,r.Ds)().enqueueSnackbar;return o.useEffect((function(){if(null===t||void 0===t?void 0:t.message){var e="info";t.variant&&(e=t.variant),i(t.message,{variant:e,autoHideDuration:5e3})}}),[t]),{notification:t,sendNotification:n}}},39720:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Oo}});var r=n(85893),o=n(9008),i=n.n(o),u=n(99226),l=n(11163),a=n(76992),c=n(67720),s=n(55113),f=n(26447),d=n(44267),v=n(18377),p=n(67294),m=n(68699);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=p.createContext(null),x=function(e){var t=h(p.useState(null),2),n=t[0],o=t[1],i=p.useRef(null),u=(0,p.useCallback)((function(e){o(e),i.current=e}),[]),l=(0,p.useMemo)((function(){return{focus:n,focusRef:i,setFocus:u}}),[n]);return(0,r.jsx)(y.Provider,{value:l,children:e.children})},j=function(){var e=p.useContext(y);if(null===e)throw new Error("useContext must be used within a Provider");return e},g=n(87177),w=n(66754);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=(0,w.E)(),P=C.useContext,Z=C.useEvent,E=C.Provider,A=function(e){var t=e.reportId,n=e.children,o=(0,g.Z)().sendNotification,i=S(p.useState({}),2),u=i[0],l=i[1],a=(0,p.useCallback)((function(){o({variant:"success",message:"Connected to notebook"})}),[]),c=(0,p.useCallback)((function(){o({variant:"error",message:"Disconnected from notebook"})}),[]);return(0,r.jsx)(E,{endpoint:"".concat("ws://localhost:8000","/ws/notebook/").concat(t,"/"),state:u,setState:l,onSocketOpen:a,onSocketClose:c,children:n})},k=P,I=Z,_=n(96486),T=n.n(_),R=n(34051),M=n.n(R),L=n(88767);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}({},Object.fromEntries(e.map((function(e){return[e.prefix,e.name]}))))},D=n(62400);function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){z(i,r,o,u,l,"next",e)}function l(e){z(i,r,o,u,l,"throw",e)}u(void 0)}))}}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=p.createContext(null),Q=function(e){var t=(0,g.Z)().sendNotification,n=e.reportId,o=e.children,i=H(p.useState(null),2),u=i[0],l=i[1],a=p.useRef(null),c=(0,p.useCallback)((function(e){l(e),a.current=e}),[]),s=(0,L.useQuery)(["report",n],F(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.x1.get("/reports/".concat(n,"/"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Fetched report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to fetch report"})}}),f=s.refetch,d=s.isFetching,v=(0,L.useMutation)(F(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.x1.put("/reports/".concat(n,"/"),B({},a.current));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),{onSuccess:function(e){console.debug("Saved report",e),c(e)},onError:function(e){t({variant:"error",message:"Failed to save notebook"})}}),m=v.mutate,b=v.isLoading,h=(0,p.useCallback)((function(e){t({variant:"info",message:"Saving report"}),c(e),m()}),[]),y=(0,p.useMemo)((function(){return{report:u,reportRef:a,setReport:c,save:h,isSaving:b,refetch:f,isFetching:d}}),[u,b,d]);return(0,r.jsx)(V.Provider,{value:y,children:o})},G=function(){var e=p.useContext(V);if(null===e)throw new Error("useContext must be used within a Provider");return e},J=function(){var e,t=G().report;return p.useMemo((function(){var e;return U(null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces)}),[null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.namespaces])};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y=p.createContext(null),ee=function(e){var t,n=e.children,o=K(p.useState(!1),2),i=o[0],u=o[1],l=K(p.useState(null),2),a=l[0],c=l[1],s=(0,p.useRef)(null),f=(0,g.Z)().sendNotification,d=(0,p.useCallback)((function(e){c(e),s.current=e}),[]),v=(0,p.useCallback)((function(e){d((0,m.VC)(s.current,e.metadata.id,e))}),[]),b=G(),h=b.report,y=b.reportRef,x=b.isSaving,j=b.isFetching,w=b.save,O=(0,p.useCallback)((function(){w(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({},y.current,{notebook:s.current}))}),[]);(0,p.useEffect)((function(){j||((null===h||void 0===h?void 0:h.notebook)?(console.log("Updating notebook",h.notebook),s.current||d(h.notebook)):d((0,m.lw)("Untitled notebook")))}),[null===h,j]),(0,p.useEffect)((function(){if(s.current&&h.notebook){var e=!T().isEqual(s.current,h.notebook);e!==i&&u(e)}}),[i?null:null===h||void 0===h||null===(t=h.notebook)||void 0===t?void 0:t.content,i?null:a,x]),I("CELL_RESULT",(function(e){var t,n,r;d((0,m.lU)(s.current,e.cell_id,e.outputs)),console.debug("Added cell result",s.current);var o,i=e.outputs.some((function(e){return"error"===e.output_type})),u=null!==(o=null===(t=s.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(t){return t===e.cell_id})))&&void 0!==o?o:-1;e.outputs.length>0&&f(i?{variant:"error",message:"Cell #".concat(u+1," run failed")}:{variant:"success",message:"Cell #".concat(u+1," run succeeded")})}),[]),I("CELL_STATE",(function(e){d((0,m.dr)(s.current,e.cell_id,e.state)),console.debug("Added cell state",s.current)}),[]),(0,p.useEffect)((function(){var e=function(e){(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),O())};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var S=(0,p.useMemo)((function(){return{notebook:a,notebookRef:s,setNotebook:d,setCell:v,changed:i,save:O,isSaving:x,isFetching:j}}),[a,i,x,j]);return(0,r.jsx)(Y.Provider,{value:S,children:n})},te=function(){var e=p.useContext(Y);if(null===e)throw new Error("useContext must be used within a Provider");return e};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var oe=p.createContext(null),ie=function(e){var t=te().save,n=re(p.useState([]),2),o=n[0],i=n[1],u=p.useRef([]),l=(0,p.useCallback)((function(e){i(e),u.current=e}),[]),a=(0,p.useCallback)((function(e){t(),l(T().uniq(u.current.concat(e)))}),[]),c=(0,g.Z)().sendNotification,s=k(),f=s.socket,d=s.status,v=te(),m=v.changed,b=v.isSaving;(0,p.useEffect)((function(){if(!m&&!b&&o.length>0&&d===w.Q.CONNECTED){console.debug("Dispatching run queue");var e=!0,t=!1,n=void 0;try{for(var r,i=o[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var u=r.value;f.send(JSON.stringify({type:"CELL_RUN",data:u}))}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}c({variant:"info",message:"Running ".concat(o.length," cell(s)")}),l([])}}),[m,b,o.length>0]);var h=j().focusRef;(0,p.useEffect)((function(){var e=function(e){e.shiftKey&&"Enter"===e.key&&(e.preventDefault(),a([h.current]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]);var y=(0,p.useMemo)((function(){return{queue:o,runCells:a}}),[a]);return(0,r.jsx)(oe.Provider,{value:y,children:e.children})},ue=function(){var e=p.useContext(oe);if(null===e)throw new Error("useContext must be used within a Provider");return e},le=p.createContext(null),ae=function(e){var t,n,o,i=e.cellId,u=ue().runCells,l=k().socket,a=j(),c=a.focus,s=a.setFocus,f=te(),d=f.notebook,v=f.notebookRef,b=f.setNotebook,h=f.setCell,y=p.useRef(null),x=null===d||void 0===d||null===(t=d.content)||void 0===t?void 0:t.cells[i],g=(null===d||void 0===d||null===(n=d.results)||void 0===n?void 0:n.states[i])||null,w=(null===d||void 0===d||null===(o=d.results)||void 0===o?void 0:o.outputs[i])||null;y.current=x;var O=(0,p.useCallback)((function(){b((0,m.dr)(v.current,i,{status:"QUEUED"})),u([i])}),[l]),S=(0,p.useCallback)((function(e){c!==i&&s(i)}),[c,i]),C=(0,p.useMemo)((function(){return{cell:x,cellRef:y,state:g,outputs:w,setCell:h,runCell:O}}),[x,g,w]);return(0,r.jsx)(le.Provider,{value:C,children:(0,r.jsx)("div",{onClick:S,children:e.children})})},ce=function(){var e=p.useContext(le);if(null===e)throw new Error("useContext must be used within a Provider");return e},se=n(31812),fe=n(2734),de=n(98456),ve=n(70655),pe=n(86886),me=n(78445),be=n(93946),he=n(94054),ye=n(40476),xe=n(53457),je=n(53156),ge=n(68825),we=n(9335),Oe=n(61983);function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Se(e,t,n[t])}))}return e}var Pe=function(e){var t=ce(),n=t.cell,r=t.cellRef,o=t.setCell,i=n.data;return(0,p.useEffect)((function(){var t=Object.values(e(i));o(Ce({},r.current,{source:t}))}),[i]),{setData:(0,p.useCallback)((function(e){var t=r.current;o(Ce({},t,{data:Ce({},t.data,e)}))}),[])}},Ze=n(93902),Ee=n(53402),Ae=n.n(Ee),ke=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},Ie={rdf:Ae()("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfs:Ae()("http://www.w3.org/2000/01/rdf-schema#"),owl:Ae()("http://www.w3.org/2002/07/owl#")},_e=function(e){if("execute_result"===e.output_type){var t=Object.keys(e.data)[0],n=e.data[t];return JSON.parse(n)}return null},Te=function(e){if("execute_result"===e.output_type){var t,n=Object.keys(e.data)[0];return{data:e.data[n],contentType:n,status:200,executionTime:1e3*(null!==(t=e.execution_time)&&void 0!==t?t:0)}}if("error"===e.output_type){var r,o=[e.ename,e.evalue,e.traceback.join("\n")];return{status:400,executionTime:1e3*(null!==(r=e.execution_time)&&void 0!==r?r:0),error:{status:400,text:o.join("\n\n")}}}var i;return{status:400,executionTime:1e3*(null!==(i=e.execution_time)&&void 0!==i?i:0),error:{status:400,text:"Cant render output"}}},Re=n(99964),Me=n(15861);function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ue={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,maxWidth:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,maxHeight:"100%",display:"flex",flexDirection:"column",fontFamily:"Monospace",overflow:"auto"},De=function(e){var t,n=e.source,o=e.open,i=e.onClose;return(0,r.jsx)(Re.Z,{open:o,onClose:i,children:(0,r.jsx)(v.Z,{sx:Ue,children:(0,r.jsx)(f.Z,{spacing:2,children:(null!==(t=Object.entries(n))&&void 0!==t?t:[]).filter((function(e){var t=Ne(e,2);t[0];return t[1]})).map((function(e,t){var n=Ne(e,2),o=n[0],i=n[1];return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(c.Z,{}),(0,r.jsx)(Me.Z,{variant:"h6",children:o}),(0,r.jsx)("pre",{style:{fontFamily:"inherit"},children:i.replaceAll("\n\n","\n")})]},t)}))})})})},We=n(5152),ze=n.n(We),Fe=ze()((function(){return Promise.all([n.e(335),n.e(641),n.e(381)]).then(n.bind(n,97381)).then((function(e){return e.Yasr}))}),{loadableGenerated:{webpack:function(){return[97381]}},ssr:!1}),qe=n(50480),Be=n(69368);function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){He(e,t,n[t])}))}return e}function Qe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ge=function(e){var t=e.value,n=e.label,o=Qe(e,["value","label"]);return(0,r.jsx)(qe.Z,{control:(0,r.jsx)(Be.Z,Ve({checked:t,value:t},o)),label:n})},Je=n(51184),Xe=n(79332);function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$e(e,t,n[t])}))}return e}function Ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var et=function(e){var t=e.label,n=e.onChange,o=e.value,i=e.step,u=e.min,l=e.max,a=Ye(e,["label","onChange","value","step","min","max"]);return(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(Me.Z,{gutterBottom:!0,children:t}),(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,r.jsx)(pe.ZP,{item:!0,xs:!0,children:(0,r.jsx)(Je.ZP,Ke({defaultValue:20,step:i,value:o,marks:!0,min:1,max:l,valueLabelDisplay:"auto",onChange:n},a))}),(0,r.jsx)(pe.ZP,{item:!0,children:(0,r.jsx)(Xe.Z,{value:o,size:"small",onChange:function(e){return n(e,parseInt(e.target.value),0)},onBlur:function(e){return n(e,parseInt(e.target.value),0)},inputProps:{step:i,min:u,max:l,type:"number","aria-labelledby":"input-slider"}})})]})]})},tt=n(96214),nt=n(45670),rt=n(55050),ot=n(88409),it=n(40044);function ut(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var lt=function(e){var t=e.value,n=e.onChange;ut(e,["value","onChange"]);return(0,r.jsx)(u.Z,{sx:{width:"100%"},children:(0,r.jsxs)(nt.ZP,{value:t,children:[(0,r.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsx)(ot.Z,{value:t,onChange:n,children:e.tabs.map((function(e){var t=e.value,n=e.label;return(0,r.jsx)(it.Z,{value:t,label:n},t)}))})}),e.tabs.map((function(n){var o=n.value;n.label;return(0,r.jsx)(rt.Z,{value:o,children:t===o&&e.renderTab(o)},o)}))]})})},at=function(e){var t,n=e.mode,o=e.options,i=e.onChange,u=e.renderResult,l=ce(),a=l.cell,c=l.outputs;return(0,p.useMemo)((function(){return c&&c.length>0&&(0,r.jsx)(lt,{value:null!==n&&void 0!==n?n:o[0].value,tabs:o,onChange:function(e,t){return i(t)},renderTab:function(e){return u({mode:e,cell:a,outputs:c})}})}),[null===(t=a.data)||void 0===t?void 0:t.output_mode,c])},ct=n(4707),st=n(26452),ft=n(23508),dt=n(26215);function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||yt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ht(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){if(e){if("string"===typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}function xt(){var e=bt(['(GROUP_CONCAT(distinct ?subOf;SEPARATOR=",") AS ?subsOf)']);return xt=function(){return e},e}function jt(){var e=bt(['(GROUP_CONCAT(distinct ?equiv;SEPARATOR=",") AS ?equivs)']);return jt=function(){return e},e}function gt(){var e=bt(['(GROUP_CONCAT(distinct ?key;SEPARATOR=",") AS ?keys)']);return gt=function(){return e},e}function wt(){var e=bt(['(GROUP_CONCAT(distinct ?prop;SEPARATOR=",") AS ?props)']);return wt=function(){return e},e}function Ot(){var e=bt(["(COUNT(?s) AS ?count)"]);return Ot=function(){return e},e}function St(){var e=bt(["\n    ?class\n    ","\n    ","\n    ","\n    ","\n    ","\n  "]);return St=function(){return e},e}function Ct(){var e=bt(["OPTIONAL { ?class "," ?subOf . } ."]);return Ct=function(){return e},e}function Pt(){var e=bt(["OPTIONAL { ?class "," ?equiv . } ."]);return Pt=function(){return e},e}function Zt(){var e=bt(["OPTIONAL { ?class "," ?keylist . ?keylist ","*/"," ?key . } ."]);return Zt=function(){return e},e}function Et(){var e=bt(["OPTIONAL { ?prop rdfs:domain ?class . } ."]);return Et=function(){return e},e}function At(){var e=bt(["\n    ?class "," ?ty .\n    ?s ?p ?class .\n    ","\n    ","\n    ","\n    ","\n  "]);return At=function(){return e},e}function kt(){var e=bt(["\n      VALUES ?ty { "," }\n    "]);return kt=function(){return e},e}var It=[{value:"hierarchy",label:"Hierarchy"},{value:"table",label:"Show Table"}],_t=function(e){var t,n=Ie.rdf,r=Ie.rdfs,o=Ie.owl,i=(0,we.X)(St(),e.withSubs?(0,Oe.j)(xt()):"",e.withEquivs?(0,Oe.j)(jt()):"",e.withKeys?(0,Oe.j)(gt()):"",e.withProps?(0,Oe.j)(wt()):"",e.withCounts?(0,Oe.j)(Ot()):"").WHERE(At(),n.type,e.withSubs?(0,Oe.j)(Ct(),r.subClassOf):"",e.withEquivs?(0,Oe.j)(Pt(),o.equivalentClass):"",e.withKeys?(0,Oe.j)(Zt(),o.hasKey,n.rest,n.first):"",e.withProps?(0,Oe.j)(Et()):"").GROUP().BY("class").LIMIT(null!==(t=e.limit)&&void 0!==t?t:20);if(!e.anyClass){var u=ht(e.owlClasses?[o.Class]:[]).concat(ht(e.rdfClasses?[r.Class]:[]));i=i.WHERE(kt(),u)}return e.withCounts&&(i=i.ORDER().BY((0,ge.variable)("count"),!0)),{primaryQuery:i.build()}},Tt=function(e){var t,n=e.mode,o=e.cell,i=e.outputs,u=J(),l=o.data;if("hierarchy"===n&&"execute_result"===(null===(t=i[0])||void 0===t?void 0:t.output_type)){var a=_e(i[0]),c=0,s=a.results.bindings.map((function(e,t){var n,r,o,i,a,s,f,d,v,p,m=null===(n=e.class)||void 0===n?void 0:n.value,b="uri"===(null===(r=e.class)||void 0===r?void 0:r.type)?(0,Ze.R3)(m,u||{}):m,h=function(e){var t,n;return(null===(n=null===(t=null===e||void 0===e?void 0:e.split(","))||void 0===t?void 0:t.filter((function(e){return!!e})))||void 0===n?void 0:n.map(Ze.R3))||[]},y=null===(o=e.count)||void 0===o?void 0:o.value,x=[];(null===(i=l.withSubs)||void 0===i||i)&&x.push(Rt("Parents",h(null===(a=e.subsOf)||void 0===a?void 0:a.value)));(null===(s=l.withEquivs)||void 0===s||s)&&x.push(Rt("Equivalent To",h(null===(f=e.equiv)||void 0===f?void 0:f.value)));(null===(d=l.withKeys)||void 0===d||d)&&x.push(Rt("Keys",h(null===(v=e.key)||void 0===v?void 0:v.value)));l.withProps&&x.push(Rt("Properties",h(null===(p=e.props)||void 0===p?void 0:p.value)));return{id:c++,name:"".concat(b," ").concat(y?"(".concat(y,")"):""),children:x}}));return(0,r.jsx)(ct.Z,{defaultCollapseIcon:(0,r.jsx)(ft.Z,{}),defaultExpandIcon:(0,r.jsx)(dt.Z,{}),sx:{height:300,flexGrow:1,overflowY:"auto"},children:s.map(Mt)})}var f=Te(i[0]);return(0,r.jsx)(Fe,{result:f,prefixes:u})},Rt=function(e,t){return{id:e,name:"".concat(e," (").concat(t.length,")"),children:t.map((function(e){return{id:e,name:e}}))}},Mt=function(e){return(0,r.jsx)(st.Z,{nodeId:e.id.toString(),label:e.name,children:Array.isArray(e.children)?e.children.map((function(e){return Mt(e)})):null},e.id)},Lt=n(83321),Nt=n(61903),Ut=n(87109),Dt=n(58032),Wt=n(82580),zt=n(74231),Ft=n(17224),qt=ze()((function(){return Promise.all([n.e(94),n.e(641),n.e(443)]).then(n.bind(n,16443)).then((function(e){return e.Yasqe}))}),{loadableGenerated:{webpack:function(){return[16443]}},ssr:!1}),Bt=n(9386),Ht=n(3430),Vt=n(542);function Qt(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Gt(e,t,n[t])}))}return e}var Xt=function(e){var t=e.open,n=e.templatePrompt,o=e.templateOutput,i=e.onClose,u=(0,p.useState)(!1),l=u[0],a=u[1],c=(0,g.Z)().sendNotification,s=(0,Wt.TA)({initialValues:{prompt:void 0},validationSchema:zt.Ry({}),onSubmit:function(){var e,t=(e=M().mark((function e(t){var r,u;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,r=t.prompt.replace(/\n/g," "),e.next=5,D.x1.post("/services/gpt_prompt",{prompt:n.replaceAll("{{prompt}}",r)});case 5:(u=e.sent)&&(200===u.status?(c({variant:"success",message:"Report created"}),i({prompt:r,output:o.replaceAll("{{prompt}}",r).replaceAll("{{output}}",u.data.choices[0].text).trim()})):c({variant:"error",message:"GPT error, check if it is set up correctly"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:a(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){Qt(i,r,o,u,l,"next",e)}function l(e){Qt(i,r,o,u,l,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return(0,r.jsx)(Ht.F,{title:"GPT Text to SPARQL query",open:t,onClose:i,children:(0,r.jsx)(Bt.Y,{form:s,actions:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Lt.Z,{variant:"contained",type:"submit",children:"Submit"})}),loading:l,children:(0,r.jsx)(Nt.Z,Jt({InputProps:{startAdornment:(0,r.jsx)(Ut.Z,{position:"start",children:(0,r.jsx)(Me.Z,{children:"Query must "})})}},(0,Ft.s)(s,"prompt"),{placeholder:"calculate a while returning b and c",multiline:!0,fullWidth:!0,rows:4,variant:"standard",sx:{alignItems:"start"},inputProps:{style:{alignItems:"start"}}}))})})},$t=n(95934),Kt=n(97212),Yt=n(59334),en=n(417),tn=n(34386),nn=n(50122),rn=n(87918),on=n(23493),un=n.n(on);function ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){cn(e,t,n[t])}))}return e}function fn(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e){return function(e){if(Array.isArray(e))return ln(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){if(e){if("string"===typeof e)return ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(e,t):void 0}}function mn(){var e,t,n=(e=["\n  td, td * {\n    vertical-align: top;\n  }\n\n  td:first-of-type {\n    padding-right: 8px;\n  }\n\n"],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return mn=function(){return n},n}var bn=function(e){var t=e.datasetId,n=e.pos,o=e.label,i=e.onChange,l=e.prefixes,a=e.limit,s=e.value,f=fn(e,["datasetId","pos","label","onChange","prefixes","limit","value"]),d=dn(p.useState([]),2),v=d[0],m=d[1],b=dn(p.useState(""),2),h=b[0],y=b[1],x=dn(p.useState([]),2),j=x[0],g=x[1],w=null!==s&&void 0!==s?s:v,O=p.useMemo((function(){return un()(function(){var e,r=(e=M().mark((function e(r,o){var i;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.x1.get("/datasets/".concat(t,"/search"),{params:{limit:null!==a&&void 0!==a?a:50,query:r.query,pos:n}});case 2:i=e.sent,o(i.data);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){an(i,r,o,u,l,"next",e)}function l(e){an(i,r,o,u,l,"throw",e)}u(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),200)}),[n,t,a]);p.useEffect((function(){var e=!0;if(""!==h)return O({query:h},(function(t){if(e){var n=t?vn(w).concat(vn(t.hits.map((function(e){return e.document})))):vn(w),r=T().uniqBy(n,"value");g(r)}})),function(){e=!1};g(w||[])}),[w,h,fetch]);var S=(0,p.useMemo)((function(){return function(e){return(0,r.jsx)(Nt.Z,sn({},e,{variant:"filled",fullWidth:!0,label:o}))}}),[o]),C=(0,p.useMemo)((function(){return function(e,t){e.className;var n=fn(e,["className"]),o="SUBJECT"===t.pos?"info.light":"PREDICATE"===t.pos?"warning.light":"success.light",i="uri"===t.type?(0,Ze.R3)(t.value,l||{}):t.value,a=t.label?t.label:(0,Ze.lA)(t.value),s=i;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Kt.ZP,sn({},n,{sx:{alignItems:"stretch",cursor:"pointer"},children:[(0,r.jsx)(u.Z,{sx:{width:4,bgcolor:o,mr:1,borderRadius:1}}),(0,r.jsx)(Yt.Z,{primary:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Me.Z,{component:"span",fontWeight:t.label?500:"normal",children:[a," "]}),t.count&&(0,r.jsxs)(Me.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]}),secondary:s})]})),(0,r.jsx)(c.Z,{variant:"fullWidth",component:"li"})]})}}),[l]),P=(0,p.useMemo)((function(){return function(e,t,n){return(0,r.jsx)(yn,{term:n,chipProps:t,prefixes:l},e)}}),[l]);return(0,r.jsx)(en.Z,sn({autoComplete:!0,multiple:!0,value:w,options:j,getOptionLabel:function(e){return"string"===typeof e?e:e.value},filterOptions:function(e){return e},onChange:function(e,t){g(t?vn(t).concat(vn(j)):j),m(t),i&&i(t)},onInputChange:function(e,t){y(t)},renderInput:S,renderOption:C,renderTags:function(e,t){return e.map((function(e,n){return P(n,t({index:n}),e)}))}},f))},hn=$t.Z.table(mn()),yn=function(e){var t=e.term,n=e.prefixes,o=e.chipProps,i=fn(e,["term","prefixes","chipProps"]),u="uri"===t.type?(0,Ze.R3)(t.value,n||{}):t.value,l=t.label?t.label:(0,Ze.lA)(t.value);return(0,r.jsx)(tn.Z,sn({sx:{maxWidth:"none"},arrow:!0,title:(0,r.jsx)(f.Z,{children:(0,r.jsx)(hn,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"IRI"}),(0,r.jsx)("td",{children:(0,r.jsx)(nn.Z,{href:t.value,style:{color:"white"},target:"_blank",children:u})})]}),t.description&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}),t.range&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Range"}),(0,r.jsx)("td",{children:t.range})]}),t.lang&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Lang"}),(0,r.jsx)("td",{children:t.lang})]}),t.rdf_type&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"RDF Type"}),(0,r.jsx)("td",{children:t.rdf_type})]})]})})})},i,{children:(0,r.jsx)(rn.Z,sn({label:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Me.Z,{variant:"body2",component:"span",fontWeight:t.label?500:"normal",children:[l," "]}),t.count&&(0,r.jsxs)(Me.Z,{variant:"caption",component:"span",children:["(",t.count,")"]})]})},o))}))};function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function wn(){var e=gn(["?p ?o"]);return wn=function(){return e},e}function On(){var e=gn(["\n    VALUES ?s { ",' }\n    ?s ?p ?o .\n    FILTER(!isLiteral(?o) || langMatches(lang(?o), "en"))\n  ']);return On=function(){return e},e}var Sn=[{value:"table",label:"Show Table"}],Cn=function(e){var t,n,r,o=null!==(n=null===(t=e.subject)||void 0===t?void 0:t.map(ke))&&void 0!==n?n:[];return{primaryQuery:(0,we.X)(wn()).WHERE(On(),o).LIMIT(null!==(r=e.limit)&&void 0!==r?r:20).build()}},Pn=function(e){e.mode,e.cell;var t=e.outputs,n=J(),o=Te(t[0]);return(0,r.jsx)(Fe,{result:o,prefixes:n})};function Zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function kn(){var e=An(["",""]);return kn=function(){return e},e}function In(){var e=An(["VALUES ?o { "," }"]);return In=function(){return e},e}function _n(){var e=An(["VALUES ?p"," { "," }"]);return _n=function(){return e},e}function Tn(){var e=An(["?s"," ?p"," ?o"]);return Tn=function(){return e},e}function Rn(){var e=An(["?o ?p"," ?s",""]);return Rn=function(){return e},e}function Mn(){var e=An(["OPTIONAL { ?s"," ?p"," ?s"," }"]);return Mn=function(){return e},e}function Ln(){var e=An(["OPTIONAL { ?s"," ?p"," ?s"," }"]);return Ln=function(){return e},e}function Nn(){var e=An(["FILTER(!isLiteral(s",") || langMatches(lang(s",'), "en"))']);return Nn=function(){return e},e}var Un=ze()((function(){return Promise.all([n.e(703),n.e(362)]).then(n.bind(n,46362))}),{loadableGenerated:{webpack:function(){return[46362]}},ssr:!1}),Dn=[{value:"graph",label:"Graph"},{value:"tableIn",label:"Show Table (In)"},{value:"tableOut",label:"Show Table (Out)"}],Wn=function(e){var t,n,r=function(t,n,r){var o,i,u=[(0,ge.variable)("o")];T().range(n).forEach((function(e){u.push((0,ge.variable)("p".concat(e))),u.push((0,ge.variable)("s".concat(e)))}));var l=null!==(i=null===(o=e.entity)||void 0===o?void 0:o.map(ke))&&void 0!==i?i:[],a=(0,we.X)(kn(),u).WHERE(In(),l).LIMIT(Math.ceil(r/n));return T().range(n).forEach((function(n){if(!e.anyPredicate){var r,o,i=null!==(o=null===(r=e.predicates)||void 0===r?void 0:r.map(ke))&&void 0!==o?o:[];a=a.WHERE(_n(),n,i)}(a=0===n?t?a.WHERE(Tn(),n,n):a.WHERE(Rn(),n,n):t?a.WHERE(Mn(),n,n,n-1):a.WHERE(Ln(),n-1,n,n)).WHERE(Nn(),n,n)})),a},o=null!==(t=e.limit)&&void 0!==t?t:100,i=null!==(n=e.depth)&&void 0!==n?n:1;return{queryIn:r(!0,i,Math.round(o/2)).build(),queryOut:r(!1,i,Math.round(o/2)).build()}},zn=function(e){var t,n,o=e.mode,i=e.cell,u=e.outputs,l=J();i.data;if("graph"===o&&"execute_result"===(null===(t=u[0])||void 0===t?void 0:t.output_type)&&"execute_result"===(null===(n=u[1])||void 0===n?void 0:n.output_type)){var a=_e(u[0]),c=_e(u[1]),s=(a.head.vars.length-1)/2,f={},d=[],v=0,p=function(e){if(f[e.value])return f[e.value].id;var t="uri"===e.type?(0,Ze.R3)(e.value,l||{}):e.value,n="uri"===e.type?(0,Ze.lA)(e.value):e.value,r=v++;return f[e.value]={id:r,label:T().truncate(n,{length:30}),title:t},r};T().range(s).forEach((function(e){var t=e>0?"s".concat(e-1):"o";a.results.bindings.forEach((function(n){if(n["s".concat(e)]){var r=p(n[t]),o=p(n["s".concat(e)]);d.push({from:o,to:r,label:(0,Ze.lA)(n["p".concat(e)].value),title:(0,Ze.R3)(n["p".concat(e)].value,l||{})})}})),c.results.bindings.forEach((function(n){if(n["s".concat(e)]){var r=p(n[t]),o=p(n["s".concat(e)]);d.push({from:r,to:o,label:(0,Ze.lA)(n["p".concat(e)].value),title:(0,Ze.R3)(n["p".concat(e)].value,l||{})})}}))}));var m={nodes:Object.values(f),edges:d};return(0,r.jsx)(Un,{graph:m,options:Fn,getNetwork:function(e){e.stabilize()}})}if("tableIn"===o){var b=Te(u[0]);return(0,r.jsx)(Fe,{result:b,prefixes:l})}var h=Te(u[1]);return(0,r.jsx)(Fe,{result:h,prefixes:l})},Fn={layout:{improvedLayout:!0},edges:{color:"#000000",length:300},height:"500px",physics:{enabled:!1,solver:"repulsion",repulsion:{nodeDistance:400}}},qn=n(47312),Bn=n(85945),Hn=n(18972);function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Qn(e,t,n[t])}))}return e}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function $n(){var e=Xn(["?s ?p ?o"]);return $n=function(){return e},e}function Kn(){var e=Xn(["VALUES "," { "," }"]);return Kn=function(){return e},e}function Yn(){var e=Xn(["VALUES "," { "," }"]);return Yn=function(){return e},e}function er(){var e=Xn(["VALUES "," { "," }"]);return er=function(){return e},e}function tr(){var e=Xn(["\n    "," "," ","\n  "]);return tr=function(){return e},e}var nr=[{value:"table",label:"Show Table"}],rr=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},or=function(e){var t=e.outputs,n=e.mode,o=(e.settings,e.setData,J());if("table"===n){var i=Te(t[0]);return(0,r.jsx)(Fe,{result:i,prefixes:o})}return null},ir=n(72852);function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lr(e,t,n[t])}))}return e}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||fr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e){return function(e){if(Array.isArray(e))return ur(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){if(e){if("string"===typeof e)return ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ur(e,t):void 0}}var dr=ze()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),vr=function(e){var t=e.title,n=e.x,o=e.y,i=e.z,u=e.layout,l=e.cumulative,a=void 0!==l&&l,c=e.normalized,s=void 0!==c&&c,f=e.height,d=void 0===f?400:f,v=n,p=o,m=i;if(s)if(m){var b={};T().zip(p,m).forEach((function(e){var t=cr(e,2),n=t[0],r=t[1];b[r]=(b[r]||0)+n})),p=T().zip(p,m).map((function(e){var t=cr(e,2),n=t[0],r=t[1];return n/b[r]}))}else{var h=o.reduce((function(e,t){return e+t}),0);p=o.map((function(e){return e/h}))}if(a&&!m){v.every((function(e){return!isNaN(Number(e))}))&&(v=v.map((function(e){return Number(e)})));var y=T().sortBy(v.map((function(e,t){return{v:e,i:t}})),"v");v=y.map((function(e){return e.v})),p=y.map((function(e){var t=e.i;return p[t]}));var x=0;p=p.map((function(e){return x+=e}))}var j=m?sr(T().uniq(v).map((function(e){return{x:T().zip(v,m).filter((function(t){var n=cr(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=cr(e,2);t[0];return t[1]})),y:T().zip(v,p).filter((function(t){var n=cr(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=cr(e,2);t[0];return t[1]})),stackgroup:"one",name:"".concat(e)}}))):[{type:"bar",x:v,y:p}];return(0,r.jsx)(dr,{data:j,style:{width:"100%"},layout:ar({autosize:!0,height:d,title:t},u)})};function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pr(e,t,n[t])}))}return e}var br=ze()((function(){return Promise.all([n.e(960),n.e(660)]).then(n.bind(n,58660))}),{loadableGenerated:{webpack:function(){return[58660]}},ssr:!1}),hr=function(e){var t=e.title,n=e.values,o=e.layout,i=e.height,u=void 0===i?400:i;return(0,r.jsx)(br,{data:[{type:"pie",labels:n.map((function(e){return e.label})),values:n.map((function(e){return e.value}))}],style:{width:"100%"},layout:mr({autosize:!0,height:u,title:t},o)})},yr=n(41733),xr=n(96540);function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gr(e,t,n[t])}))}return e}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,l=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){l=!0,o=a}finally{try{u||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||Pr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Cr(e){return function(e){if(Array.isArray(e))return jr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){if(e){if("string"===typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(e,t):void 0}}function Zr(){var e=Sr(["\n      VALUES ?p { "," } \n      ?s ?p ?o\n     "]);return Zr=function(){return e},e}function Er(){var e=Sr(["\n        VALUES "," { "," }\n        VALUES "," { "," }\n        ?s "," ","\n      "]);return Er=function(){return e},e}function Ar(){var e=Sr(["\n      VALUES ?tp { "," }\n      ?s ?tp ?tv\n    "]);return Ar=function(){return e},e}function kr(){var e=Sr(["(MIN(",") AS ?","_min)  (MAX(",") AS ?","_max)"]);return kr=function(){return e},e}function Ir(){var e=Sr(["\n      { "," }\n      BIND (((?","_max - ?","_min) / ",") AS ?","_step)\n    "]);return Ir=function(){return e},e}function _r(){var e=Sr(["(0.5 + xsd:integer(("," - ?","_min) / ?","_step)) * ?","_step + ?","_min"]);return _r=function(){return e},e}function Tr(){var e=Sr(["?g (COUNT(?g) as ?count) ",""]);return Tr=function(){return e},e}function Rr(){var e=Sr(["?count >= ",""]);return Rr=function(){return e},e}function Mr(){var e=Sr(["BIND (?o as ?g)"]);return Mr=function(){return e},e}function Lr(){var e=Sr(["?count >= ",""]);return Lr=function(){return e},e}function Nr(){var e=Sr(["(YEAR(xsd:dateTime(?tv)) * 12 + MONTH(xsd:dateTime(?tv)))"]);return Nr=function(){return e},e}function Ur(){var e=Sr(["?s ?p ?o ?tv"]);return Ur=function(){return e},e}function Dr(){var e=Sr(["?s ?p ?o"]);return Dr=function(){return e},e}function Wr(){var e=Sr(["(COUNT(?s) AS ?complete_count)"]);return Wr=function(){return e},e}function zr(){var e=Sr(["(COUNT(?s) AS ?total_count)"]);return zr=function(){return e},e}function Fr(){var e=Sr(["?s ?p ?o"]);return Fr=function(){return e},e}function qr(){var e=Sr(["("," AS ?total_count)"]);return qr=function(){return e},e}function Br(){var e=Sr(["*"]);return Br=function(){return e},e}function Hr(){var e=Sr(["\n    { "," }\n    { "," }\n  "]);return Hr=function(){return e},e}var Vr=101,Qr=[{value:"plot",label:"Show Plot"},{value:"table",label:"Show Table"},{value:"examples",label:"Show Examples"},{value:"completeness",label:"Completeness Analysis"}],Gr=function(e){var t;return"literal"===e.type?(0,ge.literal)(e.value,null!==(t=e.lang)&&void 0!==t?t:void 0):(0,ge.namedNode)(e.value)},Jr=function(e){var t=e.outputs,n=e.mode,o=e.settings,i=e.setData,u=J();if("plot"===n){var l=t[0];if("execute_result"===l.output_type&&"application/sparql-results+json"in l.data){var a,c,s,f,d=JSON.parse(l.data["application/sparql-results+json"]),v=d.results.bindings.filter((function(e){return e.g})),p=v.map((function(e){return(0,Ze.lA)(e.g.value)})),m=v.map((function(e){var t;return(null===(t=e.count)||void 0===t?void 0:t.value)&&Number(e.count.value)||null})),b=(null!==(c=null===d||void 0===d||null===(a=d.head)||void 0===a?void 0:a.vars)&&void 0!==c?c:[]).includes("t")?v.map((function(e){var t;return(null===(t=e.t)||void 0===t?void 0:t.value)&&Number(e.t.value)||null})):void 0,h=o.normalized,y=o.cumulative;return(0,r.jsxs)(pe.ZP,{container:!0,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(qe.Z,{control:(0,r.jsx)(ir.Z,{checked:null!==h&&void 0!==h&&h,value:null!==h&&void 0!==h&&h,onChange:function(e){return i({visualization_settings:{normalized:e.target.checked,cumulative:y}})}}),label:"Normalized"}),(0,r.jsx)(qe.Z,{control:(0,r.jsx)(ir.Z,{checked:null!==y&&void 0!==y&&y,value:null!==y&&void 0!==y&&y,onChange:function(e){return i({visualization_settings:{normalized:h,cumulative:e.target.checked}})}}),label:"Cumulative"})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(vr,{x:p,y:m,z:b,normalized:null!==(s=o.normalized)&&void 0!==s&&s,cumulative:null!==(f=o.cumulative)&&void 0!==f&&f,layout:{xaxis:{title:"Value"},yaxis:{title:"Count"}}})})]})}}else{if("table"===n){var x=t[0]?Te(t[0]):null;return(0,r.jsx)(Fe,{result:x,prefixes:u})}if("examples"===n){var j=t[1]?Te(t[1]):null;return(0,r.jsx)(Fe,{result:j,prefixes:u})}if("completeness"===n){var g=t[2];if(g&&"execute_result"===g.output_type&&"application/sparql-results+json"in g.data){var w,O,S=JSON.parse(g.data["application/sparql-results+json"]),C=null!==(w=S.results.bindings.map((function(e){return parseInt(e.complete_count.value)}))[0])&&void 0!==w?w:0,P=null!==(O=S.results.bindings.map((function(e){return parseInt(e.total_count.value)}))[0])&&void 0!==O?O:0;return(0,r.jsx)(hr,{values:[{label:"Complete",value:C},{label:"Incomplete",value:P-C}]})}}}return null},Xr={code:function(e){var t=ce(),n=t.cell,o=t.outputs,i=t.setCell,l=n.source,a=p.useRef(null),c=J(),s=(0,p.useState)(!1),f=s[0],d=s[1],v=(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(qt,{value:l||"",onChange:function(e){i(Jt({},n,{source:e}))},editorRef:a})}),m=p.useMemo((function(){return(null===o||void 0===o?void 0:o.length)?Te(o[0]):null}),[o]),b=(0,p.useMemo)((function(){return!!(null===o||void 0===o?void 0:o.length)&&(0,r.jsx)(u.Z,{sx:{width:"100%"},children:(0,r.jsx)(Fe,{result:m,prefixes:c})})}),[o,c]),h=G().report,y=(0,p.useMemo)((function(){var e,t,n=(null!==(t=null===(e=h.dataset)||void 0===e?void 0:e.namespaces)&&void 0!==t?t:[]).filter((function(e){return e.prefix})).map((function(e){return"PREFIX ".concat(e.prefix,": <").concat(e.name,">")})).join("\n");return{templatePrompt:"\n        ### Generate SPARQL query that should\n        ### {{prompt}}\n        ".concat(n,"\n        SELECT \n        ").replace(/^ +/gm,"").trim(),templateOutput:"\n        ### GPT output for: {{prompt}}\n        ".concat(n,"\n        SELECT {{output}}\n        ").replace(/^ +/gm,"").trim()}}),[h.dataset]),x=y.templatePrompt,j=y.templateOutput,g=(0,p.useMemo)((function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Dt.Z,{size:"small",color:"secondary",sx:{position:"absolute",right:4,top:4},onClick:function(){return d(!0)},children:(0,r.jsx)(Vt.Z,{})}),(0,r.jsx)(Xt,{open:f,templatePrompt:x,templateOutput:j,onClose:function(e){var t;(d(!1),e&&e.output)&&(null===(t=a.current)||void 0===t||t.setValue(e.output.trim()))}})]})}),[f]);return(0,r.jsxs)(r.Fragment,{children:[v,g,b]})},widget_valuedistribution:function(e){var t=G().report,n=ce(),o=n.cell,i=n.cellRef,u=n.outputs,l=n.setCell,a=o.data,c=o.source,s=Or(p.useState(!1),2),d=s[0],v=s[1],m=J();(0,p.useEffect)((function(){var e,n,r,i=function(e,t){var n,r,o,i,u,l=(null!==(r=e.group_predicate)&&void 0!==r?r:[]).map(Gr),a=function(e){return e.WHERE(Zr(),l)},c=function(t){var n;return(null!==(n=e.filters)&&void 0!==n?n:[]).forEach((function(e,n){var r,o,i,u,l=null!==(i=null===(r=e.predicate)||void 0===r?void 0:r.map(Gr))&&void 0!==i?i:[],a=null!==(u=null===(o=e.object)||void 0===o?void 0:o.map(Gr))&&void 0!==u?u:[],c=(0,ge.variable)("p".concat(n)),s=(0,ge.variable)("o".concat(n));t=t.WHERE(Er(),c,l,s,a,c,s)})),t},s=function(t){var n,r=(null!==(n=e.temporal_predicate)&&void 0!==n?n:[]).map(Gr);return t.WHERE(Ar(),r)},f=function(t,n,r,o){var i=c(a((0,we.X)(kr(),n,r,n,r)));return e.temporal_predicate&&(i=s(i)),t.WHERE(Ir(),i,r,r,o,r)},d=function(e,t){return(0,Oe.j)(_r(),e,t,t,t,t)},v=e.group_count===Vr?1e3:null!==(o=e.group_count)&&void 0!==o?o:20,p=(0,we.X)(Tr(),e.temporal_predicate?"((?tu / 12) as ?t)":null).ORDER().BY((0,ge.variable)("count"),!0).LIMIT(v);if(p=a(p),p=c(p),e.continuous&&(p=f(p,"?o","o",v)),p=e.continuous?p.GROUP().BY(d((0,ge.variable)("o"),"o")).AS("g").HAVING(Rr(),null!==(i=e.min_group_size)&&void 0!==i?i:1):p.WHERE(Mr()).GROUP().BY("g").HAVING(Lr(),null!==(u=e.min_group_size)&&void 0!==u?u:1),e.temporal_predicate){var m,b=(0,Oe.j)(Nr());p=(p=f(p=s(p),b,"t",null!==(m=e.temporal_group_count)&&void 0!==m?m:20)).GROUP().BY(d(b,"t")).AS("tu")}p=p.build();var h=e.temporal_predicate?(0,we.X)(Ur()):(0,we.X)(Dr());h=a(h),h=c(h),e.temporal_predicate&&(h=s(h)),h=(h=h.LIMIT(100)).build();var y=c(a((0,we.X)(Wr()))),x=(null===(n=e.filters)||void 0===n?void 0:n.length)>0?c((0,we.X)(zr()).WHERE(Fr())):(0,we.X)(qr(),t);return{primaryQuery:p,exampleQuery:h,completenessQuery:(0,we.X)(Br()).WHERE(Hr(),y,x).build()}}(a,null!==(r=null===t||void 0===t||null===(e=t.dataset)||void 0===e||null===(n=e.statistics)||void 0===n?void 0:n.triple_count)&&void 0!==r?r:0),u=i.primaryQuery,c=i.exampleQuery,s=i.completenessQuery;l(wr({},o,{source:[u,c,s]}))}),[a]);var b,h,y,x,j,g,w,O,S,C=(0,p.useCallback)((function(e){var t=i.current;l(wr({},t,{data:wr({},t.data,e)}))}),[]),P=(0,p.useCallback)((function(){var e=i.current.data;C({filters:Cr(e.filters||[]).concat([{}])})}),[]),Z=(0,p.useCallback)((function(e,t){var n=i.current.data;C({filters:Cr(n.filters.slice(0,e)).concat([wr({},n.filters[e],t)],Cr(n.filters.slice(e+1)))})}),[]),E=(0,p.useCallback)((function(e){var t=i.current.data;C({filters:Cr(t.filters.slice(0,e)).concat(Cr(t.filters.slice(e+1)))})}),[]),A=(0,p.useMemo)((function(){var e,n,o;return(null!==(e=null===a||void 0===a?void 0:a.filters)&&void 0!==e?e:[]).map((function(e,i){var u,l;return(0,r.jsxs)(pe.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsx)(bn,{datasetId:null===t||void 0===t||null===(u=t.dataset)||void 0===u?void 0:u.id,pos:"PREDICATE",label:"Filter values of",value:null!==(n=e.predicate)&&void 0!==n?n:[],onChange:function(e){return Z(i,{predicate:e})},prefixes:m})}),(0,r.jsx)(pe.ZP,{item:!0,xs:5,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(bn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(l=t.dataset)||void 0===l?void 0:l.id,pos:"OBJECT",label:"Matching values",value:null!==(o=e.object)&&void 0!==o?o:[],onChange:function(e){return Z(i,{object:e})},prefixes:m}),(0,r.jsx)(be.Z,{"aria-label":"delete",onClick:function(){return E(i)},children:(0,r.jsx)(yr.Z,{})})]})})]},i)}))}),[a.filters,m]),k=(0,p.useMemo)((function(){var e,n;return"number"===typeof(null===(e=a.temporal_predicate)||void 0===e?void 0:e.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsxs)(f.Z,{direction:"row",spacing:2,children:[(0,r.jsx)(bn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.id,pos:"PREDICATE",label:"Temporally group by",value:null!==(b=a.temporal_predicate)&&void 0!==b?b:[],onChange:function(e){return C({temporal_predicate:e})},prefixes:m}),(0,r.jsx)(be.Z,{"aria-label":"delete",onClick:function(){return C({temporal_predicate:null})},children:(0,r.jsx)(yr.Z,{})})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit number of timestamps",value:null!==(h=null===a||void 0===a?void 0:a.temporal_group_count)&&void 0!==h?h:20,valueLabelFormat:function(e){return e!==Vr?e.toString():"Unlimited"},onChange:function(e,t){return C({temporal_group_count:t})},min:1,max:Vr,step:1})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(Lt.Z,{variant:"text",startIcon:(0,r.jsx)(xr.Z,{}),onClick:function(){return C({temporal_predicate:[]})},children:" Add temporal grouping"})})]})}),[a.temporal_predicate,a.temporal_group_count]),I=(0,p.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Value Distribution Query Builder",subheader:"Plots distribution of values for a given predicate and a filter",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return v(!0)},children:(0,r.jsx)(tt.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(Nt.Z,{label:"For Subject",value:"Any",variant:"filled",disabled:!0})}),(0,r.jsx)(pe.ZP,{item:!0,xs:8,children:(0,r.jsx)(bn,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"PREDICATE",label:"Group values of",value:null!==(y=null===a||void 0===a?void 0:a.group_predicate)&&void 0!==y?y:[],onChange:function(e){return C({group_predicate:e})},prefixes:m})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(xe.Z,{children:(0,r.jsx)(qe.Z,{control:(0,r.jsx)(Be.Z,{value:null!==(x=null===a||void 0===a?void 0:a.continuous)&&void 0!==x&&x,checked:null!==(j=null===a||void 0===a?void 0:a.continuous)&&void 0!==j&&j,onChange:function(e){return C({continuous:e.target.checked})}}),label:"Continuous"})})}),A,(0,r.jsx)(pe.ZP,{item:!0,xs:2}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(Lt.Z,{variant:"text",startIcon:(0,r.jsx)(xr.Z,{}),onClick:P,children:" Add filter"})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit number of groups",value:null!==(g=null===a||void 0===a?void 0:a.group_count)&&void 0!==g?g:20,valueLabelFormat:function(e){return e!==Vr?e.toString():"Unlimited"},onChange:function(e,t){return C({group_count:t})},min:1,max:Vr,step:1})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Min group size",value:null!==(w=null===a||void 0===a?void 0:a.min_group_size)&&void 0!==w?w:2,onChange:function(e,t){return C({min_group_size:t})},min:1,max:20,step:1})})}),k]})})}),[a,m]),_=(0,p.useMemo)((function(){return!!(null===u||void 0===u?void 0:u.length)&&(0,r.jsx)(lt,{value:null!==(O=a.output_mode)&&void 0!==O?O:"plot",tabs:Qr,onChange:function(e,t){return C({output_mode:t})},renderTab:function(e){return(0,r.jsx)(Jr,{mode:e,outputs:u,settings:null!==(S=a.visualization_settings)&&void 0!==S?S:{},setData:C})}})}),[a.output_mode,u,a.visualization_settings]);return(0,r.jsxs)(r.Fragment,{children:[I,_,(0,r.jsx)(De,{source:{"Main Query":c[0],"Example Query":c[1],"Completeness Query":c[2]},open:d,onClose:function(){return v(!1)}})]})},widget_triplematch:function(e){var t=G().report,n=ce(),o=n.cell,i=n.cellRef,u=n.outputs,l=n.setCell,a=o.data,c=o.source,s=Jn(p.useState(!1),2),d=s[0],v=s[1],m=J();(0,p.useEffect)((function(){var e=function(e){var t,n,r,o,i,u=(0,we.X)($n()),l=null!==(o=e.target)&&void 0!==o?o:"SUBJECT",a=(0,ge.variable)("s"),c=(0,ge.variable)("p"),s=(0,ge.variable)("o");if("SUBJECT"!==l&&(null===(t=e.subject)||void 0===t?void 0:t.length)){var f,d,v=null!==(d=null===(f=e.subject)||void 0===f?void 0:f.map(rr))&&void 0!==d?d:[];u=u.WHERE(Kn(),a,v)}if("PREDICATE"!==l&&(null===(n=e.predicate)||void 0===n?void 0:n.length)){var p,m,b=null!==(m=null===(p=e.predicate)||void 0===p?void 0:p.map(rr))&&void 0!==m?m:[];u=u.WHERE(Yn(),c,b)}if("OBJECT"!==l&&(null===(r=e.object)||void 0===r?void 0:r.length)){var h,y,x=null!==(y=null===(h=e.object)||void 0===h?void 0:h.map(rr))&&void 0!==y?y:[];u=u.WHERE(er(),s,x)}return{primaryQuery:(u=u.WHERE(tr(),a,c,s).LIMIT(null!==(i=e.limit)&&void 0!==i?i:100)).build()}}(a).primaryQuery;l(Gn({},o,{source:[e]}))}),[a]);var b,h,y,x,j,g,w,O=(0,p.useCallback)((function(e){var t=i.current;l(Gn({},t,{data:Gn({},t.data,e)}))}),[]),S=null!==(b=a.target)&&void 0!==b?b:"SUBJECT",C=(0,p.useMemo)((function(){var e,n,o;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Triple Match Builder",subheader:"Displays all matching triples given a set of filters",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return v(!0)},children:(0,r.jsx)(tt.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsxs)(he.Z,{fullWidth:!0,children:[(0,r.jsx)(qn.Z,{children:"I need a"}),(0,r.jsxs)(Bn.Z,{value:S,label:"Term Type",onChange:function(e){return O({target:e.target.value})},children:[(0,r.jsx)(Hn.Z,{value:"SUBJECT",children:"Subject"}),(0,r.jsx)(Hn.Z,{value:"PREDICATE",children:"Predicate"}),(0,r.jsx)(Hn.Z,{value:"OBJECT",children:"Object"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(Me.Z,{children:"That matches"})}),(0,r.jsxs)(pe.ZP,{container:!0,item:!0,xs:12,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:"SUBJECT"===S?(0,r.jsx)(Nt.Z,{label:"For Subject",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(bn,{datasetId:null===t||void 0===t||null===(e=t.dataset)||void 0===e?void 0:e.id,pos:"SUBJECT",label:"Subject must match",value:null!==(h=a.subject)&&void 0!==h?h:[],onChange:function(e){return O({subject:e})},prefixes:m})}),(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:"PREDICATE"===S?(0,r.jsx)(Nt.Z,{label:"For Predicate",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(bn,{datasetId:null===t||void 0===t||null===(n=t.dataset)||void 0===n?void 0:n.id,pos:"PREDICATE",label:"Predicate must match",value:null!==(y=a.predicate)&&void 0!==y?y:[],onChange:function(e){return O({predicate:e})},prefixes:m})}),(0,r.jsx)(pe.ZP,{item:!0,xs:4,children:(0,r.jsx)(f.Z,{direction:"row",spacing:2,children:"OBJECT"===S?(0,r.jsx)(Nt.Z,{label:"For Object",value:"Any",variant:"filled",fullWidth:!0,disabled:!0}):(0,r.jsx)(bn,{sx:{flex:1},datasetId:null===t||void 0===t||null===(o=t.dataset)||void 0===o?void 0:o.id,pos:"OBJECT",label:"Object must match",value:null!==(x=a.object)&&void 0!==x?x:[],onChange:function(e){return O({object:e})},prefixes:m})})})]}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit results",value:null!==(j=null===a||void 0===a?void 0:a.limit)&&void 0!==j?j:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return O({limit:t})},min:100,max:1e3,step:100})})})]})})}),[a,m]),P=(0,p.useMemo)((function(){return!!(null===u||void 0===u?void 0:u.length)&&(0,r.jsx)(lt,{value:null!==(g=a.output_mode)&&void 0!==g?g:"table",tabs:nr,onChange:function(e,t){return O({output_mode:t})},renderTab:function(e){return(0,r.jsx)(or,{mode:e,outputs:u,settings:null!==(w=a.visualization_settings)&&void 0!==w?w:{},setData:O})}})}),[a.output_mode,u,a.visualization_settings]);return(0,r.jsxs)(r.Fragment,{children:[C,P,(0,r.jsx)(De,{source:{"Main Query":c[0]},open:d,onClose:function(){return v(!1)}})]})},widget_classtree:function(e){var t,n,o,i,u,l,a,c=ce().cell,s=c.data,f=c.source,d=mt(p.useState(!1),2),v=d[0],m=d[1],b=Pe(_t).setData;(0,p.useEffect)((function(){b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){pt(e,t,n[t])}))}return e}({withCounts:!0,withSubs:!0,withEquivs:!0,withKeys:!0,withProps:!0,owlClasses:!0,rdfClasses:!0,anyClass:!1},s))}),[]);var h=(0,p.useMemo)((function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Class Tree Widget",subheader:"Displays a two level class hierarchy of the dataset",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return m(!0)},children:(0,r.jsx)(tt.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:6,children:(0,r.jsxs)(he.Z,{sx:{m:3},component:"fieldset",variant:"standard",children:[(0,r.jsx)(ye.Z,{component:"legend",children:"General Settings"}),(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(Ge,{value:null===(t=s.withCounts)||void 0===t||t,onChange:function(e){return b({withCounts:e.target.checked})},label:"With Counts"}),(0,r.jsx)(Ge,{value:null===(n=s.withSubs)||void 0===n||n,onChange:function(e){return b({withSubs:e.target.checked})},label:"With Subclasses"}),(0,r.jsx)(Ge,{value:null===(o=s.withEquivs)||void 0===o||o,onChange:function(e){return b({withEquivs:e.target.checked})},label:"With Equivalent Classes"}),(0,r.jsx)(Ge,{value:null===(i=s.withKeys)||void 0===i||i,onChange:function(e){return b({withKeys:e.target.checked})},label:"With Keys"}),(0,r.jsx)(Ge,{value:s.withProps,onChange:function(e){return b({withProps:e.target.checked})},label:"With Properties"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:6,children:(0,r.jsxs)(he.Z,{sx:{m:3},component:"fieldset",variant:"standard",children:[(0,r.jsx)(ye.Z,{component:"legend",children:"Class Type"}),(0,r.jsxs)(xe.Z,{children:[(0,r.jsx)(Ge,{value:null===(u=s.owlClasses)||void 0===u||u,onChange:function(e){return b({owlClasses:e.target.checked})},label:"Use OWL Classes"}),(0,r.jsx)(Ge,{value:null===(l=s.rdfClasses)||void 0===l||l,onChange:function(e){return b({rdfClasses:e.target.checked})},label:"Use RDF Classes"}),(0,r.jsx)(Ge,{value:s.anyClass,onChange:function(e){return b({anyClass:e.target.checked})},label:"Use Any Classes"})]})]})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit results",value:null!==(a=null===s||void 0===s?void 0:s.limit)&&void 0!==a?a:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return b({limit:t})},min:100,max:1e3,step:100})})})]})})}),[s,s.owlClasses]);return(0,r.jsxs)(r.Fragment,{children:[h,(0,r.jsx)(at,{mode:s.output_mode,options:It,renderResult:Tt,onChange:function(e){return b({output_mode:e})}}),(0,r.jsx)(De,{source:{"Main Query":f[0]},open:v,onClose:function(){return m(!1)}})]})},widget_propertiespreview:function(e){var t,n,o=G().report,i=ce().cell,u=i.data,l=i.source,a=jn(p.useState(!1),2),c=a[0],s=a[1],f=J(),d=Pe(Cn).setData,v=(0,p.useMemo)((function(){var e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Property Preview Widget",subheader:"Displays all properties for a given object",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return s(!0)},children:(0,r.jsx)(tt.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(bn,{datasetId:null===o||void 0===o||null===(e=o.dataset)||void 0===e?void 0:e.id,pos:"SUBJECT",label:"Subject must match",value:null!==(t=u.subject)&&void 0!==t?t:[],onChange:function(e){return d({subject:e})},prefixes:f})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit results",value:null!==(n=null===u||void 0===u?void 0:u.limit)&&void 0!==n?n:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return d({limit:t})},min:100,max:1e3,step:100})})})]})})}),[u,f]);return(0,r.jsxs)(r.Fragment,{children:[v,(0,r.jsx)(at,{mode:u.output_mode,options:Sn,renderResult:Pn,onChange:function(e){return d({output_mode:e})}}),(0,r.jsx)(De,{source:{"Main Query":l[0]},open:c,onClose:function(){return s(!1)}})]})},widget_subgraph:function(e){var t,n,o,i,u,l,a=G().report,c=ce().cell,s=c.data,f=c.source,d=En(p.useState(!1),2),v=d[0],m=d[1],b=Pe(Wn).setData,h=J(),y=(0,p.useMemo)((function(){var e,c;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(pe.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(me.Z,{sx:{p:0},title:"Subgraph Widget",subheader:"Displays a subgraph consisting os triples around a chosen entity.",action:(0,r.jsx)(be.Z,{"aria-label":"View source",onClick:function(){return m(!0)},children:(0,r.jsx)(tt.Z,{})})})}),(0,r.jsx)(pe.ZP,{item:!0,xs:12,children:(0,r.jsx)(bn,{datasetId:null===a||void 0===a||null===(e=a.dataset)||void 0===e?void 0:e.id,pos:"SUBJECT",label:"Create subgraph for",value:null!==(t=s.entity)&&void 0!==t?t:[],onChange:function(e){return b({entity:e})},prefixes:h})}),(0,r.jsx)(pe.ZP,{item:!0,xs:2,children:(0,r.jsx)(Ge,{value:null===(n=s.anyPredicate)||void 0===n||n,onChange:function(e){return b({anyPredicate:e.target.checked})},label:"Use any property"})}),(0,r.jsx)(pe.ZP,{item:!0,xs:10,children:(0,r.jsx)(bn,{datasetId:null===a||void 0===a||null===(c=a.dataset)||void 0===c?void 0:c.id,pos:"PREDICATE",label:"Limit properties to",disabled:null===(o=s.anyPredicate)||void 0===o||o,value:null!==(i=s.predicates)&&void 0!==i?i:[],onChange:function(e){return b({predicates:e})},prefixes:h})}),(0,r.jsxs)(pe.ZP,{item:!0,xs:12,children:[(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit results",value:null!==(u=null===s||void 0===s?void 0:s.limit)&&void 0!==u?u:100,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return b({limit:t})},min:100,max:1e3,step:100})}),(0,r.jsx)(je.Z,{maxWidth:"md",children:(0,r.jsx)(et,{label:"Limit depth",value:null!==(l=null===s||void 0===s?void 0:s.depth)&&void 0!==l?l:1,valueLabelFormat:function(e){return e.toString()},onChange:function(e,t){return b({depth:t})},min:1,max:5,step:1})})]})]})})}),[s]);return(0,r.jsxs)(r.Fragment,{children:[y,(0,r.jsx)(at,{mode:s.output_mode,options:Dn,renderResult:zn,onChange:function(e){return b({output_mode:e})}}),(0,r.jsx)(De,{source:{"In Query":f[0],"Out Query":f[1]},open:v,onClose:function(){return m(!1)}})]})}},$r=function(e){var t=(0,fe.Z)(),n=j().focus,o=ce(),i=o.cell,l=o.state,a=o.runCell,c=n===i.metadata.id,s=Xr[i.cell_type],d=(0,p.useMemo)((function(){var e="RUNNING"===(null===l||void 0===l?void 0:l.status)||"QUEUED"===(null===l||void 0===l?void 0:l.status),t=e?"primary":"FINISHED"===(null===l||void 0===l?void 0:l.status)?"success":"ERROR"===(null===l||void 0===l?void 0:l.status)?"error":"primary";return(0,r.jsx)(se.Z,{loading:e,variant:"text",onClick:a,color:t,loadingIndicator:(0,r.jsx)(de.Z,{color:"primary",size:16}),children:(0,r.jsx)(ve.Z,{})})}),[l]);return(0,r.jsxs)(u.Z,{py:2,sx:{display:"flex",borderColor:c?t.palette.grey[300]:"transparent",borderStyle:"solid",borderRadius:"8px",position:"relative"},children:[(0,r.jsx)(u.Z,{children:d}),(0,r.jsx)(f.Z,{spacing:2,sx:{flex:1},children:(0,r.jsx)(s,{})})]})},Kr=n(88078);function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yr(e,t,n[t])}))}return e}var to=function(e){var t,n=te(),o=n.notebook,i=n.notebookRef,u=n.setNotebook,l=n.isSaving,a=n.changed,c=(0,p.useCallback)((function(e){var t;u(eo({},i.current,{metadata:eo({},null===(t=i.current)||void 0===t?void 0:t.metadata,{name:e})}))}),[i]);return(0,p.useMemo)((function(){var e;return(0,r.jsx)(me.Z,{title:null===o?(0,r.jsx)(Kr.Z,{variant:"text"}):(0,r.jsx)(Xe.Z,{fullWidth:!0,value:null===o||void 0===o||null===(e=o.metadata)||void 0===e?void 0:e.name,onChange:function(e){return c(e.target.value)}}),subheader:null===o?(0,r.jsx)(Kr.Z,{variant:"text"}):l?"Saving...":a?"Changed":"Draft saved"})}),[null===o||void 0===o||null===(t=o.metadata)||void 0===t?void 0:t.name,l,a])},no=n(86002),ro=n(72428);function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oo(e,t,n[t])}))}return e}function uo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var lo=function(e){var t=e.label,n=e.icon,o=uo(e,["label","icon"]);return(0,r.jsx)(tn.Z,{title:t,children:(0,r.jsx)(be.Z,io({},o,{children:n}))})};function ao(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function co(e,t,n,r,o,i,u){try{var l=e[i](u),a=l.value}catch(c){return void n(c)}l.done?t(a):Promise.resolve(a).then(r,o)}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){so(e,t,n[t])}))}return e}function vo(e){return function(e){if(Array.isArray(e))return ao(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ao(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ao(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var po=function(e){var t=(0,p.useState)(!1),n=t[0],o=t[1],i=(0,g.Z)().sendNotification,u=e.onClose,l=e.dataset,a=zt.Ry({}),c=(0,Wt.TA)({initialValues:{namespaces:l.namespaces},validationSchema:a,onSubmit:function(){var e,t=(e=M().mark((function e(t){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,D.x1.put("/datasets/".concat(null===l||void 0===l?void 0:l.id,"/"),fo({},l,{namespaces:t.namespaces}));case 4:(n=e.sent)&&(200===n.status?(i({variant:"success",message:"Updated dataset namespaces"}),u(!0)):i({variant:"error",message:"Error updating dataset namespaces"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),i({variant:"error",message:"Error updating dataset namespaces"});case 12:o(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function u(e){co(i,r,o,u,l,"next",e)}function l(e){co(i,r,o,u,l,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()}),s=(0,r.jsx)(r.Fragment,{children:c.values.namespaces.map((function(e,t){return(0,r.jsxs)(f.Z,{direction:"row",children:[(0,r.jsx)(Nt.Z,{label:"Prefix",variant:"filled",name:"namespaces[".concat(t,"].prefix"),value:e.prefix,onChange:c.handleChange}),(0,r.jsx)(Nt.Z,{label:"URI",variant:"filled",name:"namespaces[".concat(t,"].name"),value:e.name,onChange:c.handleChange,sx:{flex:1}}),(0,r.jsx)(lo,{label:"Delete",icon:(0,r.jsx)(yr.Z,{}),onClick:function(){return c.setFieldValue("namespaces",c.values.namespaces.filter((function(e,n){return t!==n})))}})]},t)}))}),d=(0,p.useCallback)((function(){c.setFieldValue("namespaces",vo(c.values.namespaces).concat([{prefix:"",name:""}]))}),[c.values.namespaces]);return(0,r.jsxs)(Bt.Y,{form:c,loading:n,actions:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Lt.Z,{variant:"contained",type:"submit",children:"Submit"})}),children:[(0,r.jsx)(f.Z,{children:s}),(0,r.jsx)(f.Z,{direction:"row",justifyContent:"center",sx:{pt:2},children:(0,r.jsx)(Lt.Z,{variant:"text",startIcon:(0,r.jsx)(xr.Z,{}),onClick:d,children:" Add namespace"})})]})},mo=n(25883),bo=n(41899),ho=n(59622),yo=n(95175);function xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jo=function(e){var t,n,o,i=G(),l=i.report,a=i.refetch,s=j(),f=s.focus,d=s.focusRef,v=s.setFocus,b=te(),h=b.notebook,y=b.notebookRef,x=b.setNotebook,w=ue().runCells,O=(0,g.Z)().sendNotification,S=f?h.content.cells[f]:null,C=null!==(n=null===S||void 0===S?void 0:S.cell_type)&&void 0!==n?n:"code",P=null!==(o=null===S||void 0===S||null===(t=S.metadata)||void 0===t?void 0:t.timeout)&&void 0!==o?o:5e3,Z=(0,p.useState)(!1),E=Z[0],A=Z[1];(0,p.useEffect)((function(){!f&&y.current&&y.current.content.cell_order.length>0&&v(y.current.content.cell_order[0])}),[null===f]);var k=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=y.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===d.current})))&&void 0!==r?r:-1,i=(0,m.kE)("code");x((0,m.gg)(y.current,i,o)),O({variant:"success",message:"Cell added"})}),[]),I=(0,p.useCallback)((function(){var e,t,n,r,o=null!==(r=null===(e=y.current)||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.cell_order)||void 0===n?void 0:n.findIndex((function(e){return e===d.current})))&&void 0!==r?r:-1;x((0,m.rZ)(y.current,d.current)),O({variant:"success",message:"Cell #".concat(o+1," deleted")})}),[]),_=(0,p.useCallback)((function(e){var t,n,r,o,i=null!==(o=null===(t=y.current)||void 0===t||null===(n=t.content)||void 0===n||null===(r=n.cell_order)||void 0===r?void 0:r.findIndex((function(e){return e===d.current})))&&void 0!==o?o:-1,u=y.current.content.cells[d.current],l=(0,m.kE)(e,u.metadata);x((0,m.VC)(y.current,d.current,l)),O({variant:"success",message:"Cell #".concat(i+1," type changed to ").concat(e)})}),[]),T=(0,p.useCallback)((function(e){x((0,m.wN)(y.current,d.current,{timeout:e}))}),[]),R=(0,p.useCallback)((function(){w([d.current])}),[]),M=(0,p.useCallback)((function(){w(y.current.content.cell_order)}),[]),L=(0,p.useMemo)((function(){return(0,r.jsx)(Ht.F,{width:720,title:"Edit Namespaces",open:E,onClose:function(){return A(!1)},children:(0,r.jsx)(po,{dataset:null===l||void 0===l?void 0:l.dataset,onClose:function(e){A(!1),e&&a()}})})}),[E,null===l||void 0===l?void 0:l.dataset]),N=(0,p.useMemo)((function(){return(0,r.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",width:"fit-content",border:function(e){return"1px solid ".concat(e.palette.divider)},borderLeftWidth:"0px",borderRightWidth:"0px",borderRadius:1,bgcolor:"background.paper",color:"text.secondary",pl:2},children:[(0,r.jsx)(lo,{size:"large",onClick:k,label:"Add cell",icon:(0,r.jsx)(ro.Z,{fontSize:"inherit"})}),(0,r.jsx)(lo,{size:"large",onClick:I,label:"Delete cell",icon:(0,r.jsx)(yr.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(lo,{size:"large",label:"Cut cell",icon:(0,r.jsx)(mo.Z,{fontSize:"inherit"})}),(0,r.jsx)(lo,{size:"large",label:"Copy cell",icon:(0,r.jsx)(bo.Z,{fontSize:"inherit"})}),(0,r.jsx)(lo,{size:"large",label:"Paste cell",icon:(0,r.jsx)(ho.Z,{fontSize:"inherit"})}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsx)(lo,{size:"large",onClick:R,label:"Run cell",icon:(0,r.jsx)(ve.Z,{fontSize:"inherit"})}),(0,r.jsx)(lo,{size:"large",onClick:M,label:"Run all",icon:(0,r.jsx)(yo.Z,{fontSize:"inherit"})}),(0,r.jsx)(lo,{size:"large",label:"Edit Namespaces",icon:(0,r.jsx)(no.Z,{}),onClick:function(){return A(!0)}}),(0,r.jsx)(c.Z,{orientation:"vertical",flexItem:!0}),(0,r.jsxs)(he.Z,{variant:"filled",sx:{minWidth:120},children:[(0,r.jsx)(qn.Z,{children:"Cell Type"}),(0,r.jsxs)(Bn.Z,{displayEmpty:!0,sx:{border:"none"},value:C,onChange:function(e){return _(e.target.value)},children:[(0,r.jsx)(Hn.Z,{value:"code",children:"Code"}),(0,r.jsx)(Hn.Z,{value:"markdown",children:"Markdown"}),(0,r.jsx)(Hn.Z,{value:"widget_valuedistribution",children:"Histogram Widget"}),(0,r.jsx)(Hn.Z,{value:"widget_triplematch",children:"Triple Match Widget"}),(0,r.jsx)(Hn.Z,{value:"widget_classtree",children:"Class Tree Widget"}),(0,r.jsx)(Hn.Z,{value:"widget_propertiespreview",children:"Properties Preview Widget"}),(0,r.jsx)(Hn.Z,{value:"widget_subgraph",children:"Subgraph Widget"})]})]}),(0,r.jsx)(en.Z,{sx:{minWidth:140},getOptionLabel:function(e){return e.toString()},renderInput:function(e){return(0,r.jsx)(Nt.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){xo(e,t,n[t])}))}return e}({},e,{variant:"filled",label:"Timeout (s)",placeholder:"Timeout (s)"}))},options:[5,60,180,600],disableClearable:!0,value:P/1e3,onChange:function(e,t){return t&&T(1e3*t)}})]})}),[f,C,P]);return(0,r.jsxs)(r.Fragment,{children:[N,L]})},go=function(e){var t,n=te().notebook,o=null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.cell_order.map((function(e){return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(ae,{cellId:e,children:(0,r.jsx)($r,{})}),(0,r.jsx)(c.Z,{})]},e)}));return(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(f.Z,{sx:{position:"sticky",zIndex:10,left:0,right:0,top:0},children:(0,r.jsxs)(s.Z,{elevation:15,children:[(0,r.jsx)(to,{}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(jo,{})]})}),(0,r.jsx)(c.Z,{}),(0,r.jsx)(d.Z,{children:o})]})},wo=function(){var e=(0,l.useRouter)().query.rid;return console.log(e),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"BOLD Profiler"})}),(0,r.jsx)(u.Z,{component:"main",children:e&&(0,r.jsx)(Q,{reportId:e,children:(0,r.jsx)(A,{reportId:e,children:(0,r.jsx)(ee,{children:(0,r.jsx)(x,{children:(0,r.jsx)(ie,{children:(0,r.jsx)(go,{})})})})})})})]})};wo.getLayout=function(e){return(0,r.jsx)(a.A,{showNavbar:!1,children:e})};var Oo=wo},68699:function(e,t,n){"use strict";n.d(t,{VC:function(){return s},dr:function(){return d},gg:function(){return p},kE:function(){return c},lU:function(){return f},lw:function(){return a},rZ:function(){return m},wN:function(){return v}});var r=n(25934);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=function(e){return{metadata:{name:e},content:{cells:{},cell_order:[]},results:{outputs:{},states:{}}}},c=function(e,t){return t=null!==t&&void 0!==t?t:{id:(0,r.Z)()},"code"===e?{cell_type:"code",metadata:t,source:"SELECT * \n{ ?s ?p ?o } \nLIMIT 10"}:"markdown"===e?{cell_type:"markdown",metadata:t,source:["# Markdown cell"]}:e.startsWith("widget_")?{cell_type:e,metadata:t,source:[],data:{}}:void 0},s=function(e,t,n){return u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},t,n))})})},f=function(e,t,n){return u({},e,{results:u({},e.results,{outputs:u({},e.results.outputs,i({},t,n))})})},d=function(e,t,n){return u({},e,{results:u({},e.results,{states:u({},e.results.states,i({},t,u({},e.results.states[t],n)))})})},v=function(e,t,n){return u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},t,u({},e.content.cells[t],{metadata:u({},e.content.cells[t].metadata,n)})))})})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.metadata.id,o=l(e.content.cell_order);return-1===n?o.push(r):o.splice(n+1,0,r),u({},e,{content:u({},e.content,{cells:u({},e.content.cells,i({},r,t)),cell_order:o}),results:{outputs:u({},e.results.outputs,i({},r,[])),states:u({},e.results.states,i({},r,{status:"INITIAL"}))}})},m=function(e,t){var n=l(e.content.cell_order),r=n.indexOf(t);-1!==r&&n.splice(r,1);var o=u({},e.content.cells);return delete o[t],u({},e,{content:u({},e.content,{cells:o,cell_order:n})})}},17224:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});var r=function(e,t){return{name:t,value:e.values[t],onChange:e.handleChange,error:e.touched[t]&&Boolean(e.errors[t]),helperText:e.touched[t]&&e.errors[t]}}}},function(e){e.O(0,[502,464,551,13,80,91,774,888,179],(function(){return t=22904,e(e.s=t);var t}));var t=e.O();_N_E=t}]);