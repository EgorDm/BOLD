(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{74295:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/triplydb",function(){return n(41300)}])},41300:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ve}});var r=n(85893),a=n(9008),o=n.n(a),i=n(99226),l=n(53156),s=n(66242),c=n(78445),u=n(44267),d=n(76992),f=n(81458),m=n(27484),p=n.n(m),h=n(41664),v=n.n(h),x=n(67294),y=n(58953),b=n(65362),j=n(26615),g=n(27798),w=n(25778),Z=n(3430),_=n(34051),P=n.n(_),O=n(9669),S=n.n(O),k=n(88767);function A(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,a)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}var C=function(e,t){return(0,k.useQuery)(["tdb-datasets",e,t],(n=P().mark((function n(){var r,a;return P().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?{q:e}:{},n.next=3,S().get("https://api.triplydb.com/datasets",{params:N({},r,{limit:t})});case 3:return a=n.sent,n.abrupt("return",a.data);case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){A(o,r,a,i,l,"next",e)}function l(e){A(o,r,a,i,l,"throw",e)}i(void 0)}))}));var n},I=n(93902),T=n(83321),L=n(86886),q=n(50122),E=n(15861),F=n(61903),M=n(94054),R=n(40476),B=n(53457),W=n(50480),G=n(69368),z=n(97212),U=n(59334),Q=n(47312),V=n(85945),Y=n(18972),H=n(54048),X=n(82580),K=n(9386),$=n(87177),J=n(74231),ee=n(62400),te=n(17224);function ne(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,a)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){re(e,t,n[t])}))}return e}var oe,ie,le=function(e){var t,n=(0,x.useState)(!1),a=n[0],o=n[1],i=(0,$.Z)().sendNotification,l=e.dataset,s=e.onComplete,c="https://triplydb.com/".concat(l.owner.accountName,"/").concat(l.name),u="".concat(c,"/download.ttl.gz"),d="https://api.triplydb.com/datasets/".concat(l.owner.accountName,"/").concat(l.name),f="".concat(d,"/services/").concat(l.name,"/sparql"),m=J.Ry({});console.log(l);var p=(0,X.TA)({initialValues:{name:l.displayName,description:null!==(t=l.description)&&void 0!==t?t:"",use_sparql:!1,search_mode:"LOCAL"},validationSchema:m,onSubmit:function(){var e,t=(e=P().mark((function e(t){var n,r;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,n=t.use_sparql?{source_type:"sparql",sparql:f}:{source_type:"urls",urls:[u]},e.next=5,ee.x1.post("/datasets/",{name:t.name,description:t.description,mode:"sparql"===n.source_type?"SPARQL":"LOCAL",search_mode:t.search_mode,source:ae({tdb_id:"".concat(l.owner.accountName,"/").concat(l.name)},n)});case 5:(r=e.sent)&&(201===r.status?(console.log(r.data),i({message:"TriplyDB dataset scheduled for import",variant:"success"}),s(!0)):i({message:"Error creating dataset",variant:"error"})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:o(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ne(o,r,a,i,l,"next",e)}function l(e){ne(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return x.useEffect((function(){p.resetForm()}),[l]),(0,r.jsx)(K.Y,{form:p,loading:a,actions:(0,r.jsx)(T.Z,{variant:"contained",type:"submit",children:"Submit"}),children:(0,r.jsxs)(L.ZP,{container:!0,spacing:3,children:[(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsx)(q.Z,{href:c,target:"_blank",children:(0,r.jsxs)(E.Z,{variant:"body2",children:["Open on TripleDB ",(0,r.jsx)(H.Z,{fontSize:"small"})]})})}),(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsx)(F.Z,ae({label:"Name",variant:"outlined",fullWidth:!0},(0,te.s)(p,"name")))}),(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsx)(F.Z,ae({maxRows:4,label:"Description",variant:"outlined",multiline:!0,fullWidth:!0},(0,te.s)(p,"description")))}),(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsxs)(M.Z,{component:"fieldset",variant:"standard",children:[(0,r.jsx)(R.Z,{component:"legend",children:"Downloads"}),(0,r.jsx)(B.Z,{children:(0,r.jsx)(W.Z,{control:(0,r.jsx)(G.Z,{checked:!p.values.use_sparql,value:!p.values.use_sparql,onChange:function(e){return p.setFieldValue("use_sparql",!e.target.checked)}}),label:(0,r.jsx)(z.ZP,{alignItems:"flex-start",children:(0,r.jsx)(U.Z,{primary:(0,r.jsxs)(q.Z,{href:u,target:"_blank",children:["download.ttl.gz ",(0,r.jsx)(H.Z,{fontSize:"small"})]})})})})})]})}),(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsxs)(M.Z,{component:"fieldset",variant:"standard",children:[(0,r.jsx)(R.Z,{component:"legend",children:"SPARQL Endpoints"}),(0,r.jsx)(B.Z,{children:(0,r.jsx)(W.Z,{control:(0,r.jsx)(G.Z,{checked:p.values.use_sparql,value:p.values.use_sparql,onChange:function(e){p.setFieldValue("use_sparql",e.target.checked),e.target.checked&&p.setFieldValue("search_mode","TRIPLYDB")}}),label:(0,r.jsx)(z.ZP,{alignItems:"flex-start",children:(0,r.jsx)(U.Z,{primary:(0,r.jsxs)(q.Z,{href:f,target:"_blank",children:["SPAQRQL Service ",(0,r.jsx)(H.Z,{fontSize:"small"})]})})})})})]})}),(0,r.jsx)(L.ZP,{item:!0,xs:12,children:(0,r.jsxs)(M.Z,{fullWidth:!0,children:[(0,r.jsx)(Q.Z,{id:"search_mode_label",children:"Search Mode"}),(0,r.jsxs)(V.Z,ae({labelId:"search_mode_label",label:"Search Mode"},(0,te.s)(p,"search_mode"),{children:[(0,r.jsx)(Y.Z,{value:"LOCAL",children:"Build Local Search Index"}),(0,r.jsx)(Y.Z,{value:"WIKIDATA",children:"Use WikiData API"}),(0,r.jsx)(Y.Z,{value:"TRIPLYDB",children:"Use TriplyDB API"})]}))]})})]})})};function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){l=!0,a=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}}(e,t)||fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"===typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}var me=[{field:"id",headerName:"ID",flex:.5,valueFormatter:function(e){return(0,I.UN)(e.value)}},{field:"displayName",headerName:"Title",flex:1,minWidth:200,renderCell:function(e){return(0,r.jsx)(v(),{href:"https://triplydb.com/".concat(encodeURIComponent(e.row.owner.accountName),"/").concat(encodeURIComponent(e.row.name)),target:"_blank",children:e.value})}},{field:"description",headerName:"Description",flex:1,renderCell:function(e){return(0,r.jsx)(w.j,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ce(e,t,n[t])}))}return e}({},e,{value:null!==(oe=e.value)&&void 0!==oe?oe:"",maxLength:80}))}},{field:"statements",headerName:"Triples",flex:.5,type:"number"},{field:"license",headerName:"License",flex:.5},{field:"owner",headerName:"Owner",flex:.5,minWidth:200,valueGetter:function(e){return null!==(ie=e.row.owner.name)&&void 0!==ie?ie:e.row.owner.accountName}},{field:"createdAt",headerName:"Created At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return(0,I.o0)(e.value)}},{field:"updatedAt",headerName:"Updated At",flex:.5,type:"dateTime",minWidth:200,valueFormatter:function(e){return p()(e.value).fromNow()}}],pe=function(e){var t=(0,x.useState)(""),n=t[0],a=t[1],o=(0,x.useState)(20),l=o[0],s=o[1],c=ue(x.useState({items:[]}),2),u=c[0],d=c[1],m=ue(x.useState(null),2),p=m[0],h=m[1];(0,x.useEffect)((function(){var e,t;a(null!==(t=null===u||void 0===u||null===(e=u.quickFilterValues)||void 0===e?void 0:e.join(" "))&&void 0!==t?t:"")}),[u]);var v=C(n,l),w=v.data,_=v.isFetching,P=v.isLoading;console.log(w);var O,S=de(me).concat([{field:"actions",type:"actions",getActions:function(e){return[(0,r.jsx)(b.u,{icon:(0,r.jsx)(y.Z,{}),onClick:function(){return t=e.row,void h(t);var t},label:"Import"})]}}]);return(0,r.jsxs)(i.Z,{sx:{width:"100%",height:600},children:[(0,r.jsx)(j._,{components:{Toolbar:g.n,LoadingOverlay:f.Z},rowCount:null!==(O=null===w||void 0===w?void 0:w.length)&&void 0!==O?O:0,paginationMode:"server",pageSize:l,onPageSizeChange:s,rowsPerPageOptions:[20,50,100],rows:w||[],loading:_||P,columns:S,getRowHeight:function(){return"auto"},getEstimatedRowHeight:function(){return 100},filterMode:"server",onFilterModelChange:d,initialState:{columns:{columnVisibilityModel:{n_downloads_available:!1,n_downloads_kg:!1,n_downloads_maybekg:!1}}},componentsProps:{toolbar:{showQuickFilter:!0,quickFilterProps:{debounceMs:500}}},sx:{"&.MuiDataGrid-root--densityCompact .MuiDataGrid-cell":{py:1,overflow:"hidden"},"&.MuiDataGrid-root--densityStandard .MuiDataGrid-cell":{py:"15px",overflow:"hidden"},"&.MuiDataGrid-root--densityComfortable .MuiDataGrid-cell":{py:"22px",overflow:"hidden"}}}),(0,r.jsx)(Z.F,{title:"Import TriplyDB Dataset",open:!!p,onClose:function(){return h(null)},children:(0,r.jsx)(le,{dataset:p,onComplete:function(){return h(null)}})})]})},he=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"BOLD Triply DB datasets"})}),(0,r.jsx)(i.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,r.jsx)(l.Z,{maxWidth:!1,children:(0,r.jsxs)(s.Z,{children:[(0,r.jsx)(c.Z,{title:"Triply DB Datasets"}),(0,r.jsx)(u.Z,{children:(0,r.jsx)(pe,{})})]})})})]})};he.getLayout=function(e){return(0,r.jsx)(d.A,{showNavbar:!1,children:e})};var ve=he}},function(e){e.O(0,[502,464,17,551,91,786,774,888,179],(function(){return t=74295,e(e.s=t);var t}));var t=e.O();_N_E=t}]);